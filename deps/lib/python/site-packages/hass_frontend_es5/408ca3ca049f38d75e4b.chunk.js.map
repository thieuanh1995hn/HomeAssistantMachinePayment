{"version":3,"sources":["webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/common/dom/setup-leaflet-map.js","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/panels/lovelace/common/compute-unused-entities.js","webpack:///./src/panels/lovelace/components/hui-entities-toggle.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.js","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.js","webpack:///./src/panels/lovelace/common/create-error-card-config.js","webpack:///./src/panels/lovelace/common/create-entity-row-element.js","webpack:///./src/panels/lovelace/common/process-config-entities.js","webpack:///./src/common/entity/valid_entity_id.js","webpack:///./src/panels/lovelace/cards/hui-entities-card.js","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.js","webpack:///./src/panels/lovelace/cards/hui-error-card.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.js","webpack:///./src/panels/lovelace/common/entity/toggle-entity.js","webpack:///./src/panels/lovelace/cards/hui-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/common/compute-card-size.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-iframe-card.js","webpack:///./src/common/util/debounce.js","webpack:///./src/panels/lovelace/cards/hui-map-card.js","webpack:///./src/panels/lovelace/cards/hui-markdown-card.js","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.js","webpack:///./src/panels/lovelace/mixins/element-click-mixin.js","webpack:///./src/panels/lovelace/elements/hui-icon-element.js","webpack:///./src/panels/lovelace/components/hui-image.js","webpack:///./src/panels/lovelace/elements/hui-image-element.js","webpack:///./src/panels/lovelace/elements/hui-service-button-element.js","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.js","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.js","webpack:///./src/panels/lovelace/elements/hui-state-label-element.js","webpack:///./src/panels/lovelace/common/create-hui-element.js","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.js","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/common/create-card-element.js","webpack:///./src/panels/lovelace/hui-unused-entities.js","webpack:///./src/panels/lovelace/hui-view.js","webpack:///./src/panels/lovelace/hui-root.js","webpack:///./src/common/dom/scroll-to-target.js","webpack:///./src/panels/lovelace/ha-panel-lovelace.js","webpack:///./src/common/dom/load_resource.js"],"names":["HaCallServiceButton","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","_createClass","key","value","this","progress","el","eventData","domain","service","serviceData","hass","callService","then","$","actionSuccess","success","actionError","fire","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","a","_templateObject","type","Boolean","String","customElements","define","HaProgressButton","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","className","classList","container","add","setTimeout","remove","_this2","prototype","__proto__","getPrototypeOf","call","addEventListener","ev","buttonTapped","stopPropagation","tempClass","disabled","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","setupLeafletMap","mapElement","map","leaflet__WEBPACK_IMPORTED_MODULE_0___default","style","document","createElement","setAttribute","parentNode","appendChild","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","HaEntityMarker","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_2__","badgeTap","entityId","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_1__","entityName","entityPicture","EXCLUDED_DOMAINS","entities","hui_entities_toggle_EXCLUDED_DOMAINS","hui_entities_toggle_HuiEntitiesToggle","polymer_element","HuiEntitiesToggle","entityIds","filter","states","includes","split","can_toggle_state","some","common_const","g","state","turnOn","target","checked","arguments","length","domainsToCall","forEach","stateDomain","compute_domain","serviceDomain","push","keys","entity_id","_toggleEntities","html_tag","Array","computed","hui_generic_entity_row_HuiGenericEntityRow","events_mixin","hui_generic_entity_row_createClass","HuiGenericEntityRow","b","name","stateObj","compute_state_name","hui_generic_entity_row_templateObject","config","_stateObj","hui_cover_entity_row_HuiCoverEntityRow","hui_cover_entity_row_createClass","HuiCoverEntityRow","cover_model","entity","Error","_config","hui_cover_entity_row_templateObject","_entityObj","hui_input_number_entity_row_HuiInputNumberEntityRow","legacy_class","iron_resizable_behavior","hui_input_number_entity_row_createClass","HuiInputNumberEntityRow","ResizeObserver","entries","_hiddenState","observe","input_number_card","attributes","mode","sliderwidth","shadowRoot","querySelector","offsetWidth","stateElement","display","oldStateObj","setProperties","_min","Number","min","_max","max","_step","step","_value","hui_input_number_entity_row_templateObject","observer","hui_input_select_entity_row_HuiInputSelectEntityRow","hui_input_select_entity_row_createClass","HuiInputSelectEntityRow","options","indexOf","option","hui_input_select_entity_row_templateObject","_selected","hui_input_text_entity_row_HuiInputTextEntityRow","hui_input_text_entity_row_createClass","HuiInputTextEntityRow","hui_input_text_entity_row_templateObject","hui_lock_entity_row_HuiLockEntityRow","localize_mixin","hui_lock_entity_row_createClass","HuiLockEntityRow","localize","hui_lock_entity_row_templateObject","hui_scene_entity_row_HuiSceneEntityRow","hui_scene_entity_row_createClass","HuiSceneEntityRow","hui_scene_entity_row_templateObject","hui_script_entity_row_HuiScriptEntityRow","hui_script_entity_row_createClass","HuiScriptEntityRow","hui_script_entity_row_templateObject","hui_text_entity_row_HuiTextEntityRow","hui_text_entity_row_createClass","HuiTextEntityRow","compute_state_display","hui_text_entity_row_templateObject","hui_timer_entity_row_HuiTimerEntityRow","hui_timer_entity_row_createClass","HuiTimerEntityRow","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","_clearInterval","_startInterval","_updateRemaining","clearInterval","_calculateRemaining","setInterval","_timeRemaining","timer_time_remaining","time","seconds_to_duration","hui_timer_entity_row_templateObject","hui_toggle_entity_row_HuiToggleEntityRow","hui_toggle_entity_row_createClass","HuiToggleEntityRow","hui_toggle_entity_row_templateObject","createErrorConfig","error","origConfig","DOMAIN_TO_ELEMENT_TYPE","cover","fan","group","input_boolean","input_number","input_select","input_text","light","lock","scene","script","timer","switch","_createElement","tag","element","setConfig","err","console","_createErrorElement","message","processConfigEntities","isArray","entityConf","index","process_config_entities_typeof","test","hui_entities_card_HuiEntitiesCard","HuiEntitiesCard","_this","_elements","hui_entities_card_createClass","hui_entities_card_templateObject","_buildConfig","show","title","show_header_toggle","_configEntities","root","lastChild","removeChild","_loop","_typeof","startsWith","substr","whenDefined","fire_event","c","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","next","done","return","hui_entity_filter_card_HuiEntitiesCard","hui_entity_filter_card_createClass","getCardSize","state_filter","_element","card","assign","createCardElement","_filterRawConfig","_updateCardConfig","tagName","entitiesList","filterState","show_empty","isPanel","hui_error_card_HuiErrorCard","hui_error_card_createClass","HuiErrorCard","obj","JSON","stringify","hui_error_card_templateObject","turnOnOffEntity","toggleEntity","hui_glance_card_HuiGlanceCard","hui_glance_card_createClass","HuiGlanceCard","updateStyles","--glance-column-width","column_width","item","info","model","tap_action","hui_glance_card_templateObject","hui_history_graph_card_HuiHistoryGraphCard","hui_history_graph_card_createClass","HuiHistoryGraphCard","_entities","_names","cacheKey","hoursToShow","hours_to_show","refresh","refresh_interval","hui_history_graph_card_templateObject","stateHistory","stateHistoryLoading","computeCardSize","hui_horizontal_stack_card_HuiHorizontalStackCard","HuiHorizontalStackCard","hui_horizontal_stack_card_createClass","hui_horizontal_stack_card_templateObject","size","elSize","cards","elements","hui_iframe_card_HuiIframeCard","hui_iframe_card_createClass","HuiIframeCard","paddingTop","aspect_ratio","offsetHeight","hui_iframe_card_templateObject","debounce","func","wait","immediate","timeout","_len","args","_key","context","callNow","clearTimeout","apply","leaflet_src_default","Icon","Default","imagePath","hui_map_card_HuiMapCard","HuiMapCard","_debouncedResizeListener","_resetMap","bind","hui_map_card_createClass","hui_map_card_templateObject","reflectToAttribute","hui_map_card_get","ar","Math","floor","_resizeObserver","window","_map","setup_leaflet_map","_drawEntities","_fitMap","unobserve","removeEventListener","invalidateSize","_mapItems","LatLng","core","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","marker","mapItems","_stateObj$attributes","passive","icon","radius","entity_picture","gpsAccuracy","gps_accuracy","markerIcon","iconHTML","compute_state_domain","outerHTML","divIcon","html","iconSize","interactive","circle","color","part","join","hui_markdown_card_HuiMarkdownCard","hui_markdown_card_createClass","HuiMarkdownCard","content","hui_markdown_card_templateObject","noTitle","LegacyWrapperCard","_tag","toUpperCase","_domain","HTMLElement","_ensureElement","createErrorCardConfig","HuiMediaControlCard","instance","Constructor","TypeError","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","hui_legacy_wrapper_card","hui_picture_card_HuiPictureCard","navigate_mixin","hui_picture_card_createClass","HuiPictureCard","image","navigation_path","navigate","_config$service$split","_config$service$split2","_slicedToArray","service_data","hui_picture_card_templateObject","element_click_mixin","mixin","_NavigateMixin","_class","element_click_mixin_createClass","tapAction","element_click_mixin_slicedToArray","stateName","tooltip","hui_icon_element_createClass","defineProperties","props","i","descriptor","defineProperty","protoProps","staticProps","hui_icon_element_templateObject","freeze","raw","hui_icon_element_HuiIconElement","HuiIconElement","handleClick","hui_image_HuiImage","hui_image_createClass","HuiImage","hui_image_get","cameraImage","_updateCameraImageSrc","stateImage","_imageSrc","brokenImage","setProperty","_lastImageHeight","newState","_currentState","_updateStateImage","_updateStateFilter","stateImg","_imageFallback","stateFilter","isOff","fn","regeneratorRuntime","mark","_callee","_ref2","contentType","wrap","_context","prev","callWS","content_type","_onImageLoad","_onImageError","_ref","gen","Promise","resolve","reject","arg","hui_image_templateObject","hui_image_element_HuiImageElement","hui_image_element_createClass","HuiImageElement","toggle","hui_image_element_templateObject","hui_service_button_element_HuiServiceButtonElement","hui_service_button_element_createClass","HuiServiceButtonElement","hui_service_button_element_slicedToArray","_service","hui_service_button_element_templateObject","hui_state_badge_element_HuiStateBadgeElement","hui_state_badge_element_createClass","HuiStateBadgeElement","_badge","hui_state_icon_element_HuiStateIconElement","hui_state_icon_element_createClass","HuiStateIconElement","hui_state_icon_element_templateObject","hui_state_label_element_HuiStateLabelElement","hui_state_label_element_createClass","HuiStateLabelElement","hui_state_label_element_templateObject","ELEMENT_TYPES","Set","create_hui_element_createElement","create_hui_element_createErrorElement","hui_picture_elements_card_HuiPictureElementsCard","HuiPictureElementsCard","hui_picture_elements_card_createClass","hui_picture_elements_card_templateObject","img","src","create_hui_element_typeof","has","prop","_hassChanged","hui_picture_entity_card_HuiPictureEntityCard","hui_picture_entity_card_createClass","HuiPictureEntityCard","_entityDomain","state_image","camera_image","_oldState","stateLabel","canInteract","_computeStateLabel","innerText","show_info","open","hui_picture_entity_card_templateObject","DOMAINS_TOGGLE","STATES_OFF","hui_picture_glance_card_HuiPictureGlanceCard","hui_picture_glance_card_createClass","HuiPictureGlanceCard","dialog","force_dialog","_entitiesDialog","_entitiesToggle","collection","state_icon","hui_picture_glance_card_templateObject","HuiPlantStatusCard","hui_vertical_stack_card_HuiVerticalStackCard","HuiVerticalStackCard","hui_vertical_stack_card_createClass","hui_vertical_stack_card_templateObject","totalSize","HuiWeatherForecastCard","CARD_TYPES","create_card_element_CUSTOM_TYPE_PREFIX","create_card_element_createElement","create_card_element_createErrorElement","create_card_element_typeof","hui_unused_entities_HuiUnusedEntities","hui_unused_entities_createClass","HuiUnusedEntities","usedEntities","addEntityId","views","view","addEntities","computeUsedEntities","excluded_entities","sort","secondary_info","hui_unused_entities_templateObject","hui_view_HUIView","HUIView","_cards","_badges","hui_view_createClass","hui_view_templateObject","columns","badges","cardConfig","columnEntityCount","cardSize","minIndex","val","column","columnEl","apply_themes_on_element","themes","theme","badge","JS_CACHE","hui_root_HUIRoot","HUIRoot","_debouncedConfigChanged","_selectView","_curView","hui_root_createClass","hui_root_templateObject","narrow","showMenu","route","routeData","path","prefix","id","parseInt","selected","scroller","animationId","startTime","currentScrollTop","deltaScrollTop","detail","layout","header","scrollTarget","random","Date","now","scrollTop","_currentAnimationId","updateFrame","t","elapsedTime","requestAnimationFrame","viewIndex","background","viewConfig","panel","_loadResources","resources","resource","url","load_resource","__webpack_require__","importHref","warn","ha_panel_lovelace_Lovelace","ha_panel_lovelace_createClass","Lovelace","_fetchConfig","_updateColumns","mqls","width","mql","matchMedia","addListener","matchColumns","reduce","cols","matches","_columns","conf","_state","t0","catch","_errorMsg","ha_panel_lovelace_templateObject","_load","attr","onload","onerror","async","rel","d","__webpack_exports__","loadModule","loadJS"],"mappings":"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","file":"408ca3ca049f38d75e4b.chunk.js","sourcesContent":["import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","import Leaflet from 'leaflet';\n\n// Sets up a Leaflet map on the provided DOM element\nexport default function setupLeafletMap(mapElement) {\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement('link');\n  style.setAttribute('href', '/static/images/leaflet/leaflet.css');\n  style.setAttribute('rel', 'stylesheet');\n  mapElement.parentNode.appendChild(style);\n  map.setView([51.505, -0.09], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${Leaflet.Browser.retina ? '@2x.png' : '.png'}`,\n    {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: 'abcd',\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return map;\n}\n","import '@polymer/iron-image/iron-image.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-positioning\"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class=\"marker\">\n      <template is=\"dom-if\" if=\"[[entityName]]\">[[entityName]]</template>\n      <template is=\"dom-if\" if=\"[[entityPicture]]\">\n        <iron-image sizing=\"cover\" class=\"fit\" src=\"[[entityPicture]]\"></iron-image>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: '',\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire('hass-more-info', { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define('ha-entity-marker', HaEntityMarker);\n","const EXCLUDED_DOMAINS = [\n  'group',\n  'zone'\n];\n\nfunction computeUsedEntities(config) {\n  const entities = new Set();\n\n  function addEntityId(entity) {\n    entities.add(typeof entity === 'string' ? entity : entity.entity);\n  }\n\n  function addEntities(obj) {\n    if (obj.entity) addEntityId(obj.entity);\n    if (obj.entities) obj.entities.forEach(entity => addEntityId(entity));\n    if (obj.card) addEntities(obj.card);\n    if (obj.cards) obj.cards.forEach(card => addEntities(card));\n  }\n\n  config.views.forEach(view => addEntities(view));\n  return entities;\n}\n\nexport default function computeUnusedEntities(hass, config) {\n  const usedEntities = computeUsedEntities(config);\n  return Object.keys(hass.states).filter(entity => !usedEntities.has(entity) &&\n    !(config.excluded_entities && config.excluded_entities.includes(entity)) &&\n    !EXCLUDED_DOMAINS.includes(entity.split('.', 1)[0])).sort();\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport canToggleState from '../../../common/entity/can_toggle_state.js';\nimport turnOnOffEntities from '../common/entity/turn-on-off-entities.js';\nimport { STATES_OFF } from '../../../common/const.js';\n\nconst EXCLUDED_DOMAINS = ['cover', 'lock'];\n\nclass HuiEntitiesToggle extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_toggleEntities.length]]\">\n      <paper-toggle-button checked=\"[[_computeIsChecked(hass, _toggleEntities)]]\" on-change=\"_callService\"></paper-toggle-button>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      entities: Array,\n      _toggleEntities: {\n        type: Array,\n        computed: '_computeToggleEntities(hass, entities)'\n      }\n    };\n  }\n\n  _computeToggleEntities(hass, entityIds) {\n    return entityIds.filter(entityId => (entityId in hass.states ?\n      !EXCLUDED_DOMAINS.includes(entityId.split('.', 1)[0]) && canToggleState(hass, hass.states[entityId]) : false));\n  }\n\n  _computeIsChecked(hass, entityIds) {\n    return entityIds.some(entityId => !STATES_OFF.includes(hass.states[entityId].state));\n  }\n\n  _callService(ev) {\n    const turnOn = ev.target.checked;\n    turnOnOffEntities(this.hass, this._toggleEntities, turnOn);\n  }\n}\n\ncustomElements.define('hui-entities-toggle', HuiEntitiesToggle);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntities(hass, entityIds, turnOn = true) {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if ((STATES_OFF.includes(hass.states[entityId].state)) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = ['cover', 'lock'].includes(stateDomain) ?\n        stateDomain : 'homeassistant';\n\n      if (!(serviceDomain in domainsToCall)) domainsToCall[serviceDomain] = [];\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case 'lock':\n        service = turnOn ? 'unlock' : 'lock';\n        break;\n      case 'cover':\n        service = turnOn ? 'open_cover' : 'close_cover';\n        break;\n      default:\n        service = turnOn ? 'turn_on' : 'turn_off';\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-relative-time.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiGenericEntityRow extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n        }\n        .flex {\n          margin-left: 16px;\n          flex: 1;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n        .secondary,\n        ha-relative-time {\n          display: block;\n          color: var(--secondary-text-color);\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n      </style>\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        <state-badge state-obj=\"[[_stateObj]]\"></state-badge>\n        <div class=\"flex\">\n          <div class=\"info\">\n            [[_computeName(config.name, _stateObj)]]\n            <template is=\"dom-if\" if=\"[[config.secondary_info]]\">\n              <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'entity-id')]]\">\n                <div class=\"secondary\">\n                  [[_stateObj.entity_id]]\n                </div>\n              </template>\n              <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'last-changed')]]\">\n                <ha-relative-time\n                  hass=\"[[hass]]\"\n                  datetime=\"[[_stateObj.last_changed]]\"\n                ></ha-relative-time>\n              </template>\n            </template>\n          </div>\n          <slot></slot>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, config.entity)'\n      }\n    };\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n}\ncustomElements.define('hui-generic-entity-row', HuiGenericEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/ha-cover-controls.js';\nimport '../../../components/ha-cover-tilt-controls.js';\nimport CoverEntity from '../../../util/cover-model.js';\n\nclass HuiCoverEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[!_entityObj.isTiltOnly]]\">\n          <ha-cover-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-controls>\n        </template>\n        <template is=\"dom-if\" if=\"[[_entityObj.isTiltOnly]]\">\n          <ha-cover-tilt-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-tilt-controls>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _entityObj: {\n        type: Object,\n        computed: '_computeEntityObj(hass, _stateObj)'\n      },\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeEntityObj(hass, stateObj) {\n    return stateObj ? new CoverEntity(hass, stateObj) : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-cover-entity-row', HuiCoverEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-slider/paper-slider.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputNumberEntityRow extends mixinBehaviors([IronResizableBehavior], PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          align-items: center;\n        }\n        .state {\n          min-width: 45px;\n          text-align: center;\n        }\n        paper-input {\n          text-align: right;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n        id=\"input_number_card\"\n      >\n        <div>\n          <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'slider')]]\">\n            <div class=\"flex\">\n              <paper-slider\n                min=\"[[_min]]\"\n                max=\"[[_max]]\"\n                value=\"{{_value}}\"\n                step=\"[[_step]]\"\n                pin\n                on-change=\"_selectedValueChanged\"\n                ignore-bar-touch\n              ></paper-slider>\n              <div class=\"state\">[[_value]] [[_stateObj.attributes.unit_of_measurement]]</div>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'box')]]\">\n            <paper-input\n              no-label-float\n              auto-validate\n              pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n              step=\"[[_step]]\"\n              min=\"[[_min]]\"\n              max=\"[[_max]]\"\n              value=\"{{_value}}\"\n              type=\"number\"\n              on-change=\"_selectedValueChanged\"\n            ></paper-input>\n          </template>\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _min: {\n        type: Number,\n        value: 0\n      },\n      _max: {\n        type: Number,\n        value: 100\n      },\n      _step: Number,\n      _value: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (typeof ResizeObserver === 'function') {\n      const ro = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this._hiddenState();\n        });\n      });\n      ro.observe(this.$.input_number_card);\n    } else {\n      this.addEventListener('iron-resize', this._hiddenState);\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _hiddenState() {\n    if (this._stateObj.attributes.mode !== 'slider') return;\n    const sliderwidth = this.shadowRoot.querySelector('paper-slider').offsetWidth;\n    const stateElement = this.shadowRoot.querySelector('.state');\n    if (sliderwidth < 100) {\n      stateElement.style.display = 'none';\n    } else if (sliderwidth >= 145) {\n      stateElement.style.display = 'inline';\n    }\n  }\n\n  _stateObjChanged(stateObj, oldStateObj) {\n    this.setProperties({\n      _min: Number(stateObj.attributes.min),\n      _max: Number(stateObj.attributes.max),\n      _step: Number(stateObj.attributes.step),\n      _value: Number(stateObj.state)\n    });\n    if (oldStateObj && stateObj.attributes.mode === 'slider' && oldStateObj.attributes.mode !== 'slider') {\n      this._hiddenState();\n    }\n  }\n\n  _selectedValueChanged() {\n    if (this._value === Number(this._stateObj.state)) return;\n\n    this.hass.callService('input_number', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-number-entity-row', HuiInputNumberEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiInputSelectEntityRow extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        paper-dropdown-menu {\n          margin-left: 16px;\n          flex: 1;\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n      </style>\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        <state-badge state-obj=\"[[_stateObj]]\"></state-badge>\n        <paper-dropdown-menu on-click=\"_stopPropagation\" selected-item-label=\"{{_selected}}\" label=\"[[_computeName(_config.name, _stateObj)]]\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"[[_computeSelected(_stateObj)]]\">\n            <template is=\"dom-repeat\" items=\"[[_stateObj.attributes.options]]\">\n              <paper-item>[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[_config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _selected: {\n        type: String,\n        observer: '_selectedChanged',\n      },\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n\n  _computeSelected(stateObj) {\n    return stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  _selectedChanged(option) {\n    // Selected Option will transition to '' before transitioning to new value\n    if (option === '' || option === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_select', 'select_option', {\n      option: option,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n\n  _stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\ncustomElements.define('hui-input-select-entity-row', HuiInputSelectEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputTextEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-input\n          no-label-float\n          minlength=\"[[_stateObj.attributes.min]]\"\n          maxlength=\"[[_stateObj.attributes.max]]\"\n          value=\"{{_value}}\"\n          auto-validate=\"[[_stateObj.attributes.pattern]]\"\n          pattern=\"[[_stateObj.attributes.pattern]]\"\n          type=\"[[_stateObj.attributes.mode]]\"\n          on-change=\"_selectedValueChanged\"\n          placeholder=\"(empty value)\"\n        ></paper-input>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged',\n      },\n      _value: String\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _stateObjChanged(stateObj) {\n    this._value = stateObj.state;\n  }\n\n  _selectedValueChanged() {\n    if (this._value === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_text', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-text-entity-row', HuiInputTextEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiLockEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin: 0;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-button on-click=\"_callService\">\n          [[_computeButtonTitle(_stateObj.state)]]\n        </paper-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeButtonTitle(state) {\n    return state === 'locked' ?\n      this.localize('ui.card.lock.unlock') : this.localize('ui.card.lock.lock');\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this._stateObj;\n    this.hass.callService('lock', stateObj.state === 'locked' ?\n      'unlock' : 'lock', { entity_id: stateObj.entity_id });\n  }\n}\ncustomElements.define('hui-lock-entity-row', HuiLockEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiSceneEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin: 0;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <paper-button on-click=\"_callService\">\n          [[localize('ui.card.scene.activate')]]\n        </paper-button>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('scene', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-scene-entity-row', HuiSceneEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiScriptEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin: 0;\n        }\n      </style>\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <template is=\"dom-if\" if=\"[[_stateObj.attributes.can_cancel]]\">\n          <ha-entity-toggle state-obj=\"[[_stateObj]]\" hass=\"[[hass]]\"></ha-entity-toggle>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_stateObj.attributes.can_cancel]]\">\n          <paper-button on-click=\"_callService\">[[localize('ui.card.script.execute')]]</paper-button>\n        </template>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('script', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-script-entity-row', HuiScriptEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiTextEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <div>\n          [[_computeState(_stateObj)]]\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeState(stateObj) {\n    return computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-text-entity-row', HuiTextEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport timerTimeRemaining from '../../../common/entity/timer_time_remaining.js';\nimport secondsToDuration from '../../../common/datetime/seconds_to_duration.js';\n\nclass HuiTimerEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <div>\n          [[_computeDisplay(_stateObj, _timeRemaining)]]\n        </div>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _timeRemaining: Number\n    };\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  _stateObjChanged(stateObj) {\n    if (stateObj) {\n      this._startInterval(stateObj);\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  _clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = null;\n    }\n  }\n\n  _startInterval(stateObj) {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === 'active') {\n      this._updateRemaining = setInterval(() => this._calculateRemaining(this._stateObj), 1000);\n    }\n  }\n\n  _calculateRemaining(stateObj) {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  _computeDisplay(stateObj, time) {\n    if (stateObj.state === 'idle' || time === 0) return stateObj.state;\n\n    let display = secondsToDuration(time);\n\n    if (stateObj.state === 'paused') {\n      display += ' (paused)';\n    }\n\n    return display;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-timer-entity-row', HuiTimerEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nclass HuiToggleEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        <ha-entity-toggle hass=\"[[hass]]\" state-obj=\"[[_computeStateObj(hass.states, _config.entity)]]\"></ha-entity-toggle>\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-toggle-entity-row', HuiToggleEntityRow);\n","export default function createErrorConfig(error, origConfig) {\n  return {\n    type: 'error',\n    error,\n    origConfig,\n  };\n}\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../entity-rows/hui-cover-entity-row.js';\nimport '../entity-rows/hui-input-number-entity-row.js';\nimport '../entity-rows/hui-input-select-entity-row.js';\nimport '../entity-rows/hui-input-text-entity-row.js';\nimport '../entity-rows/hui-lock-entity-row.js';\nimport '../entity-rows/hui-scene-entity-row.js';\nimport '../entity-rows/hui-script-entity-row.js';\nimport '../entity-rows/hui-text-entity-row.js';\nimport '../entity-rows/hui-timer-entity-row.js';\nimport '../entity-rows/hui-toggle-entity-row.js';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  cover: 'cover',\n  fan: 'toggle',\n  group: 'toggle',\n  input_boolean: 'toggle',\n  input_number: 'input-number',\n  input_select: 'input-select',\n  input_text: 'input-text',\n  light: 'toggle',\n  lock: 'lock',\n  scene: 'scene',\n  script: 'script',\n  timer: 'timer',\n  switch: 'toggle'\n};\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    if ('setConfig' in element) element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createEntityRowElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || !config.entity) {\n    return _createErrorElement('Invalid config given.', config);\n  }\n\n  const type = config.type || 'default';\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  const domain = config.entity.split('.', 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || 'text'}-entity-row`;\n\n  return _createElement(tag, config);\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from '../../../common/entity/valid_entity_id.js';\n\nexport default function processConfigEntities(entities) {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error('Entities need to be an array');\n  }\n\n  return entities.map((entityConf, index) => {\n    if (typeof entityConf === 'string') {\n      entityConf = { entity: entityConf };\n    } else if (typeof entityConf === 'object' && !Array.isArray(entityConf)) {\n      if (!entityConf.entity) {\n        throw new Error(`Entity object at position ${index} is missing entity field.`);\n      }\n    } else {\n      throw new Error(`Invalid entity specified at position ${index}.`);\n    }\n\n    if (!isValidEntityId(entityConf.entity)) {\n      throw new Error(`Invalid entity ID at position ${index}: ${entityConf.entity}`);\n    }\n\n    return entityConf;\n  });\n}\n","export default function validEntityId(entityId) {\n  return /^(\\w+)\\.(\\w+)$/.test(entityId);\n}\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-entities-toggle.js';\n\nimport createEntityRowElement from '../common/create-entity-row-element.js';\nimport processConfigEntities from '../common/process-config-entities.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport { DOMAINS_HIDE_MORE_INFO } from '../../../common/const.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiEntitiesCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        padding: 16px;\n      }\n      #states {\n        margin: -4px 0;\n      }\n      #states > div {\n        margin: 4px 0;\n      }\n      .header {\n        @apply --paper-font-headline;\n        /* overwriting line-height +8 because entity-toggle can be 40px height,\n           compensating this with reduced padding */\n        line-height: 40px;\n        color: var(--primary-text-color);\n        padding: 4px 0 12px;\n        display: flex;\n        justify-content: space-between;\n      }\n      .header .name {\n        @apply --paper-font-common-nowrap;\n      }\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    </style>\n\n    <ha-card>\n      <template is='dom-if' if='[[_showHeader(_config)]]'>\n        <div class='header'>\n          <div class=\"name\">[[_config.title]]</div>\n          <template is=\"dom-if\" if=\"[[_showHeaderToggle(_config.show_header_toggle)]]\">\n            <hui-entities-toggle hass=\"[[hass]]\" entities=\"[[_config.entities]]\"></hui-entities-toggle>\n          </template>\n        </div>\n      </template>\n      <div id=\"states\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    // +1 for the header\n    return 1 + (this._config ? this._config.entities.length : 0);\n  }\n\n  _showHeaderToggle(show) {\n    // If show is undefined, we treat it as true\n    return show !== false;\n  }\n\n  _showHeader(config) {\n    // Show header if either title or toggle configured to show in it\n    return config.title || config.show_header_toggle;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const root = this.$.states;\n    const entities = this._configEntities;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    this._elements = [];\n\n    for (const entity of entities) {\n      const entityId = entity.entity;\n      const element = createEntityRowElement(entity);\n      if (entityId && !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityId))) {\n        element.classList.add('state-card-dialog');\n        element.addEventListener('click', () => this.fire('hass-more-info', { entityId }));\n      }\n      element.hass = this.hass;\n      this._elements.push(element);\n      const container = document.createElement('div');\n      container.appendChild(element);\n      root.appendChild(container);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-entities-card', HuiEntitiesCard);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createCardElement from '../common/create-card-element.js';\nimport processConfigEntities from '../common/process-config-entities.js';\n\nfunction getEntities(hass, filterState, entities) {\n  return entities.filter((entityConf) => {\n    const stateObj = hass.states[entityConf.entity];\n    return stateObj && filterState.includes(stateObj.state);\n  });\n}\n\nclass HuiEntitiesCard extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  getCardSize() {\n    return this.lastChild ? this.lastChild.getCardSize() : 1;\n  }\n\n  setConfig(config) {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error('Incorrect filter config.');\n    }\n\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = null;\n    }\n\n    const card = 'card' in config ? Object.assign({}, config.card) : {};\n    if (!card.type) card.type = 'entities';\n    card.entities = [];\n\n    const element = createCardElement(card);\n    element._filterRawConfig = card;\n    this._updateCardConfig(element);\n\n    this._element = element;\n  }\n\n  _hassChanged() {\n    this._updateCardConfig(this._element);\n  }\n\n  _updateCardConfig(element) {\n    if (!element || element.tagName === 'HUI-ERROR-CARD' || !this.hass) return;\n    const entitiesList = getEntities(this.hass, this._config.state_filter, this._configEntities);\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = 'none';\n      return;\n    }\n\n    this.style.display = 'block';\n    element.setConfig(Object.assign(\n      {},\n      element._filterRawConfig,\n      { entities: entitiesList }\n    ));\n    element.isPanel = this.isPanel;\n    element.hass = this.hass;\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) this.appendChild(element);\n  }\n}\ncustomElements.define('hui-entity-filter-card', HuiEntitiesCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiErrorCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          background-color: red;\n          color: white;\n          padding: 8px;\n        }\n      </style>\n      [[_config.error]]\n      <pre>[[_toStr(_config.origConfig)]]</pre>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  _toStr(obj) {\n    return JSON.stringify(obj, null, 2);\n  }\n}\n\ncustomElements.define('hui-error-card', HuiErrorCard);\n","import computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntity(hass, entityId, turnOn = true) {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === 'group' ? 'homeassistant' : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case 'lock':\n      service = turnOn ? 'unlock' : 'lock';\n      break;\n    case 'cover':\n      service = turnOn ? 'open_cover' : 'close_cover';\n      break;\n    default:\n      service = turnOn ? 'turn_on' : 'turn_off';\n  }\n\n  hass.callService(serviceDomain, service, { entity_id: entityId });\n}\n","import { STATES_OFF } from '../../../../common/const.js';\nimport turnOnOffEntity from './turn-on-off-entity.js';\n\nexport default function toggleEntity(hass, entityId) {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  turnOnOffEntity(hass, entityId, turnOn);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport turnOnOffEntity from '../common/entity/turn-on-off-entity.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-card.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiGlanceCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n        .entities {\n          display: flex;\n          margin-bottom: -12px;\n          flex-wrap: wrap;\n        }\n        .entity {\n          box-sizing: border-box;\n          padding: 0 4px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          margin-bottom: 12px;\n          width: var(--glance-column-width, 20%);\n        }\n        .entity div {\n          width: 100%;\n          text-align: center;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"entities\">\n          <template is=\"dom-repeat\" items=\"[[_configEntities]]\">\n            <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n              <div class=\"entity\" on-click=\"_handleClick\">\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_name)]]\">\n                  <div>[[_computeName(item, hass.states)]]</div>\n                </template>\n                <state-badge state-obj=\"[[_computeStateObj(item, hass.states)]]\"></state-badge>\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_state)]]\">\n                  <div>[[_computeState(item, hass.states)]]</div>\n                </template>\n              </div>\n            </template>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _configEntities: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this.updateStyles({ '--glance-column-width': (config && config.column_width) || '20%' });\n    this._configEntities = processConfigEntities(config.entities);\n  }\n\n  _showEntity(item, states) {\n    return item.entity in states;\n  }\n\n  _showInfo(info) {\n    return info !== false;\n  }\n\n  _computeName(item, states) {\n    return item.name || computeStateName(states[item.entity]);\n  }\n\n  _computeStateObj(item, states) {\n    return states[item.entity];\n  }\n\n  _computeState(item, states) {\n    return computeStateDisplay(this.localize, states[item.entity]);\n  }\n\n  _handleClick(ev) {\n    const entityId = ev.model.item.entity;\n    switch (ev.model.item.tap_action) {\n      case 'toggle':\n        toggleEntity(this.hass, entityId);\n        break;\n      case 'turn-on':\n        turnOnOffEntity(this.hass, entityId, true);\n        break;\n      default:\n        this.fire('hass-more-info', { entityId });\n    }\n  }\n}\n\ncustomElements.define('hui-glance-card', HuiGlanceCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/state-history-charts.js';\nimport '../../../data/ha-state-history-data.js';\n\nimport processConfigEntities from '../common/process-config-entities.js';\n\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$='[[_config.title]]'>\n        <ha-state-history-data\n          hass=\"[[hass]]\"\n          filter-type=\"recent-entity\"\n          entity-id=\"[[_entities]]\"\n          data=\"{{stateHistory}}\"\n          is-loading=\"{{stateHistoryLoading}}\"\n          cache-config=\"[[_computeCacheConfig(_config)]]\"\n        ></ha-state-history-data>\n        <state-history-charts\n          hass=\"[[hass]]\"\n          history-data=\"[[stateHistory]]\"\n          is-loading-data=\"[[stateHistoryLoading]]\"\n          names=\"[[_names]]\"\n          up-to-now\n          no-single\n        ></state-history-charts>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      stateHistory: {\n        type: Object,\n      },\n      _names: Array,\n      _entities: Object,\n      stateHistoryLoading: Boolean,\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n    this._entities = _entities;\n    this._names = _names;\n  }\n\n  _computeCacheConfig(config) {\n    return {\n      cacheKey: config.entities,\n      hoursToShow: config.hours_to_show || 24,\n      refresh: config.refresh_interval || 0\n    };\n  }\n}\n\ncustomElements.define('hui-history-graph-card', HuiHistoryGraphCard);\n","export default function computeCardSize(element) {\n  return typeof element.getCardSize === 'function' ? element.getCardSize() : 1;\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiHorizontalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let size = 1;\n    this._elements.forEach((element) => {\n      const elSize = computeCardSize(element);\n      if (elSize > size) size = elSize;\n    });\n    return size;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect.');\n    }\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-horizontal-stack-card', HuiHorizontalStackCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiIframeCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        #root {\n          width: 100%;\n          position: relative;\n        }\n        iframe {\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <iframe src=\"[[_config.url]]\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this.$.root.style.paddingTop = config.aspect_ratio || '50%';\n  }\n\n  getCardSize() {\n    return 1 + (this.offsetHeight / 50);\n  }\n}\ncustomElements.define('hui-iframe-card', HuiIframeCard);\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport default function debounce(func, wait, immediate) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport Leaflet from 'leaflet';\n\nimport '../../map/ha-entity-marker.js';\n\nimport setupLeafletMap from '../../../common/dom/setup-leaflet-map.js';\nimport processConfigEntities from '../common/process-config-entities.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport debounce from '../../../common/util/debounce.js';\n\nLeaflet.Icon.Default.imagePath = '/static/images/leaflet';\n\nclass HuiMapCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host([is-panel]) ha-card {\n          left: 0;\n          top: 0;\n          width: 100%;\n          /**\n           * In panel mode we want a full height map. Since parent #view\n           * only sets min-height, we need absolute positioning here\n           */\n          height: 100%;\n          position: absolute;\n        }\n\n        ha-card {\n          overflow: hidden;\n        }\n\n        #map {\n          z-index: 0;\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        paper-icon-button {\n          position: absolute;\n          top: 75px;\n          left: 7px;\n        }\n\n        #root {\n          position: relative;\n        }\n\n        :host([is-panel]) #root {\n          height: 100%;\n        }\n      </style>\n\n      <ha-card id=\"card\" header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            on-click=\"_fitMap\"\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_drawEntities'\n      },\n      _config: Object,\n      isPanel: {\n        type: Boolean,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedResizeListener = debounce(this._resetMap.bind(this), 100);\n  }\n\n  ready() {\n    super.ready();\n\n    if (!this._config || this.isPanel) {\n      return;\n    }\n\n    this.$.root.style.paddingTop = this._config.aspect_ratio || '100%';\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._configEntities = processConfigEntities(config.entities);\n    this._config = config;\n  }\n\n  getCardSize() {\n    let ar = this._config.aspect_ratio || '100%';\n    ar = ar.substr(0, ar.length - 1);\n    return 1 + Math.floor(ar / 25) || 3;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n    if (typeof ResizeObserver === 'function') {\n      this._resizeObserver = new ResizeObserver(() => this._debouncedResizeListener());\n      this._resizeObserver.observe(this.$.map);\n    } else {\n      window.addEventListener('resize', this._debouncedResizeListener);\n    }\n\n    this._map = setupLeafletMap(this.$.map);\n    this._drawEntities(this.hass);\n\n    setTimeout(() => {\n      this._resetMap();\n      this._fitMap();\n    }, 1);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._map) {\n      this._map.remove();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.$.map);\n    } else {\n      window.removeEventListener('resize', this._debouncedResizeListener);\n    }\n  }\n\n  _resetMap() {\n    if (!this._map) {\n      return;\n    }\n    this._map.invalidateSize();\n  }\n\n  _fitMap() {\n    if (this._mapItems.length === 0) {\n      this._map.setView(\n        new Leaflet.LatLng(this.hass.config.core.latitude, this.hass.config.core.longitude),\n        14\n      );\n    } else {\n      const bounds = new Leaflet.latLngBounds(this._mapItems.map(item => item.getLatLng()));\n      this._map.fitBounds(bounds.pad(0.5));\n    }\n  }\n\n  _drawEntities(hass) {\n    const map = this._map;\n    if (!map) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach(marker => marker.remove());\n    }\n    const mapItems = this._mapItems = [];\n\n    this._configEntities.forEach((entity) => {\n      const entityId = entity.entity;\n      if (!(entityId in hass.states)) {\n        return;\n      }\n      const stateObj = hass.states[entityId];\n      const title = computeStateName(stateObj);\n      const { latitude, longitude, passive, icon, radius,\n        entity_picture: entityPicture, gps_accuracy: gpsAccuracy } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        return;\n      }\n\n      let markerIcon;\n      let iconHTML;\n      let el;\n\n      if (computeStateDomain(stateObj) === 'zone') {\n        // DRAW ZONE\n        if (passive) return;\n\n        // create icon\n        if (icon) {\n          el = document.createElement('ha-icon');\n          el.setAttribute('icon', icon);\n          iconHTML = el.outerHTML;\n        } else {\n          iconHTML = title;\n        }\n\n        markerIcon = Leaflet.divIcon({\n          html: iconHTML,\n          iconSize: [24, 24],\n          className: '',\n        });\n\n        // create market with the icon\n        mapItems.push(Leaflet.marker([latitude, longitude], {\n          icon: markerIcon,\n          interactive: false,\n          title: title,\n        }).addTo(map));\n\n        // create circle around it\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#FF9800',\n          radius: radius,\n        }).addTo(map));\n\n        return;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title.split(' ').map(part => part[0]).join('').substr(0, 3);\n\n      el = document.createElement('ha-entity-marker');\n      el.setAttribute('entity-id', entityId);\n      el.setAttribute('entity-name', entityName);\n      el.setAttribute('entity-picture', entityPicture || '');\n\n      /* Leaflet clones this element before adding it to the map. This messes up\n         our Polymer object and we can't pass data through. Thus we hack like this. */\n      markerIcon = Leaflet.divIcon({\n        html: el.outerHTML,\n        iconSize: [48, 48],\n        className: '',\n      });\n\n      // create market with the icon\n      mapItems.push(Leaflet.marker([latitude, longitude], {\n        icon: markerIcon,\n        title: computeStateName(stateObj),\n      }).addTo(map));\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#0288D1',\n          radius: gpsAccuracy,\n        }).addTo(map));\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-map-card', HuiMapCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-markdown.js';\n\nclass HuiMarkdownCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n        }\n        ha-markdown {\n          display: block;\n          padding: 0 16px 16px;\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n        :host([no-title]) ha-markdown {\n          padding-top: 16px;\n        }\n        ha-markdown > *:first-child {\n          margin-top: 0;\n        }\n        ha-markdown > *:last-child {\n          margin-bottom: 0;\n        }\n        ha-markdown a {\n          color: var(--primary-color);\n        }\n        ha-markdown img {\n          max-width: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <ha-markdown content='[[_config.content]]'></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n      noTitle: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_computeNoTitle(_config.title)',\n      },\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return this._config.content.split('\\n').length;\n  }\n\n  _computeNoTitle(title) {\n    return !title;\n  }\n}\n\ncustomElements.define('hui-markdown-card', HuiMarkdownCard);\n","import createErrorCardConfig from '../common/create-error-card-config.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\n\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error('No entity specified');\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(`Specified entity needs to be of domain ${this._domain}.`);\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n    } else {\n      this._ensureElement('HUI-ERROR-CARD');\n      this.lastChild.setConfig(createErrorCardConfig(`No state available for ${entityId}`, this._config));\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import '../../../cards/ha-media_player-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-media_player-card', 'media_player');\n  }\n}\n\ncustomElements.define('hui-media-control-card', HuiMediaControlCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureCard extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card[clickable] {\n          cursor: pointer;\n        }\n        img {\n          display: block;\n          width: 100%;\n        }\n      </style>\n\n      <ha-card on-click=\"_cardClicked\" clickable$='[[_computeClickable(_config)]]'>\n        <img src='[[_config.image]]' />\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n  }\n\n  _computeClickable(config) {\n    return config.navigation_path || config.service;\n  }\n\n  _cardClicked() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n    }\n    if (this._config.service) {\n      const [domain, service] = this._config.service.split('.', 2);\n      this.hass.callService(domain, service, this._config.service_data);\n    }\n  }\n}\n\ncustomElements.define('hui-picture-card', HuiPictureCard);\n","import { dedupingMixin } from '@polymer/polymer/lib/utils/mixin.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin NavigateMixin\n */\nexport default dedupingMixin(superClass =>\n  class extends NavigateMixin(EventsMixin(superClass)) {\n    handleClick(hass, config) {\n      const tapAction = config.tap_action || 'more-info';\n      if (tapAction === 'none') return;\n\n      switch (tapAction) {\n        case 'more-info':\n          this.fire('hass-more-info', { entityId: config.entity });\n          break;\n        case 'navigate':\n          this.navigate(config.navigation_path);\n          break;\n        case 'toggle':\n          toggleEntity(hass, config.entity);\n          break;\n        case 'call-service': {\n          const [domain, service] = config.service.split('.', 2);\n          const serviceData = Object.assign(\n            {}, { entity_id: config.entity },\n            config.service_data\n          );\n          hass.callService(domain, service, serviceData);\n        }\n      }\n    }\n\n    computeTooltip(hass, config) {\n      if (config.title) return config.title;\n\n      const stateName = (config.entity in hass.states) ?\n        computeStateName(hass.states[config.entity]) : config.entity;\n\n      let tooltip;\n      switch (config.tap_action) {\n        case 'navigate':\n          tooltip = `Navigate to ${config.navigation_path}`;\n          break;\n        case 'toggle':\n          tooltip = `Toggle ${stateName}`;\n          break;\n        case 'call-service':\n          tooltip = `Call service ${config.service}`;\n          break;\n        default:\n          tooltip = `Show more-info: ${stateName}`;\n      }\n\n      return tooltip;\n    }\n  });\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-icon.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <ha-icon \n        icon=\"[[_config.icon]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></ha-icon> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n}\ncustomElements.define('hui-icon-element', HuiIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { STATES_OFF } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = 'grayscale(100%)';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiImage extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        img {\n          display: block;\n          height: auto;\n          transition: filter .2s linear;\n          width: 100%;\n        }\n\n        .error {\n          text-align: center;\n        }\n\n        .hidden {\n          display: none;\n        }\n\n        #brokenImage {\n          background: grey url('/static/images/image-broken.svg') center/36px no-repeat;\n        }\n\n      </style>\n\n      <img\n        id=\"image\"\n        src=\"[[_imageSrc]]\"\n        on-error=\"_onImageError\"\n        on-load=\"_onImageLoad\" />\n      <div id=\"brokenImage\"></div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      entity: String,\n      image: String,\n      stateImage: Object,\n      cameraImage: String,\n      filter: String,\n      stateFilter: Object,\n      _imageSrc: String\n    };\n  }\n\n  static get observers() {\n    return ['_configChanged(image, stateImage, cameraImage)'];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.cameraImage) {\n      this.timer = setInterval(() => this._updateCameraImageSrc(), UPDATE_INTERVAL);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.timer);\n  }\n\n  _configChanged(image, stateImage, cameraImage) {\n    if (cameraImage) {\n      this._updateCameraImageSrc();\n    } else if (image && !stateImage) {\n      this._imageSrc = image;\n    }\n  }\n\n  _onImageError() {\n    this._imageSrc = null;\n    this.$.image.classList.add('hidden');\n    this.$.brokenImage.style.setProperty('height', `${this._lastImageHeight || '100'}px`);\n    this.$.brokenImage.classList.remove('hidden');\n  }\n\n  _onImageLoad() {\n    this.$.image.classList.remove('hidden');\n    this.$.brokenImage.classList.add('hidden');\n    this._lastImageHeight = this.$.image.offsetHeight;\n  }\n\n  _hassChanged(hass) {\n    if (this.cameraImage || !this.entity) {\n      return;\n    }\n\n    const stateObj = hass.states[this.entity];\n    const newState = !stateObj ? 'unavailable' : stateObj.state;\n\n    if (newState === this._currentState) return;\n    this._currentState = newState;\n\n    this._updateStateImage();\n    this._updateStateFilter(stateObj);\n  }\n\n  _updateStateImage() {\n    if (!this.stateImage) {\n      this._imageFallback = true;\n      return;\n    }\n    const stateImg = this.stateImage[this._currentState];\n    this._imageSrc = stateImg || this.image;\n    this._imageFallback = !stateImg;\n  }\n\n  _updateStateFilter(stateObj) {\n    let filter;\n    if (!this.stateFilter) {\n      filter = this.filter;\n    } else {\n      filter = this.stateFilter[this._currentState] || this.filter;\n    }\n\n    const isOff = !stateObj || STATES_OFF.includes(stateObj.state);\n    this.$.image.style.filter = filter || (isOff && this._imageFallback && DEFAULT_FILTER) || '';\n  }\n\n  async _updateCameraImageSrc() {\n    try {\n      const { content_type: contentType, content } = await this.hass.callWS({\n        type: 'camera_thumbnail',\n        entity_id: this.cameraImage,\n      });\n      this._imageSrc = `data:${contentType};base64, ${content}`;\n      this._onImageLoad();\n    } catch (err) {\n      this._onImageError();\n    }\n  }\n}\n\ncustomElements.define('hui-image', HuiImage);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-image.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiImageElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host(.clickable) {\n          cursor: pointer; \n        } \n        hui-image {\n          overflow-y: hidden;\n        } \n      </style>\n      <hui-image\n        hass=\"[[hass]]\"\n        entity=\"[[_config.entity]]\"\n        image=\"[[_config.image]]\"\n        state-image=\"[[_config.state_image]]\"\n        camera-image=\"[[_config.camera_image]]\"\n        filter=\"[[_config.filter]]\"\n        state-filter=\"[[_config.state_filter]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></hui-image>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw Error('Error in element configuration');\n    }\n\n    this.classList.toggle('clickable', config.tap_action !== 'none');\n    this._config = config;\n  }\n}\ncustomElements.define('hui-image-element', HuiImageElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass HuiServiceButtonElement extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-call-service-button {\n          color: var(--primary-color);\n          white-space: nowrap;\n        }\n      </style>\n      <ha-call-service-button \n        hass=\"[[hass]]\"\n        domain=\"[[_domain]]\" \n        service=\"[[_service]]\"\n        serviceData=\"[[_config.serviceData]]\"\n      >[[_config.title]]</ha-call-service-button> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _domain: String,\n      _service: String\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.service) {\n      throw Error('Error in element configuration');\n    }\n\n    const [domain, service] = config.service.split('.', 2);\n    this.setProperties({\n      _config: config,\n      _domain: domain,\n      _service: service\n    });\n  }\n}\ncustomElements.define('hui-service-button-element', HuiServiceButtonElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '../../../components/entity/ha-state-label-badge.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\nclass HuiStateBadgeElement extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateBadge(hass, _config)'\n    ];\n  }\n\n  _updateBadge(hass, config) {\n    if (!hass || !config || !(config.entity in hass.states)) return;\n\n    if (!this._badge) {\n      this._badge = document.createElement('ha-state-label-badge');\n    }\n\n    const stateObj = hass.states[config.entity];\n    this._badge.state = stateObj;\n    this._badge.setAttribute('title', computeStateName(stateObj));\n\n    if (!this.lastChild) {\n      this.appendChild(this._badge);\n    }\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this._badge = null;\n    this._config = config;\n  }\n}\ncustomElements.define('hui-state-badge-element', HuiStateBadgeElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiStateIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <state-badge \n        state-obj=\"[[_stateObj]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></state-badge> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n}\ncustomElements.define('hui-state-icon-element', HuiStateIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport '../../../components/entity/ha-state-label-badge.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiStateLabelElement extends LocalizeMixin(ElementClickMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n        .state-label {\n          padding: 8px;\n          white-space: nowrap;\n        }\n      </style>\n      <div class=\"state-label\" title$=\"[[computeTooltip(hass, _config)]]\"> \n        [[_computeStateDisplay(_stateObj)]]\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n\n  _computeStateDisplay(stateObj) {\n    return stateObj && computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-state-label-element', HuiStateLabelElement);\n","import '../elements/hui-icon-element.js';\nimport '../elements/hui-image-element.js';\nimport '../elements/hui-service-button-element.js';\nimport '../elements/hui-state-badge-element.js';\nimport '../elements/hui-state-icon-element.js';\nimport '../elements/hui-state-label-element.js';\n\nimport fireEvent from '../../../common/dom/fire_event.js';\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst ELEMENT_TYPES = new Set([\n  'icon',\n  'image',\n  'service-button',\n  'state-badge',\n  'state-icon',\n  'state-label',\n]);\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createHuiElement(config) {\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No element type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(`Unknown element type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createHuiElement from '../common/create-hui-element.js';\n\nclass HuiPictureElementsCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        overflow: hidden;\n      }\n      #root {\n        position: relative;\n        overflow: hidden;\n      }\n      #root img {\n        display: block;\n        width: 100%;\n      }\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n      hui-image-element {\n        overflow-y: hidden;\n      }\n    </style>\n\n    <ha-card header=\"[[_config.title]]\">\n      <div id=\"root\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image || !Array.isArray(config.elements)) {\n      throw new Error('Invalid card configuration');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.root;\n    this._elements = [];\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const img = document.createElement('img');\n    img.src = config.image;\n    root.appendChild(img);\n\n    config.elements.forEach((element) => {\n      const el = createHuiElement(element);\n      el.hass = this.hass;\n      this._elements.push(el);\n\n      el.classList.add('element');\n      Object.keys(element.style).forEach((prop) => {\n        el.style.setProperty(prop, element.style[prop]);\n      });\n      root.appendChild(el);\n    });\n\n    if (this.hass) {\n      this._hassChanged(this.hass);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-picture-elements-card', HuiPictureElementsCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UNAVAILABLE = 'Unavailable';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HuiPictureEntityCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          min-height: 75px;\n          overflow: hidden;\n          position: relative;\n        }\n        ha-card.canInteract {\n          cursor: pointer;\n        }\n        .info {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 16px;\n          font-size: 16px;\n          line-height: 16px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        #title {\n          font-weight: 500;\n        }\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <ha-card id='card' on-click=\"_cardClicked\">\n        <hui-image\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_getCameraImage(_config)]]\" \n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"info\" hidden$='[[_computeHideInfo(_config)]]'>\n          <div id=\"name\"></div>\n          <div id=\"state\"></div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._entityDomain = computeDomain(config.entity);\n    if (this._entityDomain !== 'camera' &&\n        (!config.image && !config.state_image && !config.camera_image)) {\n      throw new Error('No image source configured.');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    const config = this._config;\n    const entityId = config.entity;\n    const stateObj = hass.states[entityId];\n\n    // Nothing changed\n    if ((!stateObj && this._oldState === UNAVAILABLE) ||\n        (stateObj && stateObj.state === this._oldState)) {\n      return;\n    }\n\n    let name;\n    let state;\n    let stateLabel;\n    let canInteract = true;\n\n    if (stateObj) {\n      name = config.name || computeStateName(stateObj);\n      state = stateObj.state;\n      stateLabel = this._computeStateLabel(stateObj);\n    } else {\n      name = config.name || entityId;\n      state = UNAVAILABLE;\n      stateLabel = UNAVAILABLE;\n      canInteract = false;\n    }\n\n    this.$.name.innerText = name;\n    this.$.state.innerText = stateLabel;\n    this._oldState = state;\n    this.$.card.classList.toggle('canInteract', canInteract);\n  }\n\n  _computeStateLabel(stateObj) {\n    switch (this._entityDomain) {\n      case 'scene':\n        return this.localize('ui.card.scene.activate');\n      case 'script':\n        return this.localize('ui.card.script.execute');\n      case 'weblink':\n        return 'Open';\n      default:\n        return computeStateDisplay(this.localize, stateObj);\n    }\n  }\n\n  _computeHideInfo(config) {\n    // By default we will show it, so === undefined should be true.\n    return config.show_info === false;\n  }\n\n  _cardClicked() {\n    const entityId = this._config && this._config.entity;\n\n    if (!entityId || !(entityId in this.hass.states)) return;\n\n    if (this._config.tap_action !== 'toggle') {\n      this.fire('hass-more-info', { entityId });\n      return;\n    }\n\n    if (this._entityDomain === 'weblink') {\n      window.open(this.hass.states[entityId].state);\n    } else {\n      toggleEntity(this.hass, entityId);\n    }\n  }\n\n  _getCameraImage(config) {\n    return this._entityDomain === 'camera' ? config.entity : config.camera_image;\n  }\n}\n\ncustomElements.define('hui-picture-entity-card', HuiPictureEntityCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport stateIcon from '../../../common/entity/state_icon.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport computeDomain from '../../../common/entity/compute_domain';\n\nconst DOMAINS_TOGGLE = new Set([\n  'input_boolean',\n  'light',\n  'switch'\n]);\n\nconst STATES_OFF = new Set([\n  'closed',\n  'locked',\n  'not_home',\n  'off'\n]);\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureGlanceCard extends NavigateMixin(LocalizeMixin(EventsMixin(PolymerElement))) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          position: relative;\n          min-height: 48px;\n          overflow: hidden;\n        }\n        hui-image.clickable {\n          cursor: pointer;\n        }\n        .box {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 4px 8px;\n          font-size: 16px;\n          line-height: 40px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        .box .title {\n          font-weight: 500;\n          margin-left: 8px;\n        }\n        paper-icon-button {\n          color: #A9A9A9;\n        }\n        paper-icon-button.state-on {\n          color: white;\n        }\n      </style>\n\n      <ha-card>\n        <hui-image\n          class$='[[_computeImageClass(_config)]]'\n          on-click='_handleImageClick'\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_config.camera_image]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"box\">\n          <template is=\"dom-if\" if=\"[[_config.title]]\">\n            <div class=\"title\">[[_config.title]]</div>\n          </template>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesDialog, hass.states)]]\">\n              <paper-icon-button\n                on-click=\"_openDialog\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item.entity, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesToggle, hass.states)]]\">\n              <paper-icon-button\n                on-click=\"_callService\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item.entity, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></paper-icon-button>\n            </template>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _entitiesDialog: Array,\n      _entitiesToggle: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entities || !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)) {\n      throw new Error('Invalid card configuration');\n    }\n    const entities = processConfigEntities(config.entities);\n    const dialog = [];\n    const toggle = [];\n\n    entities.forEach((item) => {\n      if (config.force_dialog || !DOMAINS_TOGGLE.has(computeDomain(item.entity))) {\n        dialog.push(item);\n      } else {\n        toggle.push(item);\n      }\n    });\n    this.setProperties({\n      _config: config,\n      _entitiesDialog: dialog,\n      _entitiesToggle: toggle\n    });\n  }\n\n  _computeVisible(collection, states) {\n    return collection.filter(el => el.entity in states);\n  }\n\n  _computeIcon(entityId, states) {\n    return stateIcon(states[entityId]);\n  }\n\n  _computeButtonClass(entityId, states) {\n    return STATES_OFF.has(states[entityId].state) ? '' : 'state-on';\n  }\n\n  _computeTooltip(entityId, states) {\n    return `${computeStateName(states[entityId])}: ${computeStateDisplay(this.localize, states[entityId])}`;\n  }\n\n  _computeImageClass(config) {\n    return config.navigation_path || config.camera_image ? 'clickable' : '';\n  }\n\n  _openDialog(ev) {\n    this.fire('hass-more-info', { entityId: ev.model.item.entity });\n  }\n\n  _callService(ev) {\n    toggleEntity(this.hass, ev.model.item.entity);\n  }\n\n  _handleImageClick() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n      return;\n    }\n\n    if (this._config.camera_image) {\n      this.fire('hass-more-info', { entityId: this._config.camera_image });\n    }\n  }\n}\ncustomElements.define('hui-picture-glance-card', HuiPictureGlanceCard);\n","import '../../../cards/ha-plant-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiPlantStatusCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-plant-card', 'plant');\n  }\n}\n\ncustomElements.define('hui-plant-status-card', HuiPlantStatusCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiVerticalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 8px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let totalSize = 0;\n    this._elements.forEach((element) => {\n      totalSize += computeCardSize(element);\n    });\n    return totalSize;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-vertical-stack-card', HuiVerticalStackCard);\n","import '../../../cards/ha-camera-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-weather-card', 'weather');\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define('hui-weather-forecast-card', HuiWeatherForecastCard);\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../cards/hui-entities-card.js';\nimport '../cards/hui-entity-filter-card.js';\nimport '../cards/hui-error-card.js';\nimport '../cards/hui-glance-card';\nimport '../cards/hui-history-graph-card.js';\nimport '../cards/hui-horizontal-stack-card.js';\nimport '../cards/hui-iframe-card.js';\nimport '../cards/hui-map-card.js';\nimport '../cards/hui-markdown-card.js';\nimport '../cards/hui-media-control-card.js';\nimport '../cards/hui-picture-card.js';\nimport '../cards/hui-picture-elements-card';\nimport '../cards/hui-picture-entity-card';\nimport '../cards/hui-picture-glance-card';\nimport '../cards/hui-plant-status-card.js';\nimport '../cards/hui-vertical-stack-card.js';\nimport '../cards/hui-weather-forecast-card';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CARD_TYPES = [\n  'entities',\n  'entity-filter',\n  'error',\n  'glance',\n  'history-graph',\n  'horizontal-stack',\n  'iframe',\n  'map',\n  'markdown',\n  'media-control',\n  'picture',\n  'picture-elements',\n  'picture-entity',\n  'picture-glance',\n  'plant-status',\n  'vertical-stack',\n  'weather-forecast'\n];\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createCardElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No card type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!CARD_TYPES.includes(config.type)) {\n    return _createErrorElement(`Unknown card type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeUnusedEntities from './common/compute-unused-entities.js';\nimport createCardElement from './common/create-card-element.js';\n\nimport './cards/hui-entities-card.js';\n\nclass HuiUnusedEntities extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 8px 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged'\n      },\n    };\n  }\n\n  _configChanged(config) {\n    const root = this.$.root;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const entities = computeUnusedEntities(this.hass, config).map(entity =>\n      ({ entity, secondary_info: 'entity-id' }));\n    const cardConfig = {\n      type: 'entities',\n      title: 'Unused entities',\n      entities,\n      show_header_toggle: false\n    };\n    const element = createCardElement(cardConfig);\n    element.hass = this.hass;\n    root.appendChild(element);\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.root;\n    if (!root.lastChild) return;\n    root.lastChild.hass = hass;\n  }\n}\ncustomElements.define('hui-unused-entities', HuiUnusedEntities);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../components/entity/ha-state-label-badge.js';\n\nimport applyThemesOnElement from '../../common/dom/apply_themes_on_element.js';\n\nimport createCardElement from './common/create-card-element';\n\nclass HUIView extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n      :host {\n        display: block;\n        padding: 4px 4px 0;\n        transform: translateZ(0);\n        position: relative;\n      }\n\n      #badges {\n        margin: 8px 16px;\n        font-size: 85%;\n        text-align: center;\n      }\n\n      #columns {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      .column {\n        flex-basis: 0;\n        flex-grow: 1;\n        max-width: 500px;\n        overflow-x: hidden;\n      }\n\n      .column > * {\n        display: block;\n        margin: 4px 4px 8px;\n      }\n\n      @media (max-width: 500px) {\n        :host {\n          padding-left: 0;\n          padding-right: 0;\n        }\n\n        .column > * {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n\n      @media (max-width: 599px) {\n        .column {\n          max-width: 600px;\n        }\n      }\n      </style>\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: Object,\n      columns: Number\n    };\n  }\n\n  static get observers() {\n    return [\n      // Put all properties in 1 observer so we only call configChanged once\n      '_createBadges(config)',\n      '_createCards(config, columns)'\n    ];\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  _createBadges(config) {\n    const root = this.$.badges;\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = 'none';\n      this._badges = [];\n      return;\n    }\n\n    const elements = [];\n    for (const entityId of config.badges) {\n      if (!(entityId in this.hass.states)) continue;\n\n      const element = document.createElement('ha-state-label-badge');\n      element.state = this.hass.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? 'block' : 'none';\n  }\n\n  _createCards(config) {\n    const root = this.$.columns;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements = config.cards.map((cardConfig) => {\n      const element = createCardElement(cardConfig);\n      element.hass = this.hass;\n      return element;\n    });\n\n    let columns = [];\n    const columnEntityCount = [];\n    for (let i = 0; i < this.columns; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    // Find column with < 5 entities, else column with lowest count\n    function getColumnIndex(size) {\n      let minIndex = 0;\n      for (let i = 0; i < columnEntityCount.length; i++) {\n        if (columnEntityCount[i] < 5) {\n          minIndex = i;\n          break;\n        }\n        if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n          minIndex = i;\n        }\n      }\n\n      columnEntityCount[minIndex] += size;\n\n      return minIndex;\n    }\n\n    elements.forEach((el) => {\n      // Trigger custom elements to build up DOM. This is needed for some elements\n      // that use the DOM to decide their height. We don't have to clean this up\n      // because a DOM element can only be in 1 position, so it will be removed from\n      // 'this' and added to the correct column afterwards.\n      this.appendChild(el);\n      const cardSize = typeof el.getCardSize === 'function' ? el.getCardSize() : 1;\n      columns[getColumnIndex(cardSize)].push(el);\n    });\n\n    // Remove empty columns\n    columns = columns.filter(val => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement('div');\n      columnEl.classList.add('column');\n      column.forEach(el => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if ('theme' in config) {\n      applyThemesOnElement(root, this.hass.themes, config.theme);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._badges.forEach((badge) => {\n      const { element, entityId } = badge;\n      element.setProperties({\n        hass,\n        state: hass.states[entityId]\n      });\n    });\n    this._cards.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-view', HUIView);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/app-route/app-route.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-tabs/paper-tab.js';\nimport '@polymer/paper-tabs/paper-tabs.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport scrollToTarget from '../../common/dom/scroll-to-target.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\nimport '../../layouts/ha-app-layout.js';\nimport '../../components/ha-start-voice-button.js';\nimport '../../components/ha-icon.js';\nimport { loadModule, loadJS } from '../../common/dom/load_resource.js';\nimport './hui-unused-entities.js';\nimport './hui-view.js';\nimport debounce from '../../common/util/debounce.js';\n\nimport createCardElement from './common/create-card-element.js';\n\n// JS should only be imported once. Modules and HTML are safe.\nconst JS_CACHE = {};\n\nclass HUIRoot extends NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include='ha-style'>\n      :host {\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n      }\n\n      ha-app-layout {\n        min-height: 100%;\n      }\n      paper-tabs {\n        margin-left: 12px;\n        --paper-tabs-selection-bar-color: var(--text-primary-color, #FFF);\n        text-transform: uppercase;\n      }\n      app-toolbar a {\n        color: var(--text-primary-color, white);\n      }\n      #view {\n        min-height: calc(100vh - 112px);\n        /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n        position: relative;\n      }\n      #view.tabs-hidden {\n        min-height: calc(100vh - 64px);\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/:view\" data=\"{{routeData}}\"></app-route>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>[[_computeTitle(config)]]</div>\n          <ha-start-voice-button hass=\"[[hass]]\"></ha-start-voice-button>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n          >\n            <paper-icon-button icon=\"hass:dots-vertical\" slot=\"dropdown-trigger\"></paper-icon-button>\n            <paper-listbox on-iron-select=\"_deselect\" slot=\"dropdown-content\">\n              <paper-item on-click=\"_handleRefresh\">Refresh</paper-item>\n              <paper-item on-click=\"_handleUnusedEntities\">Unused entities</paper-item>\n              <paper-item on-click=\"_handleHelp\">Help</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </app-toolbar>\n\n        <div sticky hidden$=\"[[_computeTabsHidden(config.views)]]\">\n          <paper-tabs scrollable selected=\"[[_curView]]\" on-iron-activate=\"_handleViewSelected\">\n            <template is=\"dom-repeat\" items=\"[[config.views]]\">\n              <paper-tab>\n                <template is=\"dom-if\" if=\"[[item.icon]]\">\n                  <ha-icon title$=\"[[item.title]]\" icon=\"[[item.icon]]\"></ha-icon>\n                </template>\n                <template is=\"dom-if\" if=\"[[!item.icon]]\">\n                  [[_computeTabTitle(item.title)]]\n                </template>\n              </paper-tab>\n            </template>\n          </paper-tabs>\n        </div>\n      </app-header>\n\n      <div id='view' on-rebuild-view='_debouncedConfigChanged'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: Boolean,\n      showMenu: Boolean,\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged',\n      },\n      columns: {\n        type: Number,\n        observer: '_columnsChanged',\n      },\n\n      _curView: {\n        type: Number,\n        value: 0,\n      },\n\n      route: {\n        type: Object,\n        observer: '_routeChanged'\n      },\n      routeData: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedConfigChanged = debounce(() => this._selectView(this._curView), 100);\n  }\n\n  _routeChanged(route) {\n    const views = this.config && this.config.views;\n    if (route.path === '' && route.prefix === '/lovelace' && views) {\n      this.navigate(`/lovelace/${views[0].id || 0}`, true);\n    } else if (this.routeData.view) {\n      const view = this.routeData.view;\n      let index = 0;\n      for (let i = 0; i < views.length; i++) {\n        if (views[i].id === view || i === parseInt(view)) {\n          index = i;\n          break;\n        }\n      }\n      if (index !== this._curView) this._selectView(index);\n    }\n  }\n\n  _computeViewId(id, index) {\n    return id || index;\n  }\n\n  _computeTitle(config) {\n    return config.title || 'Home Assistant';\n  }\n\n  _computeTabsHidden(views) {\n    return views.length < 2;\n  }\n\n  _computeTabTitle(title) {\n    return title || 'Unnamed view';\n  }\n\n  _handleRefresh() {\n    this.fire('config-refresh');\n  }\n\n  _handleUnusedEntities() {\n    this._selectView('unused');\n  }\n\n  _deselect(ev) {\n    ev.target.selected = null;\n  }\n\n  _handleHelp() {\n    window.open('https://www.home-assistant.io/lovelace/', '_blank');\n  }\n\n  _handleViewSelected(ev) {\n    const index = ev.detail.selected;\n    if (index !== this._curView) {\n      const id = this.config.views[index].id || index;\n      this.navigate(`/lovelace/${id}`);\n    }\n    scrollToTarget(this, this.$.layout.header.scrollTarget);\n  }\n\n  _selectView(viewIndex) {\n    this._curView = viewIndex;\n\n    // Recreate a new element to clear the applied themes.\n    const root = this.$.view;\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    let view;\n    let background = this.config.background || '';\n\n    if (viewIndex === 'unused') {\n      view = document.createElement('hui-unused-entities');\n      view.config = this.config;\n    } else {\n      const viewConfig = this.config.views[this._curView];\n      if (viewConfig.panel) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement('hui-view');\n        view.config = viewConfig;\n        view.columns = this.columns;\n      }\n      if (viewConfig.background) background = viewConfig.background;\n    }\n\n    this.$.view.style.background = background;\n\n    view.hass = this.hass;\n    root.appendChild(view);\n  }\n\n  _hassChanged(hass) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.hass = hass;\n  }\n\n  _configChanged(config) {\n    this._loadResources(config.resources || []);\n    // On config change, recreate the view from scratch.\n    this._selectView(this._curView);\n    this.$.view.classList.toggle('tabs-hidden', config.views.length < 2);\n  }\n\n  _columnsChanged(columns) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.columns = columns;\n  }\n\n  _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case 'js':\n          if (resource.url in JS_CACHE) break;\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case 'module':\n          loadModule(resource.url);\n          break;\n\n        case 'html':\n          import(/* webpackChunkName: \"import-href-polyfill\" */ '../../resources/html-import/import-href.js')\n            .then(({ importHref }) => importHref(resource.url));\n          break;\n\n        default:\n          // eslint-disable-next-line\n          console.warn('Unknown resource type specified: ${resource.type}');\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-root', HUIRoot);\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  var top = 0;\n  var scroller = target;\n  var easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t*(t-2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  var animationId = Math.random();\n  var duration = 200;\n  var startTime = Date.now();\n  var currentScrollTop = scroller.scrollTop;\n  var deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    var now = Date.now();\n    var elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }).call(element);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../layouts/hass-loading-screen.js';\nimport '../../layouts/hass-error-screen.js';\nimport './hui-root.js';\n\nclass Lovelace extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n        }\n      </style>\n      <template is='dom-if' if='[[_equal(_state, \"loaded\")]]' restamp>\n        <hui-root\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n          hass='[[hass]]'\n          route=\"[[route]]\"\n          config='[[_config]]'\n          columns='[[_columns]]'\n          on-config-refresh='_fetchConfig'\n        ></hui-root>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"loading\")]]' restamp>\n        <hass-loading-screen\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        ></hass-loading-screen>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"error\")]]' restamp>\n        <hass-error-screen\n          title='Lovelace'\n          error='[[_errorMsg]]'\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        >\n          <paper-button on-click=\"_fetchConfig\">Reload ui-lovelace.yaml</paper-button>\n        </hass-error-screen>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      narrow: {\n        type: Boolean,\n        value: false,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      route: Object,\n\n      _columns: {\n        type: Number,\n        value: 1,\n      },\n\n      _state: {\n        type: String,\n        value: 'loading',\n      },\n\n      _errorMsg: String,\n\n      _config: {\n        type: Object,\n        value: null,\n      },\n    };\n  }\n\n  static get observers() {\n    return ['_updateColumns(narrow, showMenu)'];\n  }\n\n  ready() {\n    this._fetchConfig();\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n    super.ready();\n  }\n\n  _updateColumns() {\n    const matchColumns = this.mqls.reduce((cols, mql) => cols + mql.matches, 0);\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(1, matchColumns - (!this.narrow && this.showMenu));\n  }\n\n  async _fetchConfig() {\n    try {\n      const conf = await this.hass.callWS({ type: 'frontend/lovelace_config' });\n      this.setProperties({\n        _config: conf,\n        _state: 'loaded',\n      });\n    } catch (err) {\n      this.setProperties({\n        _state: 'error',\n        _errorMsg: err.message,\n      });\n    }\n  }\n\n  _equal(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-lovelace', Lovelace);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nfunction _load(tag, url, type) {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise(function (resolve, reject) {\n    const element = document.createElement(tag);\n    let attr = 'src';\n    let parent = 'body';\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case 'script':\n        element.async = true;\n        if (type) {\n          element.type = type;\n        }\n        break;\n      case 'link':\n        element.type = 'text/css';\n        element.rel = 'stylesheet';\n        attr = 'href';\n        parent = 'head';\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n}\n\nexport const loadCSS = url => _load('link', url);\nexport const loadJS = url => _load('script', url);\nexport const loadImg = url => _load('img', url);\nexport const loadModule = url => _load('script', url, 'module');\n"],"sourceRoot":""}