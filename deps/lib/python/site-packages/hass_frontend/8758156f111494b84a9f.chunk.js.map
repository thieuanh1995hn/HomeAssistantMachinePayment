{"version":3,"sources":["webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/entity/ha-entity-picker.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/util/hass-attributes-util.js","webpack:///./src/components/ha-combo-box.js","webpack:///./src/components/ha-service-picker.js","webpack:///./src/panels/config/ha-form-style.js","webpack:///./src/panels/config/ha-config-section.js","webpack:///./src/panels/config/js/json_textarea.js","webpack:///./src/common/preact/event.js","webpack:///./src/panels/config/js/trigger/event.js","webpack:///./src/panels/config/js/trigger/homeassistant.js","webpack:///./src/panels/config/js/trigger/mqtt.js","webpack:///./src/panels/config/js/trigger/numeric_state.js","webpack:///./src/panels/config/js/trigger/state.js","webpack:///./src/panels/config/js/trigger/sun.js","webpack:///./src/panels/config/js/trigger/template.js","webpack:///./src/panels/config/js/trigger/time.js","webpack:///./src/common/entity/has_location.js","webpack:///./src/panels/config/js/trigger/zone.js","webpack:///./src/panels/config/js/trigger/trigger_edit.js","webpack:///./src/panels/config/js/trigger/trigger_row.js","webpack:///./src/panels/config/js/trigger/index.js","webpack:///./src/panels/config/js/condition/numeric_state.js","webpack:///./src/panels/config/js/condition/state.js","webpack:///./src/panels/config/js/condition/sun.js","webpack:///./src/panels/config/js/condition/template.js","webpack:///./src/panels/config/js/condition/time.js","webpack:///./src/panels/config/js/condition/zone.js","webpack:///./src/panels/config/js/condition/condition_edit.js","webpack:///./src/panels/config/js/condition/condition_row.js","webpack:///./src/panels/config/js/condition/index.js","webpack:///./src/panels/config/js/script/call_service.js","webpack:///./src/panels/config/js/script/condition.js","webpack:///./src/panels/config/js/script/delay.js","webpack:///./src/panels/config/js/script/event.js","webpack:///./src/panels/config/js/script/wait.js","webpack:///./src/panels/config/js/script/action_edit.js","webpack:///./src/panels/config/js/script/action_row.js","webpack:///./src/panels/config/js/script/index.js","webpack:///./src/panels/config/js/automation.js","webpack:///./src/common/preact/unmount.js","webpack:///./src/panels/config/automation/ha-automation-editor.js","webpack:///./src/panels/config/automation/ha-automation-picker.js","webpack:///./src/panels/config/automation/ha-config-automation.js","webpack:///./src/components/buttons/ha-call-api-button.js","webpack:///./src/layouts/hass-subpage.js","webpack:///./src/panels/config/cloud/ha-config-cloud-account.js","webpack:///./src/panels/config/cloud/ha-config-cloud-forgot-password.js","webpack:///./src/panels/config/cloud/ha-config-cloud-login.js","webpack:///./src/panels/config/cloud/ha-config-cloud-register.js","webpack:///./src/panels/config/cloud/ha-config-cloud.js","webpack:///./src/panels/config/config-entries/ha-config-entries.js","webpack:///./src/panels/config/core/ha-config-section-core.js","webpack:///./src/components/ha-push-notifications-toggle.js","webpack:///./src/panels/config/core/ha-config-section-push-notifications.js","webpack:///./src/panels/config/core/ha-config-section-themes.js","webpack:///./src/panels/config/core/ha-config-section-translation.js","webpack:///./src/panels/config/core/ha-config-core.js","webpack:///./src/panels/config/ha-entity-config.js","webpack:///./src/common/entity/states_sort_by_name.js","webpack:///./src/panels/config/customize/types/ha-customize-array.js","webpack:///./src/panels/config/customize/types/ha-customize-boolean.js","webpack:///./src/panels/config/customize/types/ha-customize-icon.js","webpack:///./src/panels/config/customize/types/ha-customize-key-value.js","webpack:///./src/panels/config/customize/types/ha-customize-string.js","webpack:///./src/panels/config/customize/ha-customize-attribute.js","webpack:///./src/panels/config/customize/ha-form-customize-attributes.js","webpack:///./src/panels/config/customize/ha-form-customize.js","webpack:///./src/panels/config/customize/ha-config-customize.js","webpack:///./src/panels/config/dashboard/ha-config-cloud-menu.js","webpack:///./src/panels/config/dashboard/ha-config-entries-menu.js","webpack:///./src/panels/config/dashboard/ha-config-users-menu.js","webpack:///./src/panels/config/dashboard/ha-config-navigation.js","webpack:///./src/panels/config/dashboard/ha-config-dashboard.js","webpack:///./src/panels/config/js/script.js","webpack:///./src/panels/config/script/ha-script-editor.js","webpack:///./src/panels/config/script/ha-script-picker.js","webpack:///./src/panels/config/script/ha-config-script.js","webpack:///./src/panels/config/users/ha-user-picker.js","webpack:///./src/panels/config/users/ha-user-editor.js","webpack:///./src/panels/config/users/ha-config-users.js","webpack:///./src/components/ha-service-description.js","webpack:///./src/panels/config/zwave/zwave-groups.js","webpack:///./src/panels/config/zwave/zwave-log.js","webpack:///./src/panels/config/zwave/zwave-network.js","webpack:///./src/panels/config/zwave/zwave-node-config.js","webpack:///./src/panels/config/zwave/zwave-node-information.js","webpack:///./src/panels/config/zwave/zwave-usercodes.js","webpack:///./src/panels/config/zwave/zwave-values.js","webpack:///./src/panels/config/zwave/ha-config-zwave.js","webpack:///./src/panels/config/ha-panel-config.js"],"names":["customElements","define","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","a","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","template","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","properties","hass","type","progress","Boolean","value","domain","String","service","serviceData","buttonTapped","this","el","eventData","callService","then","$","actionSuccess","success","actionError","fire","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_10__","_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_9__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_5__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_4__","allowCustomEntity","observer","_hass","_states","Array","computed","autofocus","label","notify","opened","domainFilter","entityFilter","Function","disabled","_computeLabel","localize","_computeStates","entityIds","keys","states","filter","eid","substr","indexOf","entities","sort","map","key","_computeStateName","state","_common_entity_compute_state_name_js__WEBPACK_IMPORTED_MODULE_8__","_openedChanged","newVal","_hassChanged","_computeToggleIcon","_fireChanged","ev","stopPropagation","211","module","__webpack_exports__","__webpack_require__","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","tempClass","className","classList","container","add","setTimeout","remove","ready","super","addEventListener","computeDisabled","hassAttributeUtil","binary_sensor","cover","sensor","string","json","icon","boolean","array","key-value","LOGIC_STATE_ATTRIBUTES","entity_picture","friendly_name","description","emulated_hue","domains","emulated_hue_name","haaska_hidden","haaska_name","homebridge_hidden","homebridge_name","supported_features","attribution","custom_ui_more_info","custom_ui_state_card","device_class","options","DOMAIN_DEVICE_CLASS","hidden","assumed_state","initial_state","unit_of_measurement","265","html_tag","polymer_element","events_mixin","allowCustomValue","items","_items","itemLabelPath","itemValuePath","_itemsChanged","_computeItemLabel","item","localize_mixin","_services","oldHass","config","services","result","forEach","i","length","push","documentContainer","document","createElement","setAttribute","innerHTML","head","appendChild","content","narrow","showMenu","isWide","computeContentClasses","classes","computeClasses","json_textarea_JSONTextArea","preact_esm","constructor","props","isValid","JSON","stringify","onChange","bind","target","parsed","parse","err","setState","componentWillReceiveProps","render","style","minWidth","width","border","c","onvalue-changed","onChangeEvent","prop","origData","name","data","assign","index","event_EventTrigger","eventDataChanged","event_data","trigger","event_type","defaultConfig","homeassistant_HassTrigger","radioGroupPicked","event","selected","id","aria-labelledby","onpaper-radio-group-changed","mqtt_MQTTTrigger","topic","payload","numeric_state_NumericStateTrigger","entityPicked","entity_id","value_template","below","above","state_StateTrigger","to","trgFrom","from","trgFor","for","sun_SunTrigger","offset","template_TemplateTrigger","time_TimeTrigger","at","hasLocation","stateObj","attributes","compute_state_domain","zoneAndLocationFilter","zone_ZoneTrigger","zonePicked","zone","TYPES","homeassistant","mqtt","numeric_state","sun","time","OPTIONS","trigger_edit_TriggerEdit","typeChanged","selectedItem","platform","Comp","no-animations","slot","oniron-select","opt","trigger_row_TriggerRow","onDelete","confirm","class","horizontal-align","horizontal-offset","vertical-offset","onTap","trigger_Trigger","addTrigger","triggerChanged","concat","newValue","splice","trg","idx","numeric_state_NumericStateCondition","condition","state_StateCondition","cndFor","sun_SunCondition","afterPicked","beforePicked","after","after_offset","before","before_offset","allow-empty-selection","template_TemplateCondition","time_TimeCondition","zone_zoneAndLocationFilter","zone_ZoneCondition","condition_edit_TYPES","condition_edit_OPTIONS","condition_edit_ConditionRow","condition_row_ConditionRow","condition_Condition","addCondition","conditionChanged","cnd","call_service_CallServiceAction","serviceChanged","serviceDataChanged","action","alias","condition_ConditionAction","delay_DelayAction","delay","event_EventAction","wait_WaitAction","onTemplateChange","[object Object]","wait_template","timeout","action_edit_TYPES","action_edit_OPTIONS","getType","action_edit_Action","newType","action_row_Action","script_Script","addAction","actionChanged","script","act","automation_Automation","automation","is-wide","unmount","mountEl","e","navigate_mixin","errors","dirty","creatingNew","_rendered","_renderScheduled","configChanged","disconnectedCallback","_updateComponent","automationChanged","oldVal","callApi","isArray","creatingNewChanged","backTapped","history","back","mergeEl","Promise","resolve","root","saveAutomation","Date","now","navigate","body","message","computeName","compute_state_name","automations","automationTapped","model","addAutomation","computeDescription","_backTapped","route","_routeData","_routeMatches","_creatingNew","_edittingAutomation","showEditor","computeAutomation","edittingAddon","routeData","computeAutomations","entity","entityA","entityB","nameA","toLowerCase","nameB","computeShowEditor","path","method","resp","response","header","account","handleLogout","_formatExpiration","date","format_date_time","_accountChanged","newAccount","cloud","_accountUpdater","clearTimeout","email","_requestInProgress","_error","_emailChanged","invalid","_keyDown","keyCode","_handleEmailPasswordReset","preventDefault","includes","flashMessage","setProperties","_password","observers","connectedCallback","requestAnimationFrame","flashRipple","simulatedRipple","_inputChanged","password","_handleLogin","focus","errCode","code","alert","_handleRegister","_handleForgotPassword","_dismissFlash","_verificationEmailSent","_handleResendVerifyEmail","LOGGED_IN_URLS","NOT_LOGGED_IN_URLS","loadingAccount","_flashMessage","_routeTail","_loginEmail","detail","_checkRoute","_debouncer","debounce","utils_async","timeOut","_equals","b","registeredDialog","_entries","_progress","_handlers","_loadData","dialogShowEvent","dialogTag","dialogImport","connection","subscribeEvents","unsub","_unsubEvents","_createFlow","newFlowForHandler","dialogClosedCallback","_continueFlow","continueFlowId","flow_id","_removeEntry","entryId","entry_id","entry","require_restart","_loadEntries","_loadDiscovery","handlers","entries","_computeIntegrationTitle","integration","validating","validateLog","groupLoaded","is_component_loaded","automationLoaded","scriptLoaded","validateConfig","pushSupported","readOnly","navigator","window","location","protocol","hostname","pushChecked","Notification","permission","loading","serviceWorker","reg","pushManager","getSubscription","subscription","_setPushSupported","handlePushChange","subscribePushNotifications","unsubscribePushNotifications","subscribe","userVisibleOnly","sub","browserName","userAgent","browser","console","error","unsubscribe","catch","themes","selectedTheme","Number","computeThemes","selectionChanged","selection","languageSelection","languages","computeLanguages","translationMetadata","translations","tag","nativeName","setLanguageSelection","language","languageSelectionChanged","computeIsZwaveLoaded","computeIsTranslationLoaded","computeIsThemesLoaded","allowDelete","selectedEntity","formState","formEl","component","form","entityChanged","computeSelectCaption","computeShowNoDevices","computeShowSpinner","computeShowPlaceholder","computeShowForm","hassChanged","entitiesChanged","oldEntities","oldEntityId","newIndex","findIndex","ent","loadEntity","saveEntity","hass_attributes_util","mutable_data","sortStatesByName","notifies","getOptions","computeSelected","getLabel","tapButton","secondary","closed","getIcon","itemObserver","wrapper","TYPE_TO_TAG","toUpperCase","child","lastChild","tagName","removeChild","parentNode","localAttributes","hasLocalAttributes","globalAttributes","hasGlobalAttributes","existingAttributes","hasExistingAttributes","newAttributes","hasNewAttributes","newAttributesOptions","selectedNewAttribute","localConfig","globalConfig","_initOpenObject","attribute","local","global","attr","objectId","_computeSingleAttribute","UNKNOWN_TYPE","_computeAttributes","computeLocalAttributes","localKeys","computeGlobalAttributes","globalKeys","computeExistingAttributes","entityKeys","computeShowWarning","some","filterFromAttributes","every","getNewAttributesOptions","conf","selectedNewAttributeObserver","option","ADD_TYPE","set","attributesObserver","entityConfig","computeEntities","_navigate","CORE_PAGES","pages","_computeLoaded","page","_computeCaption","_computeDescription","computeIsLoaded","script_ScriptEditor","sequenceChanged","sequence","href","scriptChanged","compute_object_id","saveScript","scripts","scriptTapped","addScript","_edittingScript","computeScript","computeScripts","ha_user_picker_registeredDialog","users","_withDefault","defaultValue","_computeUrl","user","_addUser","async","userId","_computeName","callWS","user_id","blur","_user","_users","_handlePickUser","_computeUser","u","_getDescription","domainServices","serviceObject","nodes","groups","selectedNode","selectedTargetNode","selectedGroup","otherGroupNodes","maxAssociations","noAssociationsLeft","serviceCalled","foo","refreshGroups","computeAssociationsLeft","computeMaxAssociations","max_associations","computeOtherGroupNodes","associations","values","association_instances","assoc","instance","node","find","n","node_id","caption","computeTargetInGroup","query_stage","computeSelectCaptionGroup","computeIsTargetNodeSelected","computeIsGroupSelected","computeAssocServiceData","association","target_node_id","group","groupData","selectedGroupChanged","ozwLogs","numLogLines","refreshLog","info","showDescription","helpTap","selectedConfigParameter","configParameterMax","configParameterMin","configValueHelpText","selectedConfigParameterType","selectedConfigValue","selectedConfigParameterValues","selectedConfigParameterNumValues","loadedConfigValue","wakeupInput","wakeupNode","refreshConfig","nodesChanged","wake_up_interval","computeGetWakeupValue","computeWakeupServiceData","computeConfigValueHelp","help","computeSetConfigParameterServiceData","valueData","parseInt","parameter","selectedConfigParameterChanged","max","min","data_items","isConfigParameterSelected","computeSelectCaptionConfigParameter","configData","selectedNodeAttrs","nodeInfoActive","nodeChanged","nodeAttrs","att","userCodes","userCodeMaxLen","selectedUserCode","selectedUserCodeValue","computedCodeOutput","refreshUserCodes","isUserCodeSelected","computeSelectCaptionUserCodes","selectedUserCodeChanged","a2hex","hex2a","computeUserCodeServiceData","code_slot","usercode","usercodes","str","arr","output","l","hex","charCodeAt","toString","join","hexx","hexMod","replace","fromCharCode","selectedValue","refreshValues","computeGetValueName","computeIsValueSelected","selectedValueChanged","computeValueNameServiceData","newValueNameInput","value_id","entityIgnored","ignored","entityPollingIntensity","poll_intensity","entityInfoActive","selectedEntityAttrs","newNodeNameInput","hasNodeUserCodes","showHelp","computeNodes","match","nodeid","selectedNodeChanged","selectedConfigParameterValue","configs","_objToArray","notifyPath","selectedEntityChanged","valueId","obj","valueIndex","computeSelectedEntityAttrs","entityAttrs","computeSelectCaptionEnt","computeIsNodeSelected","computeIsEntitySelected","computeNodeServiceData","computeHealNodeServiceData","return_routes","computeGetNodeName","node_name","computeNodeNameServiceData","computeRefreshEntityServiceData","computePollIntensityServiceData","polling_intensity","toggleHelp","wide","wideSidebar","computeIsWide","_routeChanged","prefix"],"mappings":"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","file":"8758156f111494b84a9f.chunk.js","sourcesContent":["import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-icon-item.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@vaadin/vaadin-combo-box/vaadin-combo-box-light.js';\n\n\nimport './state-badge.js';\n\nimport computeStateName from '../../common/entity/compute_state_name.js';\nimport LocalizeMixin from '../../mixins/localize-mixin.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaEntityPicker extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style>\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-light\n      items=\"[[_states]]\"\n      item-value-path=\"entity_id\"\n      item-label-path=\"entity_id\"\n      value=\"{{value}}\"\n      opened=\"{{opened}}\"\n      allow-custom-value=\"[[allowCustomEntity]]\"\n      on-change='_fireChanged'\n    >\n      <paper-input autofocus=\"[[autofocus]]\" label=\"[[_computeLabel(label, localize)]]\" class=\"input\" value=\"[[value]]\" disabled=\"[[disabled]]\">\n        <paper-icon-button slot=\"suffix\" class=\"clear-button\" icon=\"hass:close\" no-ripple=\"\" hidden$=\"[[!value]]\">Clear</paper-icon-button>\n        <paper-icon-button slot=\"suffix\" class=\"toggle-button\" icon=\"[[_computeToggleIcon(opened)]]\" hidden=\"[[!_states.length]]\">Toggle</paper-icon-button>\n      </paper-input>\n      <template>\n        <style>\n          paper-icon-item {\n            margin: -10px;\n          }\n        </style>\n        <paper-icon-item>\n          <state-badge state-obj=\"[[item]]\" slot=\"item-icon\"></state-badge>\n          <paper-item-body two-line=\"\">\n            <div>[[_computeStateName(item)]]</div>\n            <div secondary=\"\">[[item.entity_id]]</div>\n          </paper-item-body>\n        </paper-icon-item>\n      </template>\n    </vaadin-combo-box-light>\n`;\n  }\n\n  static get properties() {\n    return {\n      allowCustomEntity: {\n        type: Boolean,\n        value: false,\n      },\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _hass: Object,\n      _states: {\n        type: Array,\n        computed: '_computeStates(_hass, domainFilter, entityFilter)',\n      },\n      autofocus: Boolean,\n      label: {\n        type: String,\n      },\n      value: {\n        type: String,\n        notify: true,\n      },\n      opened: {\n        type: Boolean,\n        value: false,\n        observer: '_openedChanged',\n      },\n      domainFilter: {\n        type: String,\n        value: null,\n      },\n      entityFilter: {\n        type: Function,\n        value: null,\n      },\n      disabled: Boolean,\n    };\n  }\n\n  _computeLabel(label, localize) {\n    return label === undefined\n      ? localize('ui.components.entity.entity-picker.entity')\n      : label;\n  }\n\n  _computeStates(hass, domainFilter, entityFilter) {\n    if (!hass) return [];\n\n    let entityIds = Object.keys(hass.states);\n\n    if (domainFilter) {\n      entityIds = entityIds.filter(eid => eid.substr(0, eid.indexOf('.')) === domainFilter);\n    }\n\n    let entities = entityIds.sort().map(key => hass.states[key]);\n\n    if (entityFilter) {\n      entities = entities.filter(entityFilter);\n    }\n\n    return entities;\n  }\n\n  _computeStateName(state) {\n    return computeStateName(state);\n  }\n\n  _openedChanged(newVal) {\n    if (!newVal) {\n      this._hass = this.hass;\n    }\n  }\n\n  _hassChanged(newVal) {\n    if (!this.opened) {\n      this._hass = newVal;\n    }\n  }\n\n  _computeToggleIcon(opened) {\n    return opened ? 'hass:menu-up' : 'hass:menu-down';\n  }\n\n  _fireChanged(ev) {\n    ev.stopPropagation();\n    this.fire('change');\n  }\n}\n\ncustomElements.define('ha-entity-picker', HaEntityPicker);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","const hassAttributeUtil = {};\n\nhassAttributeUtil.DOMAIN_DEVICE_CLASS = {\n  binary_sensor: [\n    'battery',\n    'cold',\n    'connectivity',\n    'door',\n    'garage_door',\n    'gas',\n    'heat',\n    'light',\n    'lock',\n    'moisture',\n    'motion',\n    'moving',\n    'occupancy',\n    'opening',\n    'plug',\n    'power',\n    'presence',\n    'problem',\n    'safety',\n    'smoke',\n    'sound',\n    'vibration',\n    'window'\n  ],\n  cover: ['garage'],\n  sensor: [\n    'battery',\n    'humidity',\n    'illuminance',\n    'temperature'\n  ],\n};\n\nhassAttributeUtil.UNKNOWN_TYPE = 'json';\nhassAttributeUtil.ADD_TYPE = 'key-value';\n\nhassAttributeUtil.TYPE_TO_TAG = {\n  string: 'ha-customize-string',\n  json: 'ha-customize-string',\n  icon: 'ha-customize-icon',\n  boolean: 'ha-customize-boolean',\n  array: 'ha-customize-array',\n  'key-value': 'ha-customize-key-value',\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES =\n  hassAttributeUtil.LOGIC_STATE_ATTRIBUTES || {\n    entity_picture: undefined,\n    friendly_name: { type: 'string', description: 'Name' },\n    icon: { type: 'icon' },\n    emulated_hue: {\n      type: 'boolean',\n      domains: ['emulated_hue']\n    },\n    emulated_hue_name: {\n      type: 'string',\n      domains: ['emulated_hue']\n    },\n    haaska_hidden: undefined,\n    haaska_name: undefined,\n    homebridge_hidden: { type: 'boolean' },\n    homebridge_name: { type: 'string' },\n    supported_features: undefined,\n    attribution: undefined,\n    custom_ui_more_info: { type: 'string' },\n    custom_ui_state_card: { type: 'string' },\n    device_class: {\n      type: 'array',\n      options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n      description: 'Device class',\n      domains: ['binary_sensor', 'cover', 'sensor']\n    },\n    hidden: { type: 'boolean', description: 'Hide from UI' },\n    assumed_state: {\n      type: 'boolean',\n      domains: ['switch', 'light', 'cover', 'climate', 'fan', 'group']\n    },\n    initial_state: {\n      type: 'string',\n      domains: ['automation']\n    },\n    unit_of_measurement: { type: 'string' },\n  };\n\nexport default hassAttributeUtil;\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@vaadin/vaadin-combo-box/vaadin-combo-box-light.js';\n\nimport EventsMixin from '../mixins/events-mixin.js';\n\nclass HaComboBox extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      paper-input > paper-icon-button {\n        width: 24px;\n        height: 24px;\n        padding: 2px;\n        color: var(--secondary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <vaadin-combo-box-light\n      items=\"[[_items]]\"\n      item-value-path=\"[[itemValuePath]]\"\n      item-label-path=\"[[itemLabelPath]]\"\n      value=\"{{value}}\"\n      opened=\"{{opened}}\"\n      allow-custom-value=\"[[allowCustomValue]]\"\n      on-change='_fireChanged'\n    >\n      <paper-input autofocus=\"[[autofocus]]\" label=\"[[label]]\" class=\"input\" value=\"[[value]]\">\n        <paper-icon-button slot=\"suffix\" class=\"clear-button\" icon=\"hass:close\" hidden$=\"[[!value]]\">Clear</paper-icon-button>\n        <paper-icon-button slot=\"suffix\" class=\"toggle-button\" icon=\"[[_computeToggleIcon(opened)]]\" hidden$=\"[[!items.length]]\">Toggle</paper-icon-button>\n      </paper-input>\n      <template>\n        <style>\n            paper-item {\n              margin: -5px -10px;\n            }\n        </style>\n        <paper-item>[[_computeItemLabel(item, itemLabelPath)]]</paper-item>\n      </template>\n    </vaadin-combo-box-light>\n`;\n  }\n\n  static get properties() {\n    return {\n      allowCustomValue: Boolean,\n      items: {\n        type: Object,\n        observer: '_itemsChanged',\n      },\n      _items: Object,\n      itemLabelPath: String,\n      itemValuePath: String,\n      autofocus: Boolean,\n      label: String,\n      opened: {\n        type: Boolean,\n        value: false,\n        observer: '_openedChanged',\n      },\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _openedChanged(newVal) {\n    if (!newVal) {\n      this._items = this.items;\n    }\n  }\n\n  _itemsChanged(newVal) {\n    if (!this.opened) {\n      this._items = newVal;\n    }\n  }\n\n  _computeToggleIcon(opened) {\n    return opened ? 'hass:menu-up' : 'hass:menu-down';\n  }\n\n  _computeItemLabel(item, itemLabelPath) {\n    return itemLabelPath ? item[itemLabelPath] : item;\n  }\n\n  _fireChanged(ev) {\n    ev.stopPropagation();\n    this.fire('change');\n  }\n}\n\ncustomElements.define('ha-combo-box', HaComboBox);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport './ha-combo-box.js';\n\nimport LocalizeMixin from '../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaServicePicker extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-combo-box label=\"[[localize('ui.components.service-picker.service')]]\" items=\"[[_services]]\" value=\"{{value}}\" allow-custom-value=\"\"></ha-combo-box>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _services: Array,\n      value: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  _hassChanged(hass, oldHass) {\n    if (!hass) {\n      this._services = [];\n      return;\n    } else if (oldHass && hass.config.services === oldHass.config.services) {\n      return;\n    }\n    const result = [];\n\n    Object.keys(hass.config.services).sort().forEach((domain) => {\n      const services = Object.keys(hass.config.services[domain]).sort();\n\n      for (let i = 0; i < services.length; i++) {\n        result.push(`${domain}.${services[i]}`);\n      }\n    });\n\n    this._services = result;\n  }\n}\n\ncustomElements.define('ha-service-picker', HaServicePicker);\n","const documentContainer = document.createElement('template');\ndocumentContainer.setAttribute('style', 'display: none;');\n\ndocumentContainer.innerHTML = `<dom-module id=\"ha-form-style\">\n  <template>\n    <style>\n      .form-group {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        padding: 8px 16px;\n      }\n\n      .form-group label {\n        @apply --layout-flex-2;\n      }\n\n      .form-group .form-control {\n        @apply --layout-flex;\n      }\n\n      .form-group.vertical {\n        @apply --layout-vertical;\n        @apply --layout-start;\n      }\n\n      paper-dropdown-menu.form-control {\n        margin: -9px 0;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild(documentContainer.content);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../resources/ha-style.js';\n\nclass HaConfigSection extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .header {\n        @apply --paper-font-display1;\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        @apply --paper-font-subhead;\n        width: 100%;\n        max-width: 400px;\n        margin-right: 40px;\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .header {\n        @apply --paper-font-headline;\n      }\n      .narrow .intro {\n        font-size: 14px;\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n    </style>\n    <div class$=\"[[computeContentClasses(isWide)]]\">\n      <div class=\"header\"><slot name=\"header\"></slot></div>\n      <div class$=\"[[computeClasses(isWide)]]\">\n        <div class=\"intro\">\n          <slot name=\"introduction\"></slot>\n        </div>\n        <div class=\"panel flex-auto\">\n          <slot></slot>\n        </div>\n      </div>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  computeContentClasses(isWide) {\n    var classes = 'content ';\n\n    return isWide ? classes : classes + 'narrow';\n  }\n\n  computeClasses(isWide) {\n    var classes = 'together layout ';\n\n    return classes + (isWide ? 'horizontal' : 'vertical narrow');\n  }\n}\n\ncustomElements.define('ha-config-section', HaConfigSection);\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-textarea.js';\n\n\nexport default class JSONTextArea extends Component {\n  constructor(props) {\n    super(props);\n    this.state.isValid = true;\n    this.state.value = JSON.stringify(props.value || {}, null, 2);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(ev) {\n    const value = ev.target.value;\n    let parsed;\n    let isValid;\n\n    try {\n      parsed = JSON.parse(value);\n      isValid = true;\n    } catch (err) {\n      // Invalid JSON\n      isValid = false;\n    }\n\n    this.setState({\n      value,\n      isValid,\n    });\n    if (isValid) {\n      this.props.onChange(parsed);\n    }\n  }\n\n  componentWillReceiveProps({ value }) {\n    if (value === this.props.value) return;\n    this.setState({\n      value: JSON.stringify(value, null, 2),\n      isValid: true,\n    });\n  }\n\n  render({ label }, { value, isValid }) {\n    const style = {\n      minWidth: 300,\n      width: '100%',\n    };\n    if (!isValid) {\n      style.border = '1px solid red';\n    }\n    return (\n      <paper-textarea\n        label={label}\n        value={value}\n        style={style}\n        onvalue-changed={this.onChange}\n      />\n    );\n  }\n}\n","export function onChangeEvent(prop, ev) {\n  const origData = this.props[prop];\n\n  if (ev.target.value === origData[ev.target.name]) {\n    return;\n  }\n\n  const data = Object.assign({}, origData);\n\n  if (ev.target.value) {\n    data[ev.target.name] = ev.target.value;\n  } else {\n    delete data[ev.target.name];\n  }\n\n  this.props.onChange(this.props.index, data);\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport JSONTextArea from '../json_textarea.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class EventTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.eventDataChanged = this.eventDataChanged.bind(this);\n  }\n\n  /* eslint-disable camelcase */\n  eventDataChanged(event_data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event_data },\n    ));\n  }\n\n  render({ trigger, localize }) {\n    const { event_type, event_data } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.event.event_type')}\n          name=\"event_type\"\n          value={event_type}\n          onvalue-changed={this.onChange}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.triggers.type.event.event_data')}\n          value={event_data}\n          onChange={this.eventDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nEventTrigger.defaultConfig = {\n  event_type: '',\n  event_data: {},\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nexport default class HassTrigger extends Component {\n  constructor() {\n    super();\n\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { event } = trigger;\n    return (\n      <div>\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"start\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.start')}</paper-radio-button>\n          <paper-radio-button name=\"shutdown\">{localize('ui.panel.config.automation.editor.triggers.type.homeassistant.shutdown')}</paper-radio-button>\n        </paper-radio-group>\n      </div>\n    );\n  }\n}\n\nHassTrigger.defaultConfig = {\n  event: 'start'\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class MQTTTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { topic, payload } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.mqtt.topic')}\n          name=\"topic\"\n          value={topic}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.mqtt.payload')}\n          name=\"payload\"\n          value={payload}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nMQTTTrigger.defaultConfig = {\n  topic: ''\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class NumericStateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const {\n      value_template, entity_id, below, above\n    } = trigger;\n\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.above')}\n          name=\"above\"\n          value={above}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.below')}\n          name=\"below\"\n          value={below}\n          onvalue-changed={this.onChange}\n        />\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.triggers.type.numeric_state.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nNumericStateTrigger.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class StateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const { entity_id, to } = trigger;\n    const trgFrom = trigger.from;\n    const trgFor = trigger.for;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.state.from')}\n          name=\"from\"\n          value={trgFrom}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.state.to')}\n          name=\"to\"\n          value={to}\n          onvalue-changed={this.onChange}\n        />\n        {trgFor && <pre>For: {JSON.stringify(trgFor, null, 2)}</pre>}\n      </div>\n    );\n  }\n}\n\nStateTrigger.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class SunTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { offset, event } = trigger;\n    return (\n      <div>\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.sun.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.triggers.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.triggers.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.sun.offset')}\n          name=\"offset\"\n          value={offset}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nSunTrigger.defaultConfig = {\n  event: 'sunrise',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TemplateTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  render({ trigger, localize }) {\n    /* eslint-disable camelcase */\n    const { value_template } = trigger;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.triggers.type.template.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTemplateTrigger.defaultConfig = {\n  value_template: '',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TimeTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, localize }) {\n    const { at } = trigger;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.triggers.type.time.at')}\n          name=\"at\"\n          value={at}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTimeTrigger.defaultConfig = {\n  at: '',\n};\n","export default function hasLocation(stateObj) {\n  return ('latitude' in stateObj.attributes &&\n          'longitude' in stateObj.attributes);\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\nimport hasLocation from '../../../../common/entity/has_location.js';\nimport computeStateDomain from '../../../../common/entity/compute_state_domain.js';\n\nfunction zoneAndLocationFilter(stateObj) {\n  return hasLocation(stateObj) && computeStateDomain(stateObj) !== 'zone';\n}\n\nexport default class ZoneTrigger extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'trigger');\n    this.radioGroupPicked = this.radioGroupPicked.bind(this);\n    this.entityPicked = this.entityPicked.bind(this);\n    this.zonePicked = this.zonePicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  zonePicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { zone: ev.target.value },\n    ));\n  }\n\n  radioGroupPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { event: ev.target.selected },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ trigger, hass, localize }) {\n    const { entity_id, zone, event } = trigger;\n    return (\n      <div>\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.triggers.type.zone.entity')}\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n          entityFilter={zoneAndLocationFilter}\n        />\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.triggers.type.zone.zone')}\n          value={zone}\n          onChange={this.zonePicked}\n          hass={hass}\n          allowCustomEntity\n          domainFilter='zone'\n        />\n        <label id=\"eventlabel\">{localize('ui.panel.config.automation.editor.triggers.type.zone.event')}</label>\n        <paper-radio-group\n          selected={event}\n          aria-labelledby=\"eventlabel\"\n          onpaper-radio-group-changed={this.radioGroupPicked}\n        >\n          <paper-radio-button name=\"enter\">{localize('ui.panel.config.automation.editor.triggers.type.zone.enter')}</paper-radio-button>\n          <paper-radio-button name=\"leave\">{localize('ui.panel.config.automation.editor.triggers.type.zone.leave')}</paper-radio-button>\n        </paper-radio-group>\n      </div>\n    );\n  }\n}\n\nZoneTrigger.defaultConfig = {\n  entity_id: '',\n  zone: '',\n  event: 'enter',\n};\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport EventTrigger from './event.js';\nimport HassTrigger from './homeassistant.js';\nimport MQTTTrigger from './mqtt.js';\nimport NumericStateTrigger from './numeric_state.js';\nimport StateTrigger from './state.js';\nimport SunTrigger from './sun.js';\nimport TemplateTrigger from './template.js';\nimport TimeTrigger from './time.js';\nimport ZoneTrigger from './zone.js';\n\nconst TYPES = {\n  event: EventTrigger,\n  state: StateTrigger,\n  homeassistant: HassTrigger,\n  mqtt: MQTTTrigger,\n  numeric_state: NumericStateTrigger,\n  sun: SunTrigger,\n  template: TemplateTrigger,\n  time: TimeTrigger,\n  zone: ZoneTrigger,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nexport default class TriggerEdit extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const type = ev.target.selectedItem.attributes.platform.value;\n\n    if (type !== this.props.trigger.platform) {\n      this.props.onChange(this.props.index, Object.assign(\n        { platform: type },\n        TYPES[type].defaultConfig\n      ));\n    }\n  }\n\n  render({ index, trigger, onChange, hass, localize }) {\n    const Comp = TYPES[trigger.platform];\n    const selected = OPTIONS.indexOf(trigger.platform);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.triggers.unsupported_platform', 'platform', trigger.platform)}\n          <pre>{JSON.stringify(trigger, null, 2)}</pre>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.triggers.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item platform={opt}>{localize(`ui.panel.config.automation.editor.triggers.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          trigger={trigger}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport TriggerEdit from './trigger_edit.js';\n\nexport default class TriggerRow extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.triggers.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.triggers.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.triggers.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <TriggerEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport TriggerRow from './trigger_row.js';\nimport StateTrigger from './state.js';\n\nexport default class Trigger extends Component {\n  constructor() {\n    super();\n\n    this.addTrigger = this.addTrigger.bind(this);\n    this.triggerChanged = this.triggerChanged.bind(this);\n  }\n\n  addTrigger() {\n    const trigger = this.props.trigger.concat(Object.assign(\n      { platform: 'state' },\n      StateTrigger.defaultConfig,\n    ));\n\n    this.props.onChange(trigger);\n  }\n\n  triggerChanged(index, newValue) {\n    const trigger = this.props.trigger.concat();\n\n    if (newValue === null) {\n      trigger.splice(index, 1);\n    } else {\n      trigger[index] = newValue;\n    }\n\n    this.props.onChange(trigger);\n  }\n\n  render({ trigger, hass, localize }) {\n    return (\n      <div class=\"triggers\">\n        {trigger.map((trg, idx) => (\n          <TriggerRow\n            index={idx}\n            trigger={trg}\n            onChange={this.triggerChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addTrigger}>{localize('ui.panel.config.automation.editor.triggers.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class NumericStateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const {\n      value_template, entity_id, below, above\n    } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.above')}\n          name=\"above\"\n          value={above}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.below')}\n          name=\"below\"\n          value={below}\n          onvalue-changed={this.onChange}\n        />\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.conditions.type.numeric_state.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nNumericStateCondition.defaultConfig = {\n  entity_id: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '../../../../components/entity/ha-entity-picker.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class StateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, state } = condition;\n    const cndFor = condition.for;\n    return (\n      <div>\n        <ha-entity-picker\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.state.state')}\n          name=\"state\"\n          value={state}\n          onvalue-changed={this.onChange}\n        />\n        {cndFor && <pre>For: {JSON.stringify(cndFor, null, 2)}</pre>}\n      </div>\n    );\n  }\n}\n\nStateCondition.defaultConfig = {\n  entity_id: '',\n  state: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-radio-button/paper-radio-button.js';\nimport '@polymer/paper-radio-group/paper-radio-group.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class SunCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.afterPicked = this.radioGroupPicked.bind(this, 'after');\n    this.beforePicked = this.radioGroupPicked.bind(this, 'before');\n  }\n\n  radioGroupPicked(key, ev) {\n    const condition = Object.assign({}, this.props.condition);\n\n    if (ev.target.selected) {\n      condition[key] = ev.target.selected;\n    } else {\n      delete condition[key];\n    }\n\n    this.props.onChange(this.props.index, condition);\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const {\n      after, after_offset, before, before_offset\n    } = condition;\n    return (\n      <div>\n        <label id=\"beforelabel\">{localize('ui.panel.config.automation.editor.conditions.type.sun.before')}</label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={before}\n          aria-labelledby=\"beforelabel\"\n          onpaper-radio-group-changed={this.beforePicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.sun.before_offset')}\n          name=\"before_offset\"\n          value={before_offset}\n          onvalue-changed={this.onChange}\n          disabled={before === undefined}\n        />\n\n        <label id=\"afterlabel\">{localize('ui.panel.config.automation.editor.conditions.type.sun.after')}</label>\n        <paper-radio-group\n          allow-empty-selection\n          selected={after}\n          aria-labelledby=\"afterlabel\"\n          onpaper-radio-group-changed={this.afterPicked}\n        >\n          <paper-radio-button name=\"sunrise\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunrise')}</paper-radio-button>\n          <paper-radio-button name=\"sunset\">{localize('ui.panel.config.automation.editor.conditions.type.sun.sunset')}</paper-radio-button>\n        </paper-radio-group>\n\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.sun.after_offset')}\n          name=\"after_offset\"\n          value={after_offset}\n          onvalue-changed={this.onChange}\n          disabled={after === undefined}\n        />\n      </div>\n    );\n  }\n}\n\nSunCondition.defaultConfig = {\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TemplateCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n  }\n\n  render({ condition, localize }) {\n    /* eslint-disable camelcase */\n    const { value_template } = condition;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.conditions.type.template.value_template')}\n          name=\"value_template\"\n          value={value_template}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTemplateCondition.defaultConfig = {\n  value_template: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class TimeCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, localize }) {\n    const { after, before } = condition;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.time.after')}\n          name=\"after\"\n          value={after}\n          onvalue-changed={this.onChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.conditions.type.time.before')}\n          name=\"before\"\n          value={before}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nTimeCondition.defaultConfig = {\n};\n","import { h, Component } from 'preact';\nimport '../../../../components/entity/ha-entity-picker.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\nimport hasLocation from '../../../../common/entity/has_location.js';\nimport computeStateDomain from '../../../../common/entity/compute_state_domain.js';\n\nfunction zoneAndLocationFilter(stateObj) {\n  return hasLocation(stateObj) && computeStateDomain(stateObj) !== 'zone';\n}\n\nexport default class ZoneCondition extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'condition');\n    this.entityPicked = this.entityPicked.bind(this);\n    this.zonePicked = this.zonePicked.bind(this);\n  }\n\n  entityPicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { entity_id: ev.target.value },\n    ));\n  }\n\n  zonePicked(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.condition,\n      { zone: ev.target.value },\n    ));\n  }\n\n  /* eslint-disable camelcase */\n  render({ condition, hass, localize }) {\n    const { entity_id, zone } = condition;\n    return (\n      <div>\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.conditions.type.zone.entity')}\n          value={entity_id}\n          onChange={this.entityPicked}\n          hass={hass}\n          allowCustomEntity\n          entityFilter={zoneAndLocationFilter}\n        />\n        <ha-entity-picker\n          label={localize('ui.panel.config.automation.editor.conditions.type.zone.zone')}\n          value={zone}\n          onChange={this.zonePicked}\n          hass={hass}\n          allowCustomEntity\n          domainFilter='zone'\n        />\n      </div>\n    );\n  }\n}\n\nZoneCondition.defaultConfig = {\n  entity_id: '',\n  zone: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport NumericStateCondition from './numeric_state.js';\nimport StateCondition from './state.js';\nimport SunCondition from './sun.js';\nimport TemplateCondition from './template.js';\nimport TimeCondition from './time.js';\nimport ZoneCondition from './zone.js';\n\nconst TYPES = {\n  state: StateCondition,\n  numeric_state: NumericStateCondition,\n  sun: SunCondition,\n  template: TemplateCondition,\n  time: TimeCondition,\n  zone: ZoneCondition,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nexport default class ConditionRow extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const type = ev.target.selectedItem.attributes.condition.value;\n\n    if (type !== this.props.condition.condition) {\n      this.props.onChange(this.props.index, Object.assign(\n        { condition: type },\n        TYPES[type].defaultConfig\n      ));\n    }\n  }\n\n  render({ index, condition, onChange, hass, localize }) {\n    const Comp = TYPES[condition.condition];\n    const selected = OPTIONS.indexOf(condition.condition);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.conditions.unsupported_condition', 'condition', condition.condition)}\n          <pre>{JSON.stringify(condition, null, 2)}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.conditions.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item condition={opt}>{localize(`ui.panel.config.automation.editor.conditions.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          condition={condition}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport ConditionEdit from './condition_edit.js';\n\nexport default class ConditionRow extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.conditions.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.conditions.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.conditions.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <ConditionEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport ConditionRow from './condition_row.js';\n\nexport default class Condition extends Component {\n  constructor() {\n    super();\n\n    this.addCondition = this.addCondition.bind(this);\n    this.conditionChanged = this.conditionChanged.bind(this);\n  }\n\n  addCondition() {\n    const condition = this.props.condition.concat({\n      condition: 'state',\n    });\n\n    this.props.onChange(condition);\n  }\n\n  conditionChanged(index, newValue) {\n    const condition = this.props.condition.concat();\n\n    if (newValue === null) {\n      condition.splice(index, 1);\n    } else {\n      condition[index] = newValue;\n    }\n\n    this.props.onChange(condition);\n  }\n\n  render({ condition, hass, localize }) {\n    return (\n      <div class=\"triggers\">\n        {condition.map((cnd, idx) => (\n          <ConditionRow\n            index={idx}\n            condition={cnd}\n            onChange={this.conditionChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addCondition}>{localize('ui.panel.config.automation.editor.conditions.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '../../../../components/ha-service-picker.js';\n\nimport JSONTextArea from '../json_textarea.js';\n\nexport default class CallServiceAction extends Component {\n  constructor() {\n    super();\n\n    this.serviceChanged = this.serviceChanged.bind(this);\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  serviceChanged(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { service: ev.target.value },\n    ));\n  }\n\n  serviceDataChanged(data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { data },\n    ));\n  }\n\n  render({ action, hass, localize }) {\n    const { service, data } = action;\n\n    return (\n      <div>\n        <ha-service-picker\n          hass={hass}\n          value={service}\n          onChange={this.serviceChanged}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.actions.type.service.service_data')}\n          value={data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nCallServiceAction.defaultConfig = {\n  alias: '',\n  service: '',\n  data: {}\n};\n","import { h, Component } from 'preact';\n\nimport StateCondition from '../condition/state.js';\nimport ConditionEdit from '../condition/condition_edit.js';\n\nexport default class ConditionAction extends Component {\n  // eslint-disable-next-line\n  render({ action, index, onChange, hass, localize }) {\n    return (\n      <ConditionEdit\n        condition={action}\n        onChange={onChange}\n        index={index}\n        hass={hass}\n        localize={localize}\n      />\n    );\n  }\n}\n\nConditionAction.defaultConfig = Object.assign(\n  { condition: 'state' },\n  StateCondition.defaultConfig,\n);\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class DelayAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n  }\n\n  render({ action, localize }) {\n    const { delay } = action;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.delay.delay')}\n          name=\"delay\"\n          value={delay}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nDelayAction.defaultConfig = {\n  delay: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\n\nimport JSONTextArea from '../json_textarea.js';\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class EventAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n    this.serviceDataChanged = this.serviceDataChanged.bind(this);\n  }\n\n  serviceDataChanged(data) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.action,\n      { data },\n    ));\n  }\n\n  render({ action, localize }) {\n    /* eslint-disable camelcase */\n    const { event, event_data } = action;\n    return (\n      <div>\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.event.event')}\n          name=\"event\"\n          value={event}\n          onvalue-changed={this.onChange}\n        />\n        <JSONTextArea\n          label={localize('ui.panel.config.automation.editor.actions.type.event.service_data')}\n          value={event_data}\n          onChange={this.serviceDataChanged}\n        />\n      </div>\n    );\n  }\n}\n\nEventAction.defaultConfig = {\n  event: '',\n  event_data: {},\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-input/paper-textarea.js';\n\nimport { onChangeEvent } from '../../../../common/preact/event.js';\n\nexport default class WaitAction extends Component {\n  constructor() {\n    super();\n\n    this.onChange = onChangeEvent.bind(this, 'action');\n    this.onTemplateChange = this.onTemplateChange.bind(this);\n  }\n\n  // Gets fired on mount. If empty, onChangeEvent removes attribute.\n  // Without the attribute this action is no longer matched to this component.\n  onTemplateChange(ev) {\n    this.props.onChange(this.props.index, Object.assign(\n      {}, this.props.trigger,\n      { [ev.target.name]: ev.target.value },\n    ));\n  }\n\n  render({ action, localize }) {\n    /* eslint-disable camelcase */\n    const { wait_template, timeout } = action;\n    return (\n      <div>\n        <paper-textarea\n          label={localize('ui.panel.config.automation.editor.actions.type.wait_template.wait_template')}\n          name=\"wait_template\"\n          value={wait_template}\n          onvalue-changed={this.onTemplateChange}\n        />\n        <paper-input\n          label={localize('ui.panel.config.automation.editor.actions.type.wait_template.timeout')}\n          name=\"timeout\"\n          value={timeout}\n          onvalue-changed={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nWaitAction.defaultConfig = {\n  wait_template: '',\n  timeout: '',\n};\n","import { h, Component } from 'preact';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu-light.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-item/paper-item.js';\n\nimport CallServiceAction from './call_service.js';\nimport ConditionAction from './condition.js';\nimport DelayAction from './delay.js';\nimport EventAction from './event.js';\nimport WaitAction from './wait.js';\n\nconst TYPES = {\n  service: CallServiceAction,\n  delay: DelayAction,\n  wait_template: WaitAction,\n  condition: ConditionAction,\n  event: EventAction,\n};\n\nconst OPTIONS = Object.keys(TYPES).sort();\n\nfunction getType(action) {\n  const keys = Object.keys(TYPES);\n  for (let i = 0; i < keys.length; i++) {\n    if (keys[i] in action) {\n      return keys[i];\n    }\n  }\n  return null;\n}\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.typeChanged = this.typeChanged.bind(this);\n  }\n\n  typeChanged(ev) {\n    const newType = ev.target.selectedItem.attributes.action.value;\n    const oldType = getType(this.props.action);\n\n    if (oldType !== newType) {\n      this.props.onChange(this.props.index, TYPES[newType].defaultConfig);\n    }\n  }\n\n  render({ index, action, onChange, hass, localize }) {\n    const type = getType(action);\n    const Comp = type && TYPES[type];\n    const selected = OPTIONS.indexOf(type);\n\n    if (!Comp) {\n      return (\n        <div>\n          {localize('ui.panel.config.automation.editor.actions.unsupported_action', 'action', type)}\n          <pre>{JSON.stringify(action, null, 2)}</pre>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <paper-dropdown-menu-light label={localize('ui.panel.config.automation.editor.actions.type_select')} no-animations>\n          <paper-listbox\n            slot=\"dropdown-content\"\n            selected={selected}\n            oniron-select={this.typeChanged}\n          >\n            {OPTIONS.map(opt => <paper-item action={opt}>{localize(`ui.panel.config.automation.editor.actions.type.${opt}.label`)}</paper-item>)}\n          </paper-listbox>\n        </paper-dropdown-menu-light>\n        <Comp\n          index={index}\n          action={action}\n          onChange={onChange}\n          hass={hass}\n          localize={localize}\n        />\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport ActionEdit from './action_edit.js';\n\nexport default class Action extends Component {\n  constructor() {\n    super();\n\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  onDelete() {\n    // eslint-disable-next-line\n    if (confirm(this.props.localize('ui.panel.config.automation.editor.actions.delete_confirm'))) {\n      this.props.onChange(this.props.index, null);\n    }\n  }\n\n  render(props) {\n    return (\n      <paper-card>\n        <div class='card-menu'>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n            vertical-offset=\"-5\"\n          >\n            <paper-icon-button\n              icon=\"hass:dots-vertical\"\n              slot=\"dropdown-trigger\"\n            />\n            <paper-listbox slot=\"dropdown-content\">\n              <paper-item disabled>{props.localize('ui.panel.config.automation.editor.actions.duplicate')}</paper-item>\n              <paper-item onTap={this.onDelete}>{props.localize('ui.panel.config.automation.editor.actions.delete')}</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </div>\n        <div class='card-content'>\n          <ActionEdit {...props} />\n        </div>\n      </paper-card>\n    );\n  }\n}\n","import { h, Component } from 'preact';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport ActionRow from './action_row.js';\n\nexport default class Script extends Component {\n  constructor() {\n    super();\n\n    this.addAction = this.addAction.bind(this);\n    this.actionChanged = this.actionChanged.bind(this);\n  }\n\n  addAction() {\n    const script = this.props.script.concat({\n      service: '',\n    });\n\n    this.props.onChange(script);\n  }\n\n  actionChanged(index, newValue) {\n    const script = this.props.script.concat();\n\n    if (newValue === null) {\n      script.splice(index, 1);\n    } else {\n      script[index] = newValue;\n    }\n\n    this.props.onChange(script);\n  }\n\n  render({ script, hass, localize }) {\n    return (\n      <div class=\"script\">\n        {script.map((act, idx) => (\n          <ActionRow\n            index={idx}\n            action={act}\n            onChange={this.actionChanged}\n            hass={hass}\n            localize={localize}\n          />))}\n        <paper-card>\n          <div class='card-actions add-card'>\n            <paper-button onTap={this.addAction}>{localize('ui.panel.config.automation.editor.actions.add')}</paper-button>\n          </div>\n        </paper-card>\n      </div>\n    );\n  }\n}\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '../ha-config-section.js';\nimport '../../../components/ha-markdown.js';\n\nimport Trigger from './trigger/index.js';\nimport Condition from './condition/index.js';\nimport Script from './script/index.js';\n\nexport default class Automation extends Component {\n  constructor() {\n    super();\n\n    this.onChange = this.onChange.bind(this);\n    this.triggerChanged = this.triggerChanged.bind(this);\n    this.conditionChanged = this.conditionChanged.bind(this);\n    this.actionChanged = this.actionChanged.bind(this);\n  }\n\n  onChange(ev) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { [ev.target.name]: ev.target.value },\n    ));\n  }\n\n  triggerChanged(trigger) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { trigger },\n    ));\n  }\n\n  conditionChanged(condition) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { condition },\n    ));\n  }\n\n  actionChanged(action) {\n    this.props.onChange(Object.assign(\n      {}, this.props.automation,\n      { action },\n    ));\n  }\n\n  render({ automation, isWide, hass, localize }) {\n    const {\n      alias, trigger, condition, action\n    } = automation;\n\n    return (\n      <div>\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{alias}</span>\n          <span slot='introduction'>\n            {localize('ui.panel.config.automation.editor.introduction')}\n          </span>\n          <paper-card>\n            <div class='card-content'>\n              <paper-input\n                label={localize('ui.panel.config.automation.editor.alias')}\n                name=\"alias\"\n                value={alias}\n                onvalue-changed={this.onChange}\n              />\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.triggers.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.triggers.introduction')} />\n          </span>\n          <Trigger\n            trigger={trigger}\n            onChange={this.triggerChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.conditions.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.conditions.introduction')} />\n          </span>\n          <Condition\n            condition={condition || []}\n            onChange={this.conditionChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{localize('ui.panel.config.automation.editor.actions.header')}</span>\n          <span slot='introduction'>\n            <ha-markdown content={localize('ui.panel.config.automation.editor.actions.introduction')} />\n          </span>\n          <Script\n            script={action}\n            onChange={this.actionChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n      </div>\n    );\n  }\n}\n","import { render } from 'preact';\n\nexport default function unmount(mountEl) {\n  render(() => null, mountEl);\n}\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-fab/paper-fab.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { h, render } from 'preact';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport Automation from '../js/automation.js';\nimport unmountPreact from '../../../common/preact/unmount.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nfunction AutomationEditor(mountEl, props, mergeEl) {\n  return render(h(Automation, props), mountEl, mergeEl);\n}\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaAutomationEditor extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      .errors {\n        padding: 20px;\n        font-weight: bold;\n        color: var(--google-red-500);\n      }\n      .content {\n        padding-bottom: 20px;\n      }\n      paper-card {\n        display: block;\n      }\n      .triggers,\n      .script {\n        margin-top: -16px;\n      }\n      .triggers paper-card,\n      .script paper-card {\n        margin-top: 16px;\n      }\n      .add-card paper-button {\n        display: block;\n        text-align: center;\n      }\n      .card-menu {\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 1;\n        color: var(--primary-text-color);\n      }\n      .card-menu paper-item {\n        cursor: pointer;\n      }\n      span[slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n        margin-bottom: -80px;\n        transition: margin-bottom .3s;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      paper-fab[dirty] {\n        margin-bottom: 0;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[name]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class=\"content\">\n        <template is=\"dom-if\" if=\"[[errors]]\">\n          <div class=\"errors\">[[errors]]</div>\n        </template>\n        <div id=\"root\"></div>\n      </div>\n      <paper-fab slot=\"fab\" is-wide$=\"[[isWide]]\" dirty$=\"[[dirty]]\" icon=\"hass:content-save\" title=\"[[localize('ui.panel.config.automation.editor.save')]]\" on-click=\"saveAutomation\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_updateComponent',\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      errors: {\n        type: Object,\n        value: null,\n      },\n\n      dirty: {\n        type: Boolean,\n        value: false,\n      },\n\n      config: {\n        type: Object,\n        value: null,\n      },\n\n      automation: {\n        type: Object,\n        observer: 'automationChanged',\n      },\n\n      creatingNew: {\n        type: Boolean,\n        observer: 'creatingNewChanged',\n      },\n\n      name: {\n        type: String,\n        computed: 'computeName(automation, localize)'\n      },\n\n      isWide: {\n        type: Boolean,\n        observer: '_updateComponent',\n      },\n\n      _rendered: {\n        type: Object,\n        value: null,\n      },\n\n      _renderScheduled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    this.configChanged = this.configChanged.bind(this);\n    super.ready(); // This call will initialize preact.\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._rendered) {\n      unmountPreact(this._rendered);\n      this._rendered = null;\n    }\n  }\n\n  configChanged(config) {\n    // onChange gets called a lot during initial rendering causing recursing calls.\n    if (this._rendered === null) return;\n    this.config = config;\n    this.errors = null;\n    this.dirty = true;\n    this._updateComponent();\n  }\n\n  automationChanged(newVal, oldVal) {\n    if (!newVal) return;\n    if (!this.hass) {\n      setTimeout(() => this.automationChanged(newVal, oldVal), 0);\n      return;\n    }\n    if (oldVal && oldVal.attributes.id === newVal.attributes.id) {\n      return;\n    }\n    this.hass.callApi('get', 'config/automation/config/' + newVal.attributes.id)\n      .then(function (config) {\n        // Normalize data: ensure trigger, action and condition are lists\n        // Happens when people copy paste their automations into the config\n        ['trigger', 'condition', 'action'].forEach(function (key) {\n          var value = config[key];\n          if (value && !Array.isArray(value)) {\n            config[key] = [value];\n          }\n        });\n        this.dirty = false;\n        this.config = config;\n        this._updateComponent();\n      }.bind(this));\n  }\n\n  creatingNewChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n    this.dirty = false;\n    this.config = {\n      alias: this.localize('ui.panel.config.automation.editor.default_name'),\n      trigger: [\n        { platform: 'state' },\n      ],\n      condition: [],\n      action: [\n        { service: '' },\n      ],\n    };\n    this._updateComponent();\n  }\n\n  backTapped() {\n    if (this.dirty &&\n        // eslint-disable-next-line\n        !confirm(this.localize('ui.panel.config.automation.editor.unsaved_confirm'))) {\n      return;\n    }\n    history.back();\n  }\n\n  _updateComponent() {\n    if (this._renderScheduled || !this.hass || !this.config) return;\n    this._renderScheduled = true;\n    Promise.resolve().then(() => {\n      this._rendered = AutomationEditor(this.$.root, {\n        automation: this.config,\n        onChange: this.configChanged,\n        isWide: this.isWide,\n        hass: this.hass,\n        localize: this.localize,\n      }, this._rendered);\n      this._renderScheduled = false;\n    });\n  }\n\n  saveAutomation() {\n    var id = this.creatingNew ? '' + Date.now() : this.automation.attributes.id;\n    this.hass.callApi('post', 'config/automation/config/' + id, this.config).then(function () {\n      this.dirty = false;\n\n      if (this.creatingNew) {\n        this.navigate(`/config/automation/edit/${id}`, true);\n      }\n    }.bind(this), function (errors) {\n      this.errors = errors.body.message;\n      throw errors;\n    }.bind(this));\n  }\n\n  computeName(automation, localize) {\n    return automation\n      ? computeStateName(automation)\n      : localize('ui.panel.config.automation.editor.default_name');\n  }\n}\n\ncustomElements.define('ha-automation-editor', HaAutomationEditor);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-markdown.js';\nimport '../../../layouts/ha-app-layout.js';\n\nimport '../ha-config-section.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaAutomationPicker extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      :host {\n        display: block;\n      }\n\n      paper-item {\n        cursor: pointer;\n      }\n\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      a {\n        color: var(--primary-color);\n      }\n\n      ha-markdown p {\n        margin: 0px;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.automation.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div slot=\"header\">[[localize('ui.panel.config.automation.picker.header')]]</div>\n        <div slot=\"introduction\">\n          <ha-markdown content=\"[[localize('ui.panel.config.automation.picker.introduction')]]\"></ha-markdown>\n        </div>\n\n        <paper-card heading=\"[[localize('ui.panel.config.automation.picker.pick_automation')]]\">\n          <template is=\"dom-if\" if=\"[[!automations.length]]\">\n            <div class=\"card-content\">\n              <p>[[localize('ui.panel.config.automation.picker.no_automations')]]</p>\n            </div>\n          </template>\n          <template is=\"dom-repeat\" items=\"[[automations]]\" as=\"automation\">\n            <paper-item>\n              <paper-item-body two-line=\"\" on-click=\"automationTapped\">\n                <div>[[computeName(automation)]]</div>\n                <div secondary=\"\">[[computeDescription(automation)]]</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </template>\n        </paper-card>\n      </ha-config-section>\n\n      <paper-fab slot=\"fab\" is-wide$=\"[[isWide]]\" icon=\"hass:plus\" title=\"[[localize('ui.panel.config.automation.picker.add_automation')]]\" on-click=\"addAutomation\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      automations: {\n        type: Array,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n    };\n  }\n\n  automationTapped(ev) {\n    this.navigate('/config/automation/edit/' + this.automations[ev.model.index].attributes.id);\n  }\n\n  addAutomation() {\n    this.navigate('/config/automation/new');\n  }\n\n  computeName(automation) {\n    return computeStateName(automation);\n  }\n\n  // Still thinking of something to add here.\n  // eslint-disable-next-line\n  computeDescription(automation) {\n    return '';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-automation-picker', HaAutomationPicker);\n","import '@polymer/app-route/app-route.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-automation-editor.js';\nimport './ha-automation-picker.js';\n\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\n\nclass HaConfigAutomation extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-automation-picker,\n      ha-automation-editor {\n        height: 100%;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/automation/edit/:automation\" data=\"{{_routeData}}\" active=\"{{_edittingAutomation}}\"></app-route>\n    <app-route route=\"[[route]]\" pattern=\"/automation/new\" active=\"{{_creatingNew}}\"></app-route>\n\n    <template is=\"dom-if\" if=\"[[!showEditor]]\">\n      <ha-automation-picker hass=\"[[hass]]\" narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\" automations=\"[[automations]]\" is-wide=\"[[isWide]]\"></ha-automation-picker>\n    </template>\n\n    <template is=\"dom-if\" if=\"[[showEditor]]\" restamp=\"\">\n      <ha-automation-editor hass=\"[[hass]]\" automation=\"[[automation]]\" is-wide=\"[[isWide]]\" creating-new=\"[[_creatingNew]]\"></ha-automation-editor>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      route: Object,\n      isWide: Boolean,\n      _routeData: Object,\n      _routeMatches: Boolean,\n      _creatingNew: Boolean,\n      _edittingAutomation: Boolean,\n\n      automations: {\n        type: Array,\n        computed: 'computeAutomations(hass)',\n      },\n\n      automation: {\n        type: Object,\n        computed: 'computeAutomation(automations, _edittingAutomation, _routeData)',\n      },\n\n      showEditor: {\n        type: Boolean,\n        computed: 'computeShowEditor(_edittingAutomation, _creatingNew)',\n      }\n    };\n  }\n\n  computeAutomation(automations, edittingAddon, routeData) {\n    if (!automations || !edittingAddon) {\n      return null;\n    }\n    for (var i = 0; i < automations.length; i++) {\n      if (automations[i].attributes.id === routeData.automation) {\n        return automations[i];\n      }\n    }\n    return null;\n  }\n\n  computeAutomations(hass) {\n    var automations = [];\n\n    Object.keys(hass.states).forEach(function (key) {\n      var entity = hass.states[key];\n\n      if (computeStateDomain(entity) === 'automation' &&\n          'id' in entity.attributes) {\n        automations.push(entity);\n      }\n    });\n\n    return automations.sort(function entitySortBy(entityA, entityB) {\n      var nameA = (entityA.attributes.alias ||\n                   entityA.entity_id).toLowerCase();\n      var nameB = (entityB.attributes.alias ||\n                   entityB.entity_id).toLowerCase();\n\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  computeShowEditor(_edittingAutomation, _creatingNew) {\n    return _creatingNew || _edittingAutomation;\n  }\n}\n\ncustomElements.define('ha-config-automation', HaConfigAutomation);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallApiButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\" disabled=\"[[disabled]]\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      path: String,\n\n      method: {\n        type: String,\n        value: 'POST',\n      },\n\n      data: {\n        type: Object,\n        value: {},\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    const eventData = {\n      method: this.method,\n      path: this.path,\n      data: this.data,\n    };\n\n    this.hass.callApi(this.method, this.path, this.data)\n      .then((resp) => {\n        this.progress = false;\n        this.$.progress.actionSuccess();\n        eventData.success = true;\n        eventData.response = resp;\n      }, (resp) => {\n        this.progress = false;\n        this.$.progress.actionError();\n        eventData.success = false;\n        eventData.response = resp;\n      }).then(() => {\n        this.fire('hass-api-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-api-button', HaCallApiButton);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HassSubpage extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"ha-style\"></style>\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[header]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <slot></slot>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      header: String\n    };\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('hass-subpage', HassSubpage);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-api-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\n\nimport formatDateTime from '../../../common/datetime/format_date_time.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudAccount extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n      paper-card {\n        display: block;\n      }\n      .account-row {\n        display: flex;\n        padding: 0 16px;\n      }\n      paper-button {\n        align-self: center;\n      }\n      .soon {\n        font-style: italic;\n        margin-top: 24px;\n        text-align: center;\n      }\n      .nowrap {\n        white-space: nowrap;;\n      }\n      .wrap {\n        white-space: normal;\n      }\n      .status {\n        text-transform: capitalize;\n        padding: 16px;\n      }\n      paper-button {\n        color: var(--primary-color);\n        font-weight: 500;\n      }\n      a {\n        color: var(--primary-color);\n      }\n    </style>\n    <hass-subpage header=\"Cloud Account\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            Thank you for supporting Home Assistant. It's because of people like you that we are able to run this project and make a great home automation experience for everyone. Thank you!\n          </span>\n\n          <paper-card heading=\"Account\">\n            <div class=\"account-row\">\n              <paper-item-body two-line=\"\">\n                [[account.email]]\n                <div secondary=\"\" class=\"wrap\">\n                  <span class=\"nowrap\">Subscription expires on </span>\n                  <span class=\"nowrap\">[[_formatExpiration(account.sub_exp)]]</span>\n                </div>\n              </paper-item-body>\n              <paper-button on-click=\"handleLogout\">Sign out</paper-button>\n            </div>\n\n            <div class=\"account-row\">\n              <paper-item-body>\n                Cloud connection status\n              </paper-item-body>\n              <div class=\"status\">[[account.cloud]]</div>\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Integrations</span>\n          <span slot=\"introduction\">\n            Integrations for Home Assistant Cloud allow you to connect with services in the cloud\n            without having to expose your Home Assistant instance publicly on the internet.\n          </span>\n\n          <paper-card heading=\"Alexa\">\n            <div class=\"card-content\">\n              With the Alexa integration for Home Assistant Cloud you'll be able to control all your Home Assistant devices via any Alexa-enabled device.\n              <ul>\n                <li>\n                  <a href=\"https://alexa.amazon.com/spa/index.html#skills/dp/B0772J1QKB/?ref=skill_dsk_skb_sr_2\" target=\"_blank\">\n                    Activate the Home Assistant skill for Alexa\n                  </a>\n                </li>\n                <li>\n                  <a href=\"https://www.home-assistant.io/cloud/alexa/\" target=\"_blank\">\n                    Config documentation\n                  </a>\n                </li>\n              </ul>\n              <p><em>This integration requires an Alexa-enabled device like the Amazon Echo.</em></p>\n            </div>\n          </paper-card>\n\n          <paper-card heading=\"Google Assistant\">\n            <div class=\"card-content\">\n              With the Google Assistant integration for Home Assistant Cloud you'll be able to control all your Home Assistant devices via any Google Assistant-enabled device.\n              <ul>\n                <li>\n                  <a href=\"https://assistant.google.com/services/a/uid/00000091fd5fb875\" target=\"_blank\">\n                    Activate the Home Assistant skill for Google Assistant\n                  </a>\n                </li>\n                <li>\n                  <a href=\"https://www.home-assistant.io/cloud/google_assistant/\" target=\"_blank\">\n                    Config documentation\n                  </a>\n                </li>\n              </ul>\n              <p><em>This integration requires a Google Assistant-enabled device like the Google Home or Android phone.</em></p>\n            </div>\n            <div class=\"card-actions\">\n              <ha-call-api-button hass=\"[[hass]]\" path=\"cloud/google_actions/sync\">Sync devices</ha-call-api-button>\n            </div>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: {\n        type: Object,\n        observer: '_accountChanged',\n      },\n    };\n  }\n\n  handleLogout() {\n    this.hass.callApi('post', 'cloud/logout').then(() => this.fire('ha-account-refreshed', { account: null }));\n  }\n\n  _formatExpiration(date) {\n    return formatDateTime(new Date(date));\n  }\n\n  _accountChanged(newAccount) {\n    if (!newAccount || newAccount.cloud !== 'connecting') {\n      if (this._accountUpdater) {\n        clearTimeout(this._accountUpdater);\n        this._accountUpdater = null;\n      }\n      return;\n    } else if (this._accountUpdater) {\n      return;\n    }\n    setTimeout(() => {\n      this._accountUpdater = null;\n      this.hass.callApi('get', 'cloud/account')\n        .then(account => this.fire('ha-account-refreshed', { account }));\n    }, 5000);\n  }\n}\n\ncustomElements.define('ha-config-cloud-account', HaConfigCloudAccount);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudForgotPassword extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n\n      paper-card {\n        display: block;\n        max-width: 600px;\n        margin: 0 auto;\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      .card-actions a {\n        color: var(--primary-text-color);\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <hass-subpage header=\"Forgot Password\">\n      <div class=\"content\">\n        <paper-card>\n          <div class=\"card-content\">\n            <h1>Forgot your password?</h1>\n            <p>\n              Enter your email address and we will send you a link to reset your password.\n            </p>\n            <div class=\"error\" hidden$=\"[[!_error]]\">[[_error]]</div>\n            <paper-input autofocus=\"\" id=\"email\" label=\"E-mail\" value=\"{{email}}\" type=\"email\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n          </div>\n          <div class=\"card-actions\">\n            <ha-progress-button on-click=\"_handleEmailPasswordReset\" progress=\"[[_requestInProgress]]\">Send reset email</ha-progress-button>\n          </div>\n        </paper-card>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      email: {\n        type: String,\n        notify: true,\n        observer: '_emailChanged'\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      _error: {\n        type: String,\n        value: '',\n      }\n    };\n  }\n\n  _emailChanged() {\n    this._error = '';\n    this.$.email.invalid = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleEmailPasswordReset();\n      ev.preventDefault();\n    }\n  }\n\n  _handleEmailPasswordReset() {\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n    }\n\n    if (this.$.email.invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/forgot_password', {\n      email: this.email,\n    }).then(() => {\n      this._requestInProgress = false;\n      this.fire('cloud-done', {\n        flashMessage: 'Check your email for instructions on how to reset your password.'\n      });\n    }, err => this.setProperties({\n      _requestInProgress: false,\n      _error: err && err.body && err.body.message ?\n        err.body.message : 'Unknown error',\n    }));\n  }\n}\n\ncustomElements.define('ha-config-cloud-forgot-password', HaConfigCloudForgotPassword);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-ripple/paper-ripple.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudLogin extends\n  NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 24px;\n      }\n      [slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n      paper-card:last-child {\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      [hidden] {\n        display: none;\n      }\n      .flash-msg {\n        padding-right: 44px;\n      }\n      .flash-msg paper-icon-button {\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        color: var(--secondary-text-color);\n      }\n    </style>\n    <hass-subpage header=\"Cloud Login\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            The Home Assistant Cloud allows your local Home Assistant instance to connect with cloud-only services like Amazon Alexa.\n            <p><a href=\"https://www.home-assistant.io/components/cloud/\" target=\"_blank\">Learn more</a></p>\n          </span>\n\n          <paper-card hidden$=\"[[!flashMessage]]\">\n            <div class=\"card-content flash-msg\">\n              [[flashMessage]]\n              <paper-icon-button icon=\"hass:close\" on-click=\"_dismissFlash\">Dismiss</paper-icon-button>\n              <paper-ripple id=\"flashRipple\" noink=\"\"></paper-ripple>\n            </div>\n          </paper-card>\n\n          <paper-card>\n            <div class=\"card-content\">\n              <h1>Sign In</h1>\n              <div class=\"error\" hidden$=\"[[!_error]]\">[[_error]]</div>\n              <paper-input label=\"Email\" id=\"email\" type=\"email\" value=\"{{email}}\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n              <paper-input id=\"password\" label=\"Password\" value=\"{{_password}}\" type=\"password\" on-keydown=\"_keyDown\" error-message=\"Passwords are at least 8 characters\"></paper-input>\n            </div>\n            <div class=\"card-actions\">\n              <ha-progress-button on-click=\"_handleLogin\" progress=\"[[_requestInProgress]]\">Sign in</ha-progress-button>\n              <button class=\"link\" hidden=\"[[_requestInProgress]]\" on-click=\"_handleForgotPassword\">forgot password?</button>\n            </div>\n          </paper-card>\n\n          <paper-card>\n            <paper-item on-click=\"_handleRegister\">\n              <paper-item-body two-line=\"\">\n                Create Account\n                <div secondary=\"\">Get up and running quickly.</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      email: {\n        type: String,\n        notify: true,\n      },\n      _password: {\n        type: String,\n        value: '',\n      },\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      flashMessage: {\n        type: String,\n        notify: true,\n      },\n      _error: String,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_inputChanged(email, _password)'\n    ];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.flashMessage) {\n      // Wait for DOM to be drawn\n      requestAnimationFrame(() =>\n        requestAnimationFrame(() =>\n          this.$.flashRipple.simulatedRipple()));\n    }\n  }\n\n  _inputChanged() {\n    this.$.email.invalid = false;\n    this.$.password.invalid = false;\n    this._error = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleLogin();\n      ev.preventDefault();\n    }\n  }\n\n  _handleLogin() {\n    let invalid = false;\n\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n      this.$.email.focus();\n      invalid = true;\n    }\n\n    if (this._password.length < 8) {\n      this.$.password.invalid = true;\n\n      if (!invalid) {\n        invalid = true;\n        this.$.password.focus();\n      }\n    }\n\n    if (invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/login', {\n      email: this.email,\n      password: this._password,\n    }).then((account) => {\n      this.fire('ha-account-refreshed', { account: account });\n      this.setProperties({\n        email: '',\n        _password: '',\n      });\n    }, (err) => {\n      // Do this before setProperties because changing it clears errors.\n      this._password = '';\n\n      const errCode = err && err.body && err.body.code;\n      if (errCode === 'PasswordChangeRequired') {\n        alert('You need to change your password before logging in.');\n        this.navigate('/config/cloud/forgot-password');\n        return;\n      }\n\n      const props = {\n        _requestInProgress: false,\n        _error: (err && err.body && err.body.message) ? err.body.message : 'Unknown error',\n      };\n\n      if (errCode === 'UserNotConfirmed') {\n        props._error = 'You need to confirm your email before logging in.';\n      }\n\n      this.setProperties(props);\n      this.$.email.focus();\n    });\n  }\n\n  _handleRegister() {\n    this.flashMessage = '';\n    this.navigate('/config/cloud/register');\n  }\n\n  _handleForgotPassword() {\n    this.flashMessage = '';\n    this.navigate('/config/cloud/forgot-password');\n  }\n\n  _dismissFlash() {\n    // give some time to let the ripple finish.\n    setTimeout(() => { this.flashMessage = ''; }, 200);\n  }\n}\n\ncustomElements.define('ha-config-cloud-login', HaConfigCloudLogin);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-progress-button.js';\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaConfigCloudRegister extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      a {\n        color: var(--primary-color);\n      }\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n      paper-card:last-child {\n        margin-top: 24px;\n      }\n      h1 {\n        @apply --paper-font-headline;\n        margin: 0;\n      }\n      .error {\n        color: var(--google-red-500);\n      }\n      .card-actions {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <hass-subpage header=\"Register Account\">\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Register with the Home Assistant Cloud</span>\n          <span slot=\"introduction\">\n            Register today to easily connect with the Home Assistant Cloud. This will allow you to unlock great new services and functionality, like Amazon Alexa integration.\n\n            <p>\n              By registering an account you agree to the following terms and conditions.\n              </p><ul>\n                <li><a href=\"https://home-assistant.io/tos/\" target=\"_blank\">Terms and Conditions</a></li>\n                <li><a href=\"https://home-assistant.io/privacy/\" target=\"_blank\">Privacy Policy</a></li>\n              </ul>\n            <p></p>\n          </span>\n\n          <paper-card>\n            <div class=\"card-content\">\n              <div class=\"header\">\n                <h1>Register</h1>\n                <div class=\"error\" hidden$=\"[[!_error]]\">[[_error]]</div>\n              </div>\n              <paper-input autofocus=\"\" id=\"email\" label=\"Email address\" type=\"email\" value=\"{{email}}\" on-keydown=\"_keyDown\" error-message=\"Invalid email\"></paper-input>\n              <paper-input id=\"password\" label=\"Password\" value=\"{{_password}}\" type=\"password\" on-keydown=\"_keyDown\" error-message=\"Your password needs to be at least 8 characters\"></paper-input>\n            </div>\n            <div class=\"card-actions\">\n              <ha-progress-button on-click=\"_handleRegister\" progress=\"[[_requestInProgress]]\">Create Account</ha-progress-button>\n              <button class=\"link\" hidden=\"[[_requestInProgress]]\" on-click=\"_handleResendVerifyEmail\">Resend confirmation email</button>\n            </div>\n          </paper-card>\n        </ha-config-section>\n      </div>\n    </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      email: {\n        type: String,\n        notify: true,\n      },\n\n      _requestInProgress: {\n        type: Boolean,\n        value: false,\n      },\n      _password: {\n        type: String,\n        value: '',\n      },\n      _error: {\n        type: String,\n        value: '',\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      '_inputChanged(email, _password)'\n    ];\n  }\n\n  _inputChanged() {\n    this._error = '';\n    this.$.email.invalid = false;\n    this.$.password.invalid = false;\n  }\n\n  _keyDown(ev) {\n    // validate on enter\n    if (ev.keyCode === 13) {\n      this._handleRegister();\n      ev.preventDefault();\n    }\n  }\n\n  _handleRegister() {\n    let invalid = false;\n\n    if (!this.email || !this.email.includes('@')) {\n      this.$.email.invalid = true;\n      this.$.email.focus();\n      invalid = true;\n    }\n\n    if (this._password.length < 8) {\n      this.$.password.invalid = true;\n\n      if (!invalid) {\n        invalid = true;\n        this.$.password.focus();\n      }\n    }\n\n    if (invalid) return;\n\n    this._requestInProgress = true;\n\n    this.hass.callApi('post', 'cloud/register', {\n      email: this.email,\n      password: this._password,\n    }).then(() => this._verificationEmailSent(), (err) => {\n      // Do this before setProperties because changing it clears errors.\n      this._password = '';\n\n      this.setProperties({\n        _requestInProgress: false,\n        _error: err && err.body && err.body.message ? err.body.message : 'Unknown error'\n      });\n    });\n  }\n\n  _handleResendVerifyEmail() {\n    if (!this.email) {\n      this.$.email.invalid = true;\n      return;\n    }\n\n    this.hass.callApi('post', 'cloud/resend_confirm', {\n      email: this.email,\n    }).then(() => this._verificationEmailSent(), err => this.setProperties({\n      _error: err && err.body && err.body.message ? err.body.message : 'Unknown error'\n    }));\n  }\n\n  _verificationEmailSent() {\n    this.setProperties({\n      _requestInProgress: false,\n      _password: '',\n    });\n    this.fire('cloud-done', {\n      flashMessage: 'Account created! Check your email for instructions on how to activate your account.'\n    });\n  }\n}\n\ncustomElements.define('ha-config-cloud-register', HaConfigCloudRegister);\n","import '@polymer/app-route/app-route.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport './ha-config-cloud-account.js';\nimport './ha-config-cloud-forgot-password.js';\nimport './ha-config-cloud-login.js';\nimport './ha-config-cloud-register.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\nconst LOGGED_IN_URLS = [\n  '/cloud/account',\n];\nconst NOT_LOGGED_IN_URLS = [\n  '/cloud/login',\n  '/cloud/register',\n  '/cloud/forgot-password',\n];\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigCloud extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n  <app-route route=\"[[route]]\" pattern=\"/cloud/:page\" data=\"{{_routeData}}\" tail=\"{{_routeTail}}\"></app-route>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;account&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-account hass=\"[[hass]]\" account=\"[[account]]\" is-wide=\"[[isWide]]\"></ha-config-cloud-account>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;login&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-login page-name=\"login\" hass=\"[[hass]]\" is-wide=\"[[isWide]]\" email=\"{{_loginEmail}}\" flash-message=\"{{_flashMessage}}\"></ha-config-cloud-login>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;register&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-register page-name=\"register\" hass=\"[[hass]]\" is-wide=\"[[isWide]]\" email=\"{{_loginEmail}}\"></ha-config-cloud-register>\n  </template>\n\n  <template is=\"dom-if\" if=\"[[_equals(_routeData.page, &quot;forgot-password&quot;)]]\" restamp=\"\">\n    <ha-config-cloud-forgot-password page-name=\"forgot-password\" hass=\"[[hass]]\" email=\"{{_loginEmail}}\"></ha-config-cloud-forgot-password>\n  </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      loadingAccount: {\n        type: Boolean,\n        value: false\n      },\n      account: {\n        type: Object,\n      },\n      _flashMessage: {\n        type: String,\n        value: '',\n      },\n\n      route: Object,\n\n      _routeData: Object,\n      _routeTail: Object,\n      _loginEmail: String,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_checkRoute(route, account)'\n    ];\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('cloud-done', (ev) => {\n      this._flashMessage = ev.detail.flashMessage;\n      this.navigate('/config/cloud/login');\n    });\n  }\n\n  _checkRoute(route) {\n    if (!route || route.path.substr(0, 6) !== '/cloud') return;\n\n    this._debouncer = Debouncer.debounce(\n      this._debouncer,\n      timeOut.after(0),\n      () => {\n        if (!this.account && !NOT_LOGGED_IN_URLS.includes(route.path)) {\n          this.navigate('/config/cloud/login', true);\n        } else if (this.account && !LOGGED_IN_URLS.includes(route.path)) {\n          this.navigate('/config/cloud/account', true);\n        }\n      }\n    );\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-config-cloud', HaConfigCloud);\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\n\nimport '../../../layouts/hass-subpage.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigManager extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n  <style include=\"iron-flex ha-style\">\n    paper-button {\n      color: var(--primary-color);\n      font-weight: 500;\n      top: 3px;\n      margin-right: -.57em;\n    }\n    paper-card:last-child {\n      margin-top: 12px;\n    }\n    .config-entry-row {\n      display: flex;\n      padding: 0 16px;\n    }\n  </style>\n\n  <hass-subpage header=\"Integrations\">\n    <template is=\"dom-if\" if=\"[[_progress.length]]\">\n      <ha-config-section>\n        <span slot=\"header\">Discovered</span>\n        <paper-card>\n          <template is=\"dom-repeat\" items=\"[[_progress]]\">\n            <div class=\"config-entry-row\">\n              <paper-item-body>\n                [[_computeIntegrationTitle(localize, item.handler)]]\n              </paper-item-body>\n              <paper-button on-click=\"_continueFlow\">Configure</paper-button>\n            </div>\n          </template>\n        </paper-card>\n      </ha-config-section>\n    </template>\n\n    <ha-config-section>\n      <span slot=\"header\">Configured</span>\n      <paper-card>\n        <template is=\"dom-if\" if=\"[[!_entries.length]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body two-line>\n              <div>Nothing configured yet</div>\n            </paper-item-body>\n          </div>\n        </template>\n        <template is=\"dom-repeat\" items=\"[[_entries]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body two-line>\n              <div>[[_computeIntegrationTitle(localize, item.domain)]]: [[item.title]]</div>\n              <div secondary>[[item.state]] – added by [[item.source]]</div>\n            </paper-item-body>\n            <paper-button on-click=\"_removeEntry\">Remove</paper-button>\n          </div>\n        </template>\n      </paper-card>\n    </ha-config-section>\n\n    <ha-config-section>\n      <span slot=\"header\">Set up a new integration</span>\n      <paper-card>\n        <template is=\"dom-repeat\" items=\"[[_handlers]]\">\n          <div class=\"config-entry-row\">\n            <paper-item-body>\n              [[_computeIntegrationTitle(localize, item)]]\n            </paper-item-body>\n            <paper-button on-click=\"_createFlow\">Configure</paper-button>\n          </div>\n        </template>\n      </paper-card>\n    </ha-config-section>\n  </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      /**\n       * Existing entries.\n       */\n      _entries: Array,\n\n      /**\n       * Current flows that are in progress and have not been started by a user.\n       * For example, can be discovered devices that require more config.\n       */\n      _progress: Array,\n\n      _handlers: Array,\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._loadData();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire('register-dialog', {\n        dialogShowEvent: 'show-config-flow',\n        dialogTag: 'ha-config-flow',\n        dialogImport: () => import('./ha-config-flow.js'),\n      });\n    }\n\n    this.hass.connection.subscribeEvents(() => {\n      this._debouncer = Debouncer.debounce(\n        this._debouncer,\n        timeOut.after(500),\n        () => this._loadData()\n      );\n    }, 'config_entry_discovered').then((unsub) => { this._unsubEvents = unsub; });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._unsubEvents) this._unsubEvents();\n  }\n\n  _createFlow(ev) {\n    this.fire('show-config-flow', {\n      hass: this.hass,\n      newFlowForHandler: ev.model.item,\n      dialogClosedCallback: () => this._loadData(),\n    });\n  }\n\n  _continueFlow(ev) {\n    this.fire('show-config-flow', {\n      hass: this.hass,\n      continueFlowId: ev.model.item.flow_id,\n      dialogClosedCallback: () => this._loadData(),\n    });\n  }\n\n  _removeEntry(ev) {\n    if (!confirm('Are you sure you want to delete this integration?')) return;\n\n    const entryId = ev.model.item.entry_id;\n\n    this.hass.callApi('delete', `config/config_entries/entry/${entryId}`)\n      .then((result) => {\n        this._entries = this._entries.filter(entry => entry.entry_id !== entryId);\n        if (result.require_restart) {\n          alert('Restart Home Assistant to finish removing this integration');\n        }\n      });\n  }\n\n  _loadData() {\n    this._loadEntries();\n    this._loadDiscovery();\n    this.hass.callApi('get', 'config/config_entries/flow_handlers')\n      .then((handlers) => { this._handlers = handlers; });\n  }\n\n  _loadEntries() {\n    this.hass.callApi('get', 'config/config_entries/entry')\n      .then((entries) => { this._entries = entries; });\n  }\n\n  _loadDiscovery() {\n    this.hass.callApi('get', 'config/config_entries/flow')\n      .then((progress) => { this._progress = progress; });\n  }\n\n  _computeIntegrationTitle(localize, integration) {\n    return localize(`component.${integration}.config.title`);\n  }\n}\n\ncustomElements.define('ha-config-entries', HaConfigManager);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigSectionCore extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .validate-container {\n        @apply --layout-vertical;\n        @apply --layout-center-center;\n        height: 140px;\n      }\n\n      .validate-result {\n        color: var(--google-green-500);\n        font-weight: 500;\n        margin-bottom: 1em;\n      }\n\n      .config-invalid {\n        margin: 1em 0;\n      }\n\n      .config-invalid .text {\n        color: var(--google-red-500);\n        font-weight: 500;\n      }\n\n      .config-invalid paper-button {\n        float: right;\n      }\n\n      .validate-log {\n        white-space: pre-wrap;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.core.header')]]</span>\n      <span slot=\"introduction\">[[localize('ui.panel.config.core.section.core.introduction')]]</span>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.validation.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.validation.introduction')]]\n          <template is=\"dom-if\" if=\"[[!validateLog]]\">\n            <div class=\"validate-container\">\n              <template is=\"dom-if\" if=\"[[!validating]]\">\n                <template is=\"dom-if\" if=\"[[isValid]]\">\n                  <div class=\"validate-result\" id=\"result\">\n                    [[localize('ui.panel.config.core.section.core.validation.valid')]]\n                  </div>\n                </template>\n                <paper-button raised=\"\" on-click=\"validateConfig\">\n                  [[localize('ui.panel.config.core.section.core.validation.check_config')]]\n                </paper-button>\n              </template>\n              <template is=\"dom-if\" if=\"[[validating]]\">\n                <paper-spinner active=\"\"></paper-spinner>\n              </template>\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[validateLog]]\">\n            <div class=\"config-invalid\">\n              <span class=\"text\">\n                [[localize('ui.panel.config.core.section.core.validation.invalid')]]\n              </span>\n              <paper-button raised=\"\" on-click=\"validateConfig\">\n                [[localize('ui.panel.config.core.section.core.validation.check_config')]]\n              </paper-button>\n            </div>\n            <div id=\"configLog\" class=\"validate-log\">[[validateLog]]</div>\n          </template>\n        </div>\n      </paper-card>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.reloading.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.reloading.introduction')]]\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"homeassistant\" service=\"reload_core_config\">[[localize('ui.panel.config.core.section.core.reloading.core')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"group\" service=\"reload\" hidden$=\"[[!groupLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.group')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"automation\" service=\"reload\" hidden$=\"[[!automationLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.automation')]]\n          </ha-call-service-button>\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"script\" service=\"reload\" hidden$=\"[[!scriptLoaded(hass)]]\">[[localize('ui.panel.config.core.section.core.reloading.script')]]\n          </ha-call-service-button>\n        </div>\n      </paper-card>\n\n      <paper-card heading=\"[[localize('ui.panel.config.core.section.core.server_management.heading')]]\">\n        <div class=\"card-content\">\n          [[localize('ui.panel.config.core.section.core.server_management.introduction')]]\n        </div>\n        <div class=\"card-actions warning\">\n          <ha-call-service-button class=\"warning\" hass=\"[[hass]]\" domain=\"homeassistant\" service=\"restart\">[[localize('ui.panel.config.core.section.core.server_management.restart')]]\n          </ha-call-service-button>\n          <ha-call-service-button class=\"warning\" hass=\"[[hass]]\" domain=\"homeassistant\" service=\"stop\">[[localize('ui.panel.config.core.section.core.server_management.stop')]]\n          </ha-call-service-button>\n        </div>\n      </paper-card>\n\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      validating: {\n        type: Boolean,\n        value: false,\n      },\n\n      isValid: {\n        type: Boolean,\n        value: null,\n      },\n\n      validateLog: {\n        type: String,\n        value: '',\n      },\n    };\n  }\n\n  groupLoaded(hass) {\n    return isComponentLoaded(hass, 'group');\n  }\n\n  automationLoaded(hass) {\n    return isComponentLoaded(hass, 'automation');\n  }\n\n  scriptLoaded(hass) {\n    return isComponentLoaded(hass, 'script');\n  }\n\n  validateConfig() {\n    this.validating = true;\n    this.validateLog = '';\n    this.isValid = null;\n\n    this.hass.callApi('POST', 'config/core/check_config').then((result) => {\n      this.validating = false;\n      this.isValid = result.result === 'valid';\n\n      if (!this.isValid) {\n        this.validateLog = result.errors;\n      }\n    });\n  }\n}\n\ncustomElements.define('ha-config-section-core', HaConfigSectionCore);\n","import '@polymer/paper-toggle-button/paper-toggle-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaPushNotificationsToggle extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <paper-toggle-button hidden$=\"[[!pushSupported]]\" disabled=\"[[loading]]\" checked=\"{{pushChecked}}\"></paper-toggle-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: { type: Object, value: null },\n      pushSupported: {\n        type: Boolean,\n        readOnly: true,\n        notify: true,\n        value: (\n          'serviceWorker' in navigator && 'PushManager' in window &&\n            (document.location.protocol === 'https:' ||\n              document.location.hostname === 'localhost' ||\n              document.location.hostname === '127.0.0.1')\n        )\n      },\n      pushChecked: {\n        type: Boolean,\n        value: 'Notification' in window && Notification.permission === 'granted',\n        observer: 'handlePushChange',\n      },\n      loading: {\n        type: Boolean,\n        value: true,\n      }\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!this.pushSupported) return;\n\n    navigator.serviceWorker.ready.then(\n      (reg) => {\n        reg.pushManager.getSubscription().then((subscription) => {\n          this.loading = false;\n          this.pushChecked = !!subscription;\n        });\n      },\n      () => {\n        // no service worker.\n        this._setPushSupported(false);\n      }\n    );\n  }\n  handlePushChange(pushChecked) {\n    if (!this.pushSupported) return;\n    if (pushChecked) {\n      this.subscribePushNotifications();\n    } else {\n      this.unsubscribePushNotifications();\n    }\n  }\n  subscribePushNotifications() {\n    navigator.serviceWorker.ready\n      .then(reg => reg.pushManager.subscribe({ userVisibleOnly: true }))\n      .then(\n        (sub) => {\n          let browserName;\n          if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {\n            browserName = 'firefox';\n          } else {\n            browserName = 'chrome';\n          }\n\n          return this.hass.callApi('POST', 'notify.html5', {\n            subscription: sub,\n            browser: browserName\n          });\n        },\n        (err) => {\n          let message;\n          if (err.message && err.message.indexOf('gcm_sender_id') !== -1) {\n            message = 'Please setup the notify.html5 platform.';\n          } else {\n            message = 'Notification registration failed.';\n          }\n\n          /* eslint-disable no-console */\n          console.error(err);\n          /* eslint-enable no-console */\n\n          this.fire('hass-notification', { message: message });\n          this.pushChecked = false;\n        }\n      );\n  }\n  unsubscribePushNotifications() {\n    navigator.serviceWorker.ready\n      .then(reg => reg.pushManager.getSubscription())\n      .then((sub) => {\n        if (!sub) return Promise.resolve();\n\n        return this.hass\n          .callApi('DELETE', 'notify.html5', { subscription: sub })\n          .then(() => {\n            sub.unsubscribe();\n          });\n      })\n      .catch((err) => {\n        /* eslint-disable no-console */\n        console.error('Error in unsub push', err);\n        /* eslint-enable no-console */\n\n        this.fire('hass-notification', {\n          message: 'Failed unsubscribing for push notifications.'\n        });\n      });\n  }\n}\n\ncustomElements.define('ha-push-notifications-toggle', HaPushNotificationsToggle);\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport '@polymer/iron-label/iron-label.js';\nimport '@polymer/paper-card/paper-card.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-push-notifications-toggle.js';\n\nimport '../ha-config-section.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigSectionPushNotifications extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex iron-flex-alignment iron-positioning\">\n      ha-push-notifications-toggle {\n        margin-left: 16px;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.push_notifications.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.push_notifications.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <iron-label class=\"horizontal layout\">\n            [[localize('ui.panel.config.core.section.push_notifications.push_notifications')]]\n            <ha-push-notifications-toggle hass=\"[[hass]]\" push-supported=\"{{pushSupported}}\"></ha-push-notifications-toggle>\n          </iron-label>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      pushSupported: {\n        type: Boolean,\n        notify: true,\n      },\n    };\n  }\n}\n\ncustomElements.define('ha-config-section-push-notifications', HaConfigSectionPushNotifications);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigSectionThemes extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.themes.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.themes.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <paper-dropdown-menu label=\"[[localize('ui.panel.config.core.section.themes.header')]]\" dynamic-align=\"\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n              <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n                <paper-item>[[theme]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n\n      themes: {\n        type: Array,\n        computed: 'computeThemes(hass)',\n      },\n\n      selectedTheme: {\n        type: Number,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      'selectionChanged(hass, selectedTheme)',\n    ];\n  }\n\n  ready() {\n    super.ready();\n    if (this.hass.selectedTheme && this.themes.indexOf(this.hass.selectedTheme) > 0) {\n      this.selectedTheme = this.themes.indexOf(this.hass.selectedTheme);\n    } else if (!this.hass.selectedTheme) {\n      this.selectedTheme = 0;\n    }\n  }\n\n  computeThemes(hass) {\n    if (!hass) return [];\n    return ['Backend-selected', 'default'].concat(Object.keys(hass.themes.themes).sort());\n  }\n\n  selectionChanged(hass, selection) {\n    if (selection > 0 && selection < this.themes.length) {\n      if (hass.selectedTheme !== this.themes[selection]) {\n        this.fire('settheme', this.themes[selection]);\n      }\n    } else if (selection === 0 && hass.selectedTheme !== '') {\n      this.fire('settheme', '');\n    }\n  }\n}\n\ncustomElements.define('ha-config-section-themes', HaConfigSectionThemes);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport '../ha-config-section.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HaConfigSectionTranslation extends\n  LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">[[localize('ui.panel.config.core.section.translation.header')]]</span>\n      <span slot=\"introduction\">\n        [[localize('ui.panel.config.core.section.translation.introduction')]]\n      </span>\n\n      <paper-card>\n        <div class=\"card-content\">\n          <paper-dropdown-menu label=\"[[localize('ui.panel.config.core.section.translation.language')]]\" dynamic-align=\"\">\n            <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"language-tag\" selected=\"{{languageSelection}}\">\n              <template is=\"dom-repeat\" items=\"[[languages]]\">\n                <paper-item language-tag$=\"[[item.tag]]\">[[item.nativeName]]</paper-item>\n              </template>\n            </paper-listbox>\n          &gt;</paper-dropdown-menu>\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n      languageSelection: {\n        type: String,\n        observer: 'languageSelectionChanged',\n      },\n      languages: {\n        type: Array,\n        computed: 'computeLanguages(hass)',\n      },\n    };\n  }\n  static get observers() { return ['setLanguageSelection(language)']; }\n\n  computeLanguages(hass) {\n    if (!hass || !hass.translationMetadata) {\n      return [];\n    }\n    return Object.keys(hass.translationMetadata.translations).map(key => ({\n      tag: key,\n      nativeName: hass.translationMetadata.translations[key].nativeName,\n    }));\n  }\n\n  setLanguageSelection(language) {\n    this.languageSelection = language;\n  }\n\n  languageSelectionChanged(newVal) {\n    // Only fire event if language was changed. This prevents select updates when\n    // responding to hass changes.\n    if (newVal !== this.language) {\n      this.fire('hass-language-select', { language: newVal });\n    }\n  }\n}\n\ncustomElements.define('ha-config-section-translation', HaConfigSectionTranslation);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/ha-app-layout.js';\nimport '../../../resources/ha-style.js';\n\nimport './ha-config-section-core.js';\nimport './ha-config-section-push-notifications.js';\nimport './ha-config-section-themes.js';\nimport './ha-config-section-translation.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigCore extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 32px;\n      }\n\n      .border {\n        margin: 32px auto 0;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n        max-width: 1040px;\n      }\n\n      .narrow .border {\n        max-width: 640px;\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.core.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class$=\"[[computeClasses(isWide)]]\">\n        <ha-config-section-core is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-core>\n\n        <template is=\"dom-if\" if=\"[[pushSupported]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-push-notifications is-wide=\"[[isWide]]\" hass=\"[[hass]]\" push-supported=\"{{pushSupported}}\"></ha-config-section-push-notifications>\n        </template>\n        <template is=\"dom-if\" if=\"[[computeIsTranslationLoaded(hass)]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-translation is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-translation>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[computeIsThemesLoaded(hass)]]\">\n          <div class=\"border\"></div>\n          <ha-config-section-themes is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ha-config-section-themes>\n        </template>\n\n      </div>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      pushSupported: {\n        type: Boolean,\n        value: true,\n      },\n    };\n  }\n\n  computeClasses(isWide) {\n    return isWide ? 'content' : 'content narrow';\n  }\n\n  computeIsZwaveLoaded(hass) {\n    return isComponentLoaded(hass, 'config.zwave');\n  }\n\n  computeIsTranslationLoaded(hass) {\n    return hass.translationMetadata &&\n      Object.keys(hass.translationMetadata.translations).length;\n  }\n\n  computeIsThemesLoaded(hass) {\n    return hass.themes && hass.themes.themes &&\n      Object.keys(hass.themes.themes).length;\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-config-core', HaConfigCore);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateName from '../../common/entity/compute_state_name.js';\n\nclass HaEntityConfig extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      paper-card {\n        display: block;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        padding-bottom: 24px;\n      }\n\n      .form-placeholder {\n        @apply --layout-vertical;\n        @apply --layout-center-center;\n        height: 96px;\n      }\n\n      [hidden]: {\n        display: none;\n      }\n\n      .card-actions {\n        @apply --layout-horizontal;\n        @apply --layout-justified;\n      }\n    </style>\n    <paper-card>\n      <div class=\"card-content\">\n        <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"[[label]]\" class=\"flex\" disabled=\"[[!entities.length]]\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedEntity}}\">\n              <template is=\"dom-repeat\" items=\"[[entities]]\" as=\"state\">\n                <paper-item>[[computeSelectCaption(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n\n        <div class=\"form-container\">\n          <template is=\"dom-if\" if=\"[[computeShowPlaceholder(formState)]]\">\n            <div class=\"form-placeholder\">\n              <template is=\"dom-if\" if=\"[[computeShowNoDevices(formState)]]\">\n                No entities found! :-(\n              </template>\n\n              <template is=\"dom-if\" if=\"[[computeShowSpinner(formState)]]\">\n                <paper-spinner active=\"\" alt=\"[[formState]]\"></paper-spinner>\n                [[formState]]\n              </template>\n            </div>\n          </template>\n\n          <div hidden$=\"[[!computeShowForm(formState)]]\" id=\"form\"></div>\n        </div>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button on-click=\"saveEntity\" disabled=\"[[computeShowPlaceholder(formState)]]\">SAVE</paper-button>\n        <template is=\"dom-if\" if=\"[[allowDelete]]\">\n          <paper-button class=\"warning\" on-click=\"deleteEntity\" disabled=\"[[computeShowPlaceholder(formState)]]\">DELETE</paper-button>\n        </template>\n      </div>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: 'hassChanged',\n      },\n\n      label: {\n        type: String,\n        value: 'Device',\n      },\n\n      entities: {\n        type: Array,\n        observer: 'entitiesChanged',\n      },\n\n      allowDelete: {\n        type: Boolean,\n        value: false,\n      },\n\n      selectedEntity: {\n        type: Number,\n        value: -1,\n        observer: 'entityChanged',\n      },\n\n      formState: {\n        type: String,\n        // no-devices, loading, saving, editing\n        value: 'no-devices',\n      },\n\n      config: {\n        type: Object,\n      }\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.formEl = document.createElement(this.config.component);\n    this.formEl.hass = this.hass;\n    this.$.form.appendChild(this.formEl);\n    this.entityChanged(this.selectedEntity);\n  }\n\n  computeSelectCaption(stateObj) {\n    return this.config.computeSelectCaption ?\n      this.config.computeSelectCaption(stateObj) :\n      computeStateName(stateObj);\n  }\n\n  computeShowNoDevices(formState) {\n    return formState === 'no-devices';\n  }\n\n  computeShowSpinner(formState) {\n    return formState === 'loading' || formState === 'saving';\n  }\n\n  computeShowPlaceholder(formState) {\n    return formState !== 'editing';\n  }\n\n  computeShowForm(formState) {\n    return formState === 'editing';\n  }\n\n  hassChanged(hass) {\n    if (this.formEl) {\n      this.formEl.hass = hass;\n    }\n  }\n\n  entitiesChanged(entities, oldEntities) {\n    if (entities.length === 0) {\n      this.formState = 'no-devices';\n      return;\n    } else if (!oldEntities) {\n      this.selectedEntity = 0;\n      return;\n    }\n\n    var oldEntityId = oldEntities[this.selectedEntity].entity_id;\n\n    var newIndex = entities.findIndex(function (ent) {\n      return ent.entity_id === oldEntityId;\n    });\n\n    if (newIndex === -1) {\n      this.selectedEntity = 0;\n    } else if (newIndex !== this.selectedEntity) {\n      // Entity moved index\n      this.selectedEntity = newIndex;\n    }\n  }\n\n  entityChanged(index) {\n    if (!this.entities || !this.formEl) return;\n    var entity = this.entities[index];\n    if (!entity) return;\n\n    this.formState = 'loading';\n    var el = this;\n    this.formEl.loadEntity(entity)\n      .then(function () {\n        el.formState = 'editing';\n      });\n  }\n\n  saveEntity() {\n    this.formState = 'saving';\n    var el = this;\n    this.formEl.saveEntity()\n      .then(function () {\n        el.formState = 'editing';\n      });\n  }\n}\n\ncustomElements.define('ha-entity-config', HaEntityConfig);\n","/**\n * Sort function to help sort states by name\n *\n * Usage:\n *   const states = [state1, state2]\n *   states.sort(statesSortByName);\n */\nimport computeStateName from './compute_state_name.js';\n\nexport default function sortStatesByName(entityA, entityB) {\n  const nameA = computeStateName(entityA);\n  const nameB = computeStateName(entityB);\n  if (nameA < nameB) {\n    return -1;\n  }\n  if (nameA > nameB) {\n    return 1;\n  }\n  return 0;\n}\n","import '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCustomizeArray extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      paper-dropdown-menu {\n        margin: -9px 0;\n      }\n    </style>\n    <paper-dropdown-menu label=\"[[item.description]]\" disabled=\"[[item.secondary]]\" selected-item-label=\"{{item.value}}\" dynamic-align=\"\">\n      <paper-listbox slot=\"dropdown-content\" selected=\"[[computeSelected(item)]]\">\n        <template is=\"dom-repeat\" items=\"[[getOptions(item)]]\" as=\"option\">\n          <paper-item>[[option]]</paper-item>\n        </template>\n      </paper-listbox>\n    </paper-dropdown-menu>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n\n  getOptions(item) {\n    const domain = item.domain || '*';\n    const options = item.options[domain] || item.options['*'];\n    if (!options) {\n      this.item.type = 'string';\n      this.fire('item-changed');\n      return [];\n    }\n    return options.sort();\n  }\n\n  computeSelected(item) {\n    const options = this.getOptions(item);\n    return options.indexOf(item.value);\n  }\n}\ncustomElements.define('ha-customize-array', HaCustomizeArray);\n","import '@polymer/paper-checkbox/paper-checkbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeBoolean extends PolymerElement {\n  static get template() {\n    return html`\n    <paper-checkbox disabled=\"[[item.secondary]]\" checked=\"{{item.value}}\">\n      [[item.description]]\n    </paper-checkbox>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-boolean', HaCustomizeBoolean);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        @apply --layout-horizontal;\n      }\n      .icon-image {\n        border: 1px solid grey;\n        padding: 8px;\n        margin-right: 20px;\n        margin-top: 10px;\n      }\n    </style>\n    <iron-icon class=\"icon-image\" icon=\"[[item.value]]\"></iron-icon>\n    <paper-input disabled=\"[[item.secondary]]\" label=\"icon\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-icon', HaCustomizeIcon);\n","import '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeKeyValue extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        @apply --layout-horizontal;\n      }\n      paper-input {\n        @apply --layout-flex;\n      }\n      .key {\n        padding-right: 20px;\n      }\n    </style>\n    <paper-input disabled=\"[[item.secondary]]\" class=\"key\" label=\"Attribute name\" value=\"{{item.attribute}}\">\n    </paper-input>\n    <paper-input disabled=\"[[item.secondary]]\" label=\"Attribute value\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n}\ncustomElements.define('ha-customize-key-value', HaCustomizeKeyValue);\n","import '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaCustomizeString extends PolymerElement {\n  static get template() {\n    return html`\n    <paper-input disabled=\"[[item.secondary]]\" label=\"[[getLabel(item)]]\" value=\"{{item.value}}\">\n    </paper-input>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      }\n    };\n  }\n\n  getLabel(item) {\n    return item.description + (item.type === 'json' ? ' (JSON formatted)' : '');\n  }\n}\ncustomElements.define('ha-customize-string', HaCustomizeString);\n","import '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport hassAttributeUtil from '../../../util/hass-attributes-util.js';\nimport '../ha-form-style.js';\nimport './types/ha-customize-array.js';\nimport './types/ha-customize-boolean.js';\nimport './types/ha-customize-icon.js';\nimport './types/ha-customize-key-value.js';\nimport './types/ha-customize-string.js';\n\nclass HaCustomizeAttribute extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"ha-form-style\">\n      :host {\n        display: block;\n        position: relative;\n        padding-right: 40px;\n      }\n\n      .button {\n        position: absolute;\n        margin-top: -20px;\n        top: 50%;\n        right: 0;\n      }\n    </style>\n    <div id=\"wrapper\" class=\"form-group\"></div>\n    <paper-icon-button class=\"button\" icon=\"[[getIcon(item.secondary)]]\" on-click=\"tapButton\"></paper-icon-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notify: true,\n        observer: 'itemObserver',\n      }\n    };\n  }\n\n  tapButton() {\n    if (this.item.secondary) {\n      this.item = Object.assign({}, this.item, { secondary: false });\n    } else {\n      this.item = Object.assign({}, this.item, { closed: true });\n    }\n  }\n\n  getIcon(secondary) {\n    return secondary ? 'hass:pencil' : 'hass:close';\n  }\n\n  itemObserver(item) {\n    const wrapper = this.$.wrapper;\n    const tag = hassAttributeUtil.TYPE_TO_TAG[item.type].toUpperCase();\n    let child;\n    if (wrapper.lastChild && wrapper.lastChild.tagName === tag) {\n      child = wrapper.lastChild;\n    } else {\n      if (wrapper.lastChild) {\n        wrapper.removeChild(wrapper.lastChild);\n      }\n      // Creating an element with upper case works fine in Chrome, but in FF it doesn't immediately\n      // become a defined Custom Element. Polymer does that in some later pass.\n      this.$.child = child = document.createElement(tag.toLowerCase());\n      child.className = 'form-control';\n      child.addEventListener('item-changed', () => {\n        this.item = Object.assign({}, child.item);\n      });\n    }\n    child.setProperties({ item: this.item });\n    if (child.parentNode === null) {\n      wrapper.appendChild(child);\n    }\n  }\n}\ncustomElements.define('ha-customize-attribute', HaCustomizeAttribute);\n","import { MutableData } from '@polymer/polymer/lib/mixins/mutable-data.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-customize-attribute.js';\n\nclass HaFormCustomizeAttributes extends MutableData(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <template is=\"dom-repeat\" items=\"{{attributes}}\" mutable-data=\"\">\n      <ha-customize-attribute item=\"{{item}}\" hidden$=\"[[item.closed]]\">\n      </ha-customize-attribute>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      attributes: {\n        type: Array,\n        notify: true,\n      },\n    };\n  }\n}\ncustomElements.define('ha-form-customize-attributes', HaFormCustomizeAttributes);\n","import '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport hassAttributeUtil from '../../../util/hass-attributes-util.js';\nimport './ha-form-customize-attributes.js';\n\nimport computeStateDomain from '../../../common/entity/compute_state_domain';\n\nclass HaFormCustomize extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style ha-form-style\">\n      .warning {\n        color: red;\n      }\n\n      .attributes-text {\n        padding-left: 20px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[computeShowWarning(localConfig, globalConfig)]]\">\n      <div class=\"warning\">\n        It seems that your configuration.yaml doesn't properly include customize.yaml<br>\n        Changes made here won't affect your configuration.\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasLocalAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes are already set in customize.yaml<br>\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{localAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasGlobalAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes are customized from outside of customize.yaml<br>\n        Possibly via a domain, a glob or a different include.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{globalAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasExistingAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes of the entity are set programatically.<br>\n        You can override them if you like.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{existingAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <template is=\"dom-if\" if=\"[[hasNewAttributes]]\">\n      <h4 class=\"attributes-text\">\n        The following attributes weren't set. Set them if you like.\n      </h4>\n      <ha-form-customize-attributes attributes=\"{{newAttributes}}\"></ha-form-customize-attributes>\n    </template>\n    <div class=\"form-group\">\n      <paper-dropdown-menu label=\"Pick an attribute to override\" class=\"flex\" dynamic-align=\"\">\n        <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedNewAttribute}}\">\n          <template is=\"dom-repeat\" items=\"[[newAttributesOptions]]\" as=\"option\">\n            <paper-item>[[option]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entity: Object,\n\n      localAttributes: {\n        type: Array,\n        computed: 'computeLocalAttributes(localConfig)',\n      },\n      hasLocalAttributes: Boolean,\n\n      globalAttributes: {\n        type: Array,\n        computed: 'computeGlobalAttributes(localConfig, globalConfig)',\n      },\n      hasGlobalAttributes: Boolean,\n\n      existingAttributes: {\n        type: Array,\n        computed: 'computeExistingAttributes(localConfig, globalConfig, entity)',\n      },\n      hasExistingAttributes: Boolean,\n\n      newAttributes: {\n        type: Array,\n        value: [],\n      },\n      hasNewAttributes: Boolean,\n\n      newAttributesOptions: Array,\n      selectedNewAttribute: {\n        type: Number,\n        value: -1,\n        observer: 'selectedNewAttributeObserver',\n      },\n\n      localConfig: Object,\n      globalConfig: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      'attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)',\n    ];\n  }\n\n  _initOpenObject(key, value, secondary, config) {\n    return Object.assign({\n      attribute: key,\n      value: value,\n      closed: false,\n      domain: computeStateDomain(this.entity),\n      secondary: secondary,\n      description: key,\n    }, config);\n  }\n\n  loadEntity(entity) {\n    this.entity = entity;\n    return this.hass.callApi('GET', 'config/customize/config/' + entity.entity_id)\n      .then((data) => {\n        this.localConfig = data.local;\n        this.globalConfig = data.global;\n        this.newAttributes = [];\n      });\n  }\n\n  saveEntity() {\n    const data = {};\n    const attrs = this.localAttributes\n      .concat(this.globalAttributes, this.existingAttributes, this.newAttributes);\n    attrs.forEach((attr) => {\n      if (attr.closed || attr.secondary || !attr.attribute || !attr.value) return;\n      const value = attr.type === 'json' ? JSON.parse(attr.value) : attr.value;\n      if (!value) return;\n      data[attr.attribute] = value;\n    });\n\n    const objectId = this.entity.entity_id;\n    return this.hass.callApi('POST', 'config/customize/config/' + objectId, data);\n  }\n\n  _computeSingleAttribute(key, value, secondary) {\n    const config = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key]\n        || { type: hassAttributeUtil.UNKNOWN_TYPE };\n    return this._initOpenObject(key, config.type === 'json' ? JSON.stringify(value) : value, secondary, config);\n  }\n\n  _computeAttributes(config, keys, secondary) {\n    return keys.map(key => this._computeSingleAttribute(key, config[key], secondary));\n  }\n\n  computeLocalAttributes(localConfig) {\n    if (!localConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const result = this._computeAttributes(localConfig, localKeys, false);\n    return result;\n  }\n\n  computeGlobalAttributes(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig).filter(key => !localKeys.includes(key));\n    return this._computeAttributes(globalConfig, globalKeys, true);\n  }\n\n  computeExistingAttributes(localConfig, globalConfig, entity) {\n    if (!localConfig || !globalConfig || !entity) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig);\n    const entityKeys = Object.keys(entity.attributes)\n      .filter(key => !localKeys.includes(key) && !globalKeys.includes(key));\n    return this._computeAttributes(entity.attributes, entityKeys, true);\n  }\n\n  computeShowWarning(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return false;\n    return Object.keys(localConfig)\n      .some(key => JSON.stringify(globalConfig[key]) !== JSON.stringify(localConfig[key]));\n  }\n\n  filterFromAttributes(attributes) {\n    return key => !attributes || attributes.every(attr => attr.attribute !== key || attr.closed);\n  }\n\n  getNewAttributesOptions(localAttributes, globalAttributes, existingAttributes, newAttributes) {\n    const knownKeys =\n        Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES)\n          .filter((key) => {\n            const conf = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key];\n            return conf && (!conf.domains || !this.entity ||\n                              conf.domains.includes(computeStateDomain(this.entity)));\n          })\n          .filter(this.filterFromAttributes(localAttributes))\n          .filter(this.filterFromAttributes(globalAttributes))\n          .filter(this.filterFromAttributes(existingAttributes))\n          .filter(this.filterFromAttributes(newAttributes));\n    return knownKeys.sort().concat('Other');\n  }\n\n  selectedNewAttributeObserver(selected) {\n    if (selected < 0) return;\n    const option = this.newAttributesOptions[selected];\n    if (selected === this.newAttributesOptions.length - 1) {\n      // The \"Other\" option.\n      const attr = this._initOpenObject('', '', false /* secondary */, { type: hassAttributeUtil.ADD_TYPE });\n      this.push('newAttributes', attr);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    let result = this.localAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('localAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.globalAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('globalAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.existingAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('existingAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.newAttributes.findIndex(attr => attr.attribute === option);\n    if (result >= 0) {\n      this.set('newAttributes.' + result + '.closed', false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    const attr = this._computeSingleAttribute(option, '', false /* secondary */);\n    this.push('newAttributes', attr);\n    this.selectedNewAttribute = -1;\n  }\n\n  attributesObserver() {\n    this.hasLocalAttributes =\n        this.localAttributes && this.localAttributes.some(attr => !attr.closed);\n    this.hasGlobalAttributes =\n        this.globalAttributes && this.globalAttributes.some(attr => !attr.closed);\n    this.hasExistingAttributes =\n        this.existingAttributes && this.existingAttributes.some(attr => !attr.closed);\n    this.hasNewAttributes =\n        this.newAttributes && this.newAttributes.some(attr => !attr.closed);\n    this.newAttributesOptions = this.getNewAttributesOptions(\n      this.localAttributes,\n      this.globalAttributes,\n      this.existingAttributes,\n      this.newAttributes\n    );\n  }\n}\ncustomElements.define('ha-form-customize', HaFormCustomize);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport '../ha-entity-config.js';\nimport './ha-form-customize.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport sortByName from '../../../common/entity/states_sort_by_name.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigCustomize extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n    </style>\n\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.customize.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class$=\"[[computeClasses(isWide)]]\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">Customization</span>\n          <span slot=\"introduction\">\n            Tweak per-entity attributes.<br>\n            Added/edited customizations will take effect immediately. Removed customizations will take effect when the entity is updated.\n          </span>\n          <ha-entity-config hass=\"[[hass]]\" label=\"Entity\" entities=\"[[entities]]\" config=\"[[entityConfig]]\">\n          </ha-entity-config>\n        </ha-config-section>\n      </div>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      entities: {\n        type: Array,\n        computed: 'computeEntities(hass)',\n      },\n\n      entityConfig: {\n        type: Object,\n        value: {\n          component: 'ha-form-customize',\n          computeSelectCaption: stateObj =>\n            computeStateName(stateObj) + ' (' + computeStateDomain(stateObj) + ')'\n        }\n      },\n    };\n  }\n\n  computeClasses(isWide) {\n    return isWide ? 'content' : 'content narrow';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n\n  computeEntities(hass) {\n    return Object.keys(hass.states)\n      .map(key => hass.states[key])\n      .sort(sortByName);\n  }\n}\ncustomElements.define('ha-config-customize', HaConfigCustomize);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigCloudMenu extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex\">\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <paper-card>\n      <paper-item on-click=\"_navigate\">\n        <paper-item-body two-line=\"\">\n          Home Assistant Cloud\n          <template is=\"dom-if\" if=\"[[account]]\">\n            <div secondary=\"\">Logged in as [[account.email]]</div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!account]]\">\n            <div secondary=\"\">Not logged in</div>\n          </template>\n        </paper-item-body>\n        <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n      </paper-item>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n    };\n  }\n\n  _navigate() {\n    this.navigate('/config/cloud');\n  }\n}\n\ncustomElements.define('ha-config-cloud-menu', HaConfigCloudMenu);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigEntriesMenu extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex\">\n      paper-card {\n        display: block;\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <paper-card>\n      <paper-item on-click=\"_navigate\">\n        <paper-item-body two-line=\"\">\n          Integrations\n          <div secondary=\"\">Manage connected devices and services</div>\n        </paper-item-body>\n        <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n      </paper-item>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n    };\n  }\n\n  _navigate() {\n    this.navigate('/config/integrations');\n  }\n}\n\ncustomElements.define('ha-config-entries-menu', HaConfigEntriesMenu);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigUsersMenu extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex\">\n      paper-card {\n        display: block;\n      }\n      a {\n        text-decoration: none;\n        color: var(--primary-text-color);\n      }\n    </style>\n    <paper-card>\n      <a href='/config/users'>\n        <paper-item>\n          <paper-item-body two-line>\n            [[localize('ui.panel.config.users.caption')]]\n            <div secondary>\n              [[localize('ui.panel.config.users.description')]]\n            </div>\n          </paper-item-body>\n          <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n        </paper-item>\n      </a>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n    };\n  }\n}\n\ncustomElements.define('ha-config-users-menu', HaConfigUsersMenu);\n","import '@polymer/iron-icon/iron-icon.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\n\nconst CORE_PAGES = [\n  'core',\n  'customize',\n];\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaConfigNavigation extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n  <style include=\"iron-flex\">\n    paper-card {\n      display: block;\n    }\n    paper-item {\n      cursor: pointer;\n    }\n  </style>\n  <paper-card>\n    <template is=\"dom-repeat\" items=\"[[pages]]\">\n      <template is=\"dom-if\" if=\"[[_computeLoaded(hass, item)]]\">\n        <paper-item on-click=\"_navigate\">\n          <paper-item-body two-line=\"\">\n            [[_computeCaption(item, localize)]]\n            <div secondary=\"\">[[_computeDescription(item, localize)]]</div>\n          </paper-item-body>\n          <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n        </paper-item>\n      </template>\n    </template>\n  </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      pages: {\n        type: Array,\n        value: [\n          'core',\n          'customize',\n          'automation',\n          'script',\n          'zwave',\n        ],\n      }\n    };\n  }\n\n  _computeLoaded(hass, page) {\n    return CORE_PAGES.includes(page) || isComponentLoaded(hass, page);\n  }\n\n  _computeCaption(page, localize) {\n    return localize(`ui.panel.config.${page}.caption`);\n  }\n\n  _computeDescription(page, localize) {\n    return localize(`ui.panel.config.${page}.description`);\n  }\n\n  _navigate(ev) {\n    this.navigate('/config/' + ev.model.item);\n  }\n}\n\ncustomElements.define('ha-config-navigation', HaConfigNavigation);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-menu-button.js';\n\nimport '../ha-config-section.js';\nimport './ha-config-cloud-menu.js';\nimport './ha-config-entries-menu.js';\nimport './ha-config-users-menu.js';\nimport './ha-config-navigation.js';\n\nimport isComponentLoaded from '../../../common/config/is_component_loaded.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigDashboard extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        padding-bottom: 32px;\n      }\n    </style>\n\n    <app-header-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <ha-menu-button narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\"></ha-menu-button>\n          <div main-title=\"\">[[localize('panel.configuration')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class=\"content\">\n        <ha-config-section is-wide=\"[[isWide]]\">\n          <span slot=\"header\">[[localize('ui.panel.config.header')]]</span>\n          <span slot=\"introduction\">[[localize('ui.panel.config.introduction')]]</span>\n\n          <template is=\"dom-if\" if=\"[[computeIsLoaded(hass, 'cloud')]]\">\n            <ha-config-cloud-menu hass=\"[[hass]]\" account=\"[[account]]\"></ha-config-cloud-menu>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[computeIsLoaded(hass, 'config.config_entries')]]\">\n            <ha-config-entries-menu hass=\"[[hass]]\"></ha-config-entries-menu>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[hass.user.is_owner]]\">\n            <ha-config-users-menu hass=\"[[hass]]\"></ha-config-users-menu>\n          </template>\n\n          <ha-config-navigation hass=\"[[hass]]\"></ha-config-navigation>\n        </ha-config-section>\n      </div>\n    </app-header-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      account: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n    };\n  }\n\n  computeIsLoaded(hass, component) {\n    return isComponentLoaded(hass, component);\n  }\n}\n\ncustomElements.define('ha-config-dashboard', HaConfigDashboard);\n","import { h, Component } from 'preact';\n\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '../ha-config-section.js';\n\nimport Script from './script/index.js';\n\nexport default class ScriptEditor extends Component {\n  constructor() {\n    super();\n\n    this.onChange = this.onChange.bind(this);\n    this.sequenceChanged = this.sequenceChanged.bind(this);\n  }\n\n  onChange(ev) {\n    this.props.onChange(Object.assign(\n      {}, this.props.script,\n      { [ev.target.name]: ev.target.value }\n    ));\n  }\n\n  sequenceChanged(sequence) {\n    this.props.onChange(Object.assign(\n      {}, this.props.script,\n      { sequence },\n    ));\n  }\n\n  render({ script, isWide, hass, localize }) {\n    const { alias, sequence } = script;\n\n    return (\n      <div>\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>{alias}</span>\n          <span slot='introduction'>\n            Use scripts to execute a sequence of actions.\n          </span>\n          <paper-card>\n            <div class='card-content'>\n              <paper-input\n                label=\"Name\"\n                name=\"alias\"\n                value={alias}\n                onvalue-changed={this.onChange}\n              />\n            </div>\n          </paper-card>\n        </ha-config-section>\n\n        <ha-config-section is-wide={isWide}>\n          <span slot='header'>Sequence</span>\n          <span slot='introduction'>\n            The sequence of actions of this script.\n            <p><a href=\"https://home-assistant.io/docs/scripts/\" target=\"_blank\">\n              Learn more about available actions.\n            </a></p>\n          </span>\n          <Script\n            script={sequence}\n            onChange={this.sequenceChanged}\n            hass={hass}\n            localize={localize}\n          />\n        </ha-config-section>\n      </div>\n    );\n  }\n}\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { h, render } from 'preact';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport Script from '../js/script.js';\nimport unmountPreact from '../../../common/preact/unmount.js';\n\nimport computeObjectId from '../../../common/entity/compute_object_id.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nfunction ScriptEditor(mountEl, props, mergeEl) {\n  return render(h(Script, props), mountEl, mergeEl);\n}\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaScriptEditor extends\n  LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      .errors {\n        padding: 20px;\n        font-weight: bold;\n        color: var(--google-red-500);\n      }\n      .content {\n        padding-bottom: 20px;\n      }\n      paper-card {\n        display: block;\n      }\n      .triggers,\n      .script {\n        margin-top: -16px;\n      }\n      .triggers paper-card,\n      .script paper-card {\n        margin-top: 16px;\n      }\n      .add-card paper-button {\n        display: block;\n        text-align: center;\n      }\n      .card-menu {\n        position: absolute;\n        top: 0;\n        right: 0;\n        z-index: 1;\n        color: var(--primary-text-color);\n      }\n      .card-menu paper-item {\n        cursor: pointer;\n      }\n      span[slot=introduction] a {\n        color: var(--primary-color);\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n        margin-bottom: -80px;\n        transition: margin-bottom .3s;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      paper-fab[dirty] {\n        margin-bottom: 0;\n      }\n    </style>\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"backTapped\"></paper-icon-button>\n          <div main-title=\"\">Script [[name]]</div>\n        </app-toolbar>\n      </app-header>\n      <div class=\"content\">\n        <template is=\"dom-if\" if=\"[[errors]]\">\n          <div class=\"errors\">[[errors]]</div>\n        </template>\n        <div id=\"root\"></div>\n      </div>\n      <paper-fab slot=\"fab\" is-wide$=\"[[isWide]]\" dirty$=\"[[dirty]]\" icon=\"hass:content-save\" title=\"Save\" on-click=\"saveScript\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      errors: {\n        type: Object,\n        value: null,\n      },\n\n      dirty: {\n        type: Boolean,\n        value: false,\n      },\n\n      config: {\n        type: Object,\n        value: null,\n      },\n\n      script: {\n        type: Object,\n        observer: 'scriptChanged',\n      },\n\n      creatingNew: {\n        type: Boolean,\n        observer: 'creatingNewChanged',\n      },\n\n      name: {\n        type: String,\n        computed: 'computeName(script)'\n      },\n\n      isWide: {\n        type: Boolean,\n        observer: '_updateComponent',\n      },\n\n      _rendered: {\n        type: Object,\n        value: null,\n      },\n\n      _renderScheduled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    this.configChanged = this.configChanged.bind(this);\n    super.ready(); // This call will initialize preact.\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._rendered) {\n      unmountPreact(this._rendered);\n      this._rendered = null;\n    }\n  }\n\n  configChanged(config) {\n    // onChange gets called a lot during initial rendering causing recursing calls.\n    if (this._rendered === null) return;\n    this.config = config;\n    this.errors = null;\n    this.dirty = true;\n    this._updateComponent();\n  }\n\n  scriptChanged(newVal, oldVal) {\n    if (!newVal) return;\n    if (!this.hass) {\n      setTimeout(() => this.scriptChanged(newVal, oldVal), 0);\n      return;\n    }\n    if (oldVal && oldVal.entity_id === newVal.entity_id) {\n      return;\n    }\n    this.hass.callApi('get', 'config/script/config/' + computeObjectId(newVal.entity_id))\n      .then((config) => {\n        // Normalize data: ensure sequence is a list\n        // Happens when people copy paste their scripts into the config\n        var value = config.sequence;\n        if (value && !Array.isArray(value)) {\n          config.sequence = [value];\n        }\n\n        this.dirty = false;\n        this.config = config;\n        this._updateComponent();\n      }, () => {\n        alert('Only scripts inside scripts.yaml are editable.');\n        history.back();\n      });\n  }\n\n  creatingNewChanged(newVal) {\n    if (!newVal) {\n      return;\n    }\n    this.dirty = false;\n    this.config = {\n      alias: 'New Script',\n      sequence: [\n        { service: '', data: {} },\n      ],\n    };\n    this._updateComponent();\n  }\n\n  backTapped() {\n    if (this.dirty &&\n        // eslint-disable-next-line\n        !confirm('You have unsaved changes. Are you sure you want to leave?')) {\n      return;\n    }\n    history.back();\n  }\n\n  _updateComponent() {\n    if (this._renderScheduled || !this.hass || !this.config) return;\n    this._renderScheduled = true;\n    Promise.resolve().then(() => {\n      this._rendered = ScriptEditor(this.$.root, {\n        script: this.config,\n        onChange: this.configChanged,\n        isWide: this.isWide,\n        hass: this.hass,\n        localize: this.localize,\n      }, this._rendered);\n      this._renderScheduled = false;\n    });\n  }\n\n  saveScript() {\n    var id = this.creatingNew ?\n      '' + Date.now() : computeObjectId(this.script.entity_id);\n    this.hass.callApi('post', 'config/script/config/' + id, this.config).then(() => {\n      this.dirty = false;\n\n      if (this.creatingNew) {\n        this.navigate(`/config/script/edit/${id}`, true);\n      }\n    }, (errors) => {\n      this.errors = errors.body.message;\n      throw errors;\n    });\n  }\n\n  computeName(script) {\n    return script && computeStateName(script);\n  }\n}\n\ncustomElements.define('ha-script-editor', HaScriptEditor);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-fab/paper-fab.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport '@polymer/paper-item/paper-item.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/ha-app-layout.js';\n\nimport '../ha-config-section.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HaScriptPicker extends LocalizeMixin(NavigateMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"ha-style\">\n      :host {\n        display: block;\n      }\n\n      paper-item {\n        cursor: pointer;\n      }\n\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n\n      a {\n        color: var(--primary-color);\n      }\n    </style>\n\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.script.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div slot=\"header\">Script Editor</div>\n        <div slot=\"introduction\">\n          The script editor allows you to create and edit scripts.\n          Please read <a href=\"https://home-assistant.io/docs/scripts/editor/\" target=\"_blank\">the instructions</a> to make sure that you have configured Home Assistant correctly.\n        </div>\n\n        <paper-card heading=\"Pick script to edit\">\n          <template is=\"dom-if\" if=\"[[!scripts.length]]\">\n            <div class=\"card-content\">\n              <p>We couldn't find any editable scripts.</p>\n            </div>\n          </template>\n          <template is=\"dom-repeat\" items=\"[[scripts]]\" as=\"script\">\n            <paper-item>\n              <paper-item-body two-line=\"\" on-click=\"scriptTapped\">\n                <div>[[computeName(script)]]</div>\n                <div secondary=\"\">[[computeDescription(script)]]</div>\n              </paper-item-body>\n              <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n            </paper-item>\n          </template>\n        </paper-card>\n      </ha-config-section>\n\n      <paper-fab slot=\"fab\" is-wide$=\"[[isWide]]\" icon=\"hass:plus\" title=\"Add Script\" on-click=\"addScript\"></paper-fab>\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      narrow: {\n        type: Boolean,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      scripts: {\n        type: Array,\n      },\n\n      isWide: {\n        type: Boolean,\n      },\n    };\n  }\n\n  scriptTapped(ev) {\n    this.navigate('/config/script/edit/' + this.scripts[ev.model.index].entity_id);\n  }\n\n  addScript() {\n    this.navigate('/config/script/new');\n  }\n\n  computeName(script) {\n    return computeStateName(script);\n  }\n\n  // Still thinking of something to add here.\n  // eslint-disable-next-line\n  computeDescription(script) {\n    return '';\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-script-picker', HaScriptPicker);\n","import '@polymer/app-route/app-route.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-script-editor.js';\nimport './ha-script-picker.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\n\nclass HaConfigScript extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-script-picker,\n      ha-script-editor {\n        height: 100%;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/script/edit/:script\" data=\"{{_routeData}}\" active=\"{{_edittingScript}}\"></app-route>\n    <app-route route=\"[[route]]\" pattern=\"/script/new\" active=\"{{_creatingNew}}\"></app-route>\n\n    <template is=\"dom-if\" if=\"[[!showEditor]]\">\n      <ha-script-picker hass=\"[[hass]]\" narrow=\"[[narrow]]\" show-menu=\"[[showMenu]]\" scripts=\"[[scripts]]\" is-wide=\"[[isWide]]\"></ha-script-picker>\n    </template>\n\n    <template is=\"dom-if\" if=\"[[showEditor]]\" restamp=\"\">\n      <ha-script-editor hass=\"[[hass]]\" script=\"[[script]]\" is-wide=\"[[isWide]]\" creating-new=\"[[_creatingNew]]\"></ha-script-editor>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      route: Object,\n      isWide: Boolean,\n      _routeData: Object,\n      _routeMatches: Boolean,\n      _creatingNew: Boolean,\n      _edittingScript: Boolean,\n\n      scripts: {\n        type: Array,\n        computed: 'computeScripts(hass)',\n      },\n\n      script: {\n        type: Object,\n        computed: 'computeScript(scripts, _edittingScript, _routeData)',\n      },\n\n      showEditor: {\n        type: Boolean,\n        computed: 'computeShowEditor(_edittingScript, _creatingNew)',\n      }\n    };\n  }\n\n  computeScript(scripts, edittingAddon, routeData) {\n    if (!scripts || !edittingAddon) {\n      return null;\n    }\n    for (var i = 0; i < scripts.length; i++) {\n      if (scripts[i].entity_id === routeData.script) {\n        return scripts[i];\n      }\n    }\n    return null;\n  }\n\n  computeScripts(hass) {\n    var scripts = [];\n\n    Object.keys(hass.states).forEach(function (key) {\n      var entity = hass.states[key];\n\n      if (computeStateDomain(entity) === 'script') {\n        scripts.push(entity);\n      }\n    });\n\n    return scripts.sort(function entitySortBy(entityA, entityB) {\n      var nameA = computeStateName(entityA);\n      var nameB = computeStateName(entityB);\n\n      if (nameA < nameB) {\n        return -1;\n      }\n      if (nameA > nameB) {\n        return 1;\n      }\n      return 0;\n    });\n  }\n\n  computeShowEditor(_edittingScript, _creatingNew) {\n    return _creatingNew || _edittingScript;\n  }\n}\n\ncustomElements.define('ha-config-script', HaConfigScript);\n","import '@polymer/paper-fab/paper-fab.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-item/paper-item-body.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/hass-subpage.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaUserPicker extends EventsMixin(NavigateMixin(LocalizeMixin(PolymerElement))) {\n  static get template() {\n    return html`\n  <style>\n    paper-fab {\n      position: fixed;\n      bottom: 16px;\n      right: 16px;\n      z-index: 1;\n    }\n    paper-fab[is-wide] {\n      bottom: 24px;\n      right: 24px;\n    }\n    paper-card {\n      display: block;\n      max-width: 600px;\n      margin: 16px auto;\n    }\n    a {\n      text-decoration: none;\n      color: var(--primary-text-color);\n    }\n  </style>\n\n  <hass-subpage header=\"[[localize('ui.panel.config.users.picker.title')]]\">\n    <paper-card>\n      <template is=\"dom-repeat\" items=\"[[users]]\" as=\"user\">\n        <a href='[[_computeUrl(user)]]'>\n          <paper-item>\n            <paper-item-body two-line>\n              <div>[[_withDefault(user.name, 'Unnamed User')]]</div>\n              <div secondary=\"\">[[user.id]]</div>\n            </paper-item-body>\n            <iron-icon icon=\"hass:chevron-right\"></iron-icon>\n          </paper-item>\n        </a>\n      </template>\n    </paper-card>\n\n    <paper-fab\n      is-wide$=\"[[isWide]]\"\n      icon=\"hass:plus\"\n      title=\"[[localize('ui.panel.config.users.picker.add_user')]]\"\n      on-click=\"_addUser\"\n    ></paper-fab>\n  </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      users: Array,\n\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire('register-dialog', {\n        dialogShowEvent: 'show-add-user',\n        dialogTag: 'ha-dialog-add-user',\n        dialogImport: () => import('./ha-dialog-add-user.js'),\n      });\n    }\n  }\n\n  _withDefault(value, defaultValue) {\n    return value || defaultValue;\n  }\n\n  _computeUrl(user) {\n    return `/config/users/${user.id}`;\n  }\n\n  _addUser() {\n    this.fire('show-add-user', {\n      hass: this.hass,\n      dialogClosedCallback: async ({ userId }) => {\n        this.fire('reload-users');\n        if (userId) this.navigate(`/config/users/${userId}`);\n      },\n    });\n  }\n}\n\ncustomElements.define('ha-user-picker', HaUserPicker);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../layouts/hass-subpage.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaUserEditor extends EventsMixin(NavigateMixin(LocalizeMixin(PolymerElement))) {\n  static get template() {\n    return html`\n  <style>\n    paper-card {\n      display: block;\n      max-width: 600px;\n      margin: 0 auto 16px;\n    }\n    paper-card:first-child {\n      margin-top: 16px;\n    }\n    paper-card:last-child {\n      margin-bottom: 16px;\n    }\n    paper-button {\n      display: block;\n    }\n  </style>\n\n  <hass-subpage header=\"View user\">\n    <paper-card heading=\"[[_computeName(user)]]\">\n      <table class='card-content'>\n        <tr>\n          <td>ID</td>\n          <td>[[user.id]]</td>\n        </tr>\n        <tr>\n          <td>Owner</td>\n          <td>[[user.is_owner]]</td>\n        </tr>\n        <tr>\n          <td>Active</td>\n          <td>[[user.is_active]]</td>\n        </tr>\n        <tr>\n          <td>System generated</td>\n          <td>[[user.system_generated]]</td>\n        </tr>\n      </table>\n    </paper-card>\n    <paper-card>\n      <div class='card-actions'>\n        <paper-button on-click='_deleteUser'>\n          [[localize('ui.panel.config.users.editor.delete_user')]]\n        </paper-button>\n      </div>\n    </paper-card>\n  </hass-subpage>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      user: Object,\n    };\n  }\n\n  _computeName(user) {\n    return user && (user.name || 'Unnamed user');\n  }\n\n  async _deleteUser(ev) {\n    if (!confirm(`Are you sure you want to delete ${this._computeName(this.user)}`)) {\n      ev.target.blur();\n      return;\n    }\n    try {\n      await this.hass.callWS({\n        type: 'config/auth/delete',\n        user_id: this.user.id,\n      });\n    } catch (err) {\n      alert(err.code);\n      return;\n    }\n    this.fire('reload-users');\n    this.navigate('/config/users');\n  }\n}\n\ncustomElements.define('ha-user-editor', HaUserEditor);\n","import '@polymer/app-route/app-route.js';\nimport { timeOut } from '@polymer/polymer/lib/utils/async.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\nimport './ha-user-picker.js';\nimport './ha-user-editor.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigUsers extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <app-route\n      route='[[route]]'\n      pattern='/users/:user'\n      data=\"{{_routeData}}\"\n    ></app-route>\n\n    <template is='dom-if' if='[[_equals(_routeData.user, \"picker\")]]'>\n      <ha-user-picker\n        hass='[[hass]]'\n        users='[[_users]]'\n      ></ha-user-picker>\n    </template>\n    <template is='dom-if' if='[[!_equals(_routeData.user, \"picker\")]]' restamp>\n      <ha-user-editor\n        hass='[[hass]]'\n        user='[[_computeUser(_users, _routeData.user)]]'\n      ></ha-user-editor>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      route: {\n        type: Object,\n        observer: '_checkRoute',\n      },\n      _routeData: Object,\n      _user: {\n        type: Object,\n        value: null,\n      },\n      _users: {\n        type: Array,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._loadData();\n    this.addEventListener('reload-users', () => this._loadData());\n  }\n\n  _handlePickUser(ev) {\n    this._user = ev.detail.user;\n  }\n\n  _checkRoute(route) {\n    if (!route || route.path.substr(0, 6) !== '/users') return;\n\n    // prevent list gettung under toolbar\n    this.fire('iron-resize');\n\n    this._debouncer = Debouncer.debounce(\n      this._debouncer,\n      timeOut.after(0),\n      () => {\n        if (route.path === '/users') {\n          this.navigate('/config/users/picker', true);\n        }\n      }\n    );\n  }\n\n  _computeUser(users, userId) {\n    return users && users.filter(u => u.id === userId)[0];\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  async _loadData() {\n    this._users = await this.hass.callWS({\n      type: 'config/auth/list',\n    });\n  }\n}\n\ncustomElements.define('ha-config-users', HaConfigUsers);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaServiceDescription extends PolymerElement {\n  static get template() {\n    return html`\n    [[_getDescription(hass, domain, service)]]\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      domain: String,\n      service: String,\n    };\n  }\n\n  _getDescription(hass, domain, service) {\n    var domainServices = hass.config.services[domain];\n    if (!domainServices) return '';\n    var serviceObject = domainServices[service];\n    if (!serviceObject) return '';\n    return serviceObject.description;\n  }\n}\n\ncustomElements.define('ha-service-description', HaServiceDescription);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nclass ZwaveGroups extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 12px;\n      }\n    </style>\n    <paper-card class=\"content\" heading=\"Node group associations\">\n      <!--TODO make api for getting groups and members-->\n      <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Group\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedGroup}}\">\n            <template is=\"dom-repeat\" items=\"[[groups]]\" as=\"state\">\n              <paper-item>[[computeSelectCaptionGroup(state)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </div>\n      <template is=\"dom-if\" if=\"[[computeIsGroupSelected(selectedGroup)]]\">\n        <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"Node to control\" dynamic-align=\"\" class=\"flex\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTargetNode}}\">\n              <template is=\"dom-repeat\" items=\"[[nodes]]\" as=\"state\">\n                <paper-item>[[computeSelectCaption(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n\n        <div class=\"help-text\">\n          <span>Other Nodes in this group:</span>\n          <template is=\"dom-repeat\" items=\"[[otherGroupNodes]]\" as=\"state\">\n            <div>[[state]]</div>\n          </template>\n        </div>\n        <div class=\"help-text\">\n          <span>Max Associations:</span>\n          <span>[[maxAssociations]]</span>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[computeIsTargetNodeSelected(selectedTargetNode)]]\">\n        <div class=\"card-actions\">\n          <template is=\"dom-if\" if=\"[[!noAssociationsLeft]]\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"change_association\" service-data=\"[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]\">Add To Group</ha-call-service-button>\n          </template>\n          <template is=\"dom-if\" if=\"[[computeTargetInGroup(selectedGroup, selectedTargetNode)]]\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"change_association\" service-data=\"[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]\">Remove From Group</ha-call-service-button>\n          </template>\n        </div>\n      </template>\n    </paper-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      groups: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      selectedTargetNode: {\n        type: Number,\n        value: -1\n      },\n\n      selectedGroup: {\n        type: Number,\n        value: -1,\n        observer: 'selectedGroupChanged'\n      },\n\n      otherGroupNodes: {\n        type: Array,\n        value: -1,\n        computed: 'computeOtherGroupNodes(selectedGroup)'\n      },\n\n      maxAssociations: {\n        type: String,\n        value: '',\n        computed: 'computeMaxAssociations(selectedGroup)'\n      },\n\n      noAssociationsLeft: {\n        type: Boolean,\n        value: true,\n        computed: 'computeAssociationsLeft(selectedGroup)'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshGroups(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  computeAssociationsLeft(selectedGroup) {\n    if (selectedGroup === -1) return true;\n    return (this.maxAssociations === this.otherGroupNodes.length);\n  }\n\n  computeMaxAssociations(selectedGroup) {\n    if (selectedGroup === -1) return -1;\n    var maxAssociations = this.groups[selectedGroup].value.max_associations;\n    if (!maxAssociations) return 'None';\n    return maxAssociations;\n  }\n\n  computeOtherGroupNodes(selectedGroup) {\n    if (selectedGroup === -1) return -1;\n    var associations = Object.values(this.groups[selectedGroup].value.association_instances);\n    if (!associations.length) return ['None'];\n    return associations.map((assoc) => {\n      if (!assoc.length || assoc.length !== 2) {\n        return 'Unknown Node: ' + assoc;\n      }\n      const id = assoc[0];\n      const instance = assoc[1];\n      const node = this.nodes.find(n => n.attributes.node_id === id);\n      if (!node) {\n        return 'Unknown Node (id: ' + (instance ? id + '.' + instance : id) + ')';\n      }\n      let caption = this.computeSelectCaption(node);\n      if (instance) {\n        caption += '/ Instance: ' + instance;\n      }\n      return caption;\n    });\n  }\n\n  computeTargetInGroup(selectedGroup, selectedTargetNode) {\n    if (selectedGroup === -1 || selectedTargetNode === -1) return false;\n    const associations = Object.values(this.groups[selectedGroup].value.associations);\n    if (!associations.length) return false;\n    return associations.indexOf(this.nodes[selectedTargetNode].attributes.node_id) !== -1;\n  }\n\n  computeSelectCaption(stateObj) {\n    return computeStateName(stateObj) + ' (Node:' +\n      stateObj.attributes.node_id + ' ' +\n      stateObj.attributes.query_stage + ')';\n  }\n\n  computeSelectCaptionGroup(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  computeIsTargetNodeSelected(selectedTargetNode) {\n    return this.nodes && selectedTargetNode !== -1;\n  }\n\n  computeIsGroupSelected(selectedGroup) {\n    return this.nodes && this.selectedNode !== -1 && selectedGroup !== -1;\n  }\n\n  computeAssocServiceData(selectedGroup, type) {\n    if (!this.groups === -1 || selectedGroup === -1 || this.selectedNode === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      association: type,\n      target_node_id: this.nodes[this.selectedTargetNode].attributes.node_id,\n      group: this.groups[selectedGroup].key\n    };\n  }\n\n  refreshGroups(selectedNode) {\n    var groupData = [];\n    this.hass.callApi('GET', 'zwave/groups/' + this.nodes[selectedNode].attributes.node_id).then(function (groups) {\n      Object.keys(groups).forEach(function (key) {\n        groupData.push({\n          key: key,\n          value: groups[key],\n        });\n      });\n      this.groups = groupData;\n      this.selectedGroupChanged(this.selectedGroup);\n    }.bind(this));\n  }\n\n  selectedGroupChanged(selectedGroup) {\n    if (this.selectedGroup === -1 || selectedGroup === -1) return;\n    this.maxAssociations = this.groups[selectedGroup].value.max_associations;\n    this.otherGroupNodes = Object.values(this.groups[selectedGroup].value.associations);\n  }\n}\n\ncustomElements.define('zwave-groups', ZwaveGroups);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-checkbox/paper-checkbox.js';\nimport '@polymer/paper-input/paper-input.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../ha-config-section.js';\n\nclass OzwLog extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <span slot=\"header\">OZW Log</span>\n      <paper-card>\n      <div class=\"device-picker\">\n        <paper-input label=\"Number of last log lines.\" type=\"number\" min=\"0\" max=\"1000\" step=\"10\" value=\"{{numLogLines}}\">\n        </paper-input>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button raised=\"\" on-click=\"refreshLog\">Refresh</paper-button>\n      </div>\n      <div class=\"help-text\">\n             <pre>[[ozwLogs]]</pre>\n      </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      ozwLogs: {\n        type: String,\n        value: 'Refresh to pull log'\n      },\n\n      numLogLines: {\n        type: Number,\n        value: 0\n      },\n    };\n  }\n\n  refreshLog() {\n    this.ozwLogs = 'Loading ozw log...';\n    this.hass.callApi('GET', 'zwave/ozwlog?lines=' + this.numLogLines)\n      .then((info) => {\n        this.ozwLogs = info;\n      });\n  }\n}\n\ncustomElements.define('ozw-log', OzwLog);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-api-button.js';\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../components/ha-service-description.js';\nimport '../ha-config-section.js';\n\nclass ZwaveNetwork extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .card-actions.warning ha-call-service-button {\n        color: var(--google-red-500);\n      }\n\n      .toggle-help-icon {\n        position: absolute;\n        top: -6px;\n        right: 0;\n        color: var(--primary-color);\n      }\n\n      ha-service-description {\n        display: block;\n        color: grey;\n      }\n\n      [hidden] {\n        display: none;\n      }\n    </style>\n    <ha-config-section is-wide=\"[[isWide]]\">\n      <div style=\"position: relative\" slot=\"header\">\n        <span>Z-Wave Network Management</span>\n        <paper-icon-button class=\"toggle-help-icon\" on-click=\"helpTap\" icon=\"hass:help-circle\"></paper-icon-button>\n\n      </div>\n      <span slot=\"introduction\">\n        Run commands that affect the Z-Wave network. You won't get feedback on whether the command succeeded, but you can look in the OZW Log to try to figure out.\n      </span>\n\n\n      <paper-card class=\"content\">\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node_secure\">Add Node Secure</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node_secure\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node\">Add Node</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"add_node\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_node\">Remove Node</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_node\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n        </div>\n        <div class=\"card-actions warning\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"cancel_command\">Cancel Command</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"cancel_command\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n        </div>\n        <div class=\"card-actions\">\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_network\">Heal Network</ha-call-service-button>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"start_network\">Start Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"start_network\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"stop_network\">Stop Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"stop_network\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"soft_reset\">Soft Reset</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"soft_reset\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n\n          <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"test_network\">Test Network</ha-call-service-button>\n          <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"test_network\" hidden$=\"[[!showDescription]]\"></ha-service-description>\n          <ha-call-api-button hass=\"[[hass]]\" path=\"zwave/saveconfig\">Save Config</ha-call-api-button>\n\n        </div>\n      </paper-card>\n    </ha-config-section>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      isWide: {\n        type: Boolean,\n        value: false,\n      },\n\n      showDescription: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  helpTap() {\n    this.showDescription = !this.showDescription;\n  }\n}\n\ncustomElements.define('zwave-network', ZwaveNetwork);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveNodeConfig extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n    </style>\n    <div class=\"content\">\n      <paper-card heading=\"Node config options\">\n        <template is=\"dom-if\" if=\"[[wakeupNode]]\">\n          <div class=\"card-actions\">\n            <paper-input float-label=\"Wakeup Interval\" type=\"number\" value=\"{{wakeupInput}}\" placeholder=\"[[computeGetWakeupValue(selectedNode)]]\">\n               <div suffix=\"\">seconds</div>\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_wakeup\" service-data=\"[[computeWakeupServiceData(wakeupInput)]]\">Set Wakeup</ha-call-service-button>\n          </div>\n        </template>\n        <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Config parameter\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigParameter}}\">\n            <template is=\"dom-repeat\" items=\"[[config]]\" as=\"state\">\n              <paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        </div>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'List')]]\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Config value\" dynamic-align=\"\" class=\"flex\" placeholder=\"{{loadedConfigValue}}\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigValue}}\">\n                <template is=\"dom-repeat\" items=\"[[selectedConfigParameterValues]]\" as=\"state\">\n                  <paper-item>[[state]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n        </template>\n\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]\">\n          <div class=\"card-actions\">\n            <paper-input label=\"{{selectedConfigParameterNumValues}}\" type=\"number\" value=\"{{selectedConfigValue}}\" max=\"{{configParameterMax}}\" min=\"{{configParameterMin}}\">\n            </paper-input>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Config value\" class=\"flex\" dynamic-align=\"\" placeholder=\"{{loadedConfigValue}}\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedConfigValue}}\">\n                <template is=\"dom-repeat\" items=\"[[selectedConfigParameterValues]]\" as=\"state\">\n                  <paper-item>[[state]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n        </template>\n        <div class=\"help-text\">\n          <span>[[configValueHelpText]]</span>\n        </div>\n        <template is=\"dom-if\" if=\"[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]\">\n          <div class=\"card-actions\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_config_parameter\" service-data=\"[[computeSetConfigParameterServiceData(selectedConfigValue)]]\">Set Config Parameter</ha-call-service-button>\n          </div>\n        </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n        observer: 'nodesChanged'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'nodesChanged'\n      },\n\n      config: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      selectedConfigParameter: {\n        type: Number,\n        value: -1,\n        observer: 'selectedConfigParameterChanged'\n      },\n\n      configParameterMax: {\n        type: Number,\n        value: -1\n      },\n\n      configParameterMin: {\n        type: Number,\n        value: -1\n      },\n\n      configValueHelpText: {\n        type: String,\n        value: '',\n        computed: 'computeConfigValueHelp(selectedConfigParameter)'\n      },\n\n      selectedConfigParameterType: {\n        type: String,\n        value: ''\n      },\n\n      selectedConfigValue: {\n        type: Number,\n        value: -1,\n        observer: 'computeSetConfigParameterServiceData'\n      },\n\n      selectedConfigParameterValues: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      selectedConfigParameterNumValues: {\n        type: String,\n        value: ''\n      },\n\n      loadedConfigValue: {\n        type: Number,\n        value: -1\n      },\n\n      wakeupInput: {\n        type: Number,\n      },\n\n      wakeupNode: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshConfig(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  nodesChanged() {\n    if (!this.nodes) return;\n    this.wakeupNode = (this.nodes[this.selectedNode].attributes.wake_up_interval === 0 ||\n      this.nodes[this.selectedNode].attributes.wake_up_interval);\n    if (this.wakeupNode) {\n      if (this.nodes[this.selectedNode].attributes.wake_up_interval === 0) this.wakeupInput = '';\n      else this.wakeupInput = this.nodes[this.selectedNode].attributes.wake_up_interval;\n    }\n  }\n\n  computeGetWakeupValue(selectedNode) {\n    if (this.selectedNode === -1 ||\n      !this.nodes[selectedNode].attributes.wake_up_interval) return 'unknown';\n    return (this.nodes[selectedNode].attributes.wake_up_interval);\n  }\n\n  computeWakeupServiceData(wakeupInput) {\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value: wakeupInput\n    };\n  }\n\n  computeConfigValueHelp(selectedConfigParameter) {\n    if (selectedConfigParameter === -1) return '';\n    var helpText = this.config[selectedConfigParameter].value.help;\n    if (!helpText) return ['No helptext available'];\n    return helpText;\n  }\n\n  computeSetConfigParameterServiceData(selectedConfigValue) {\n    if (this.selectedNode === -1 || this.selectedConfigParameter === -1) return -1;\n    var valueData = null;\n    if (('Short Byte Int').includes(this.selectedConfigParameterType)) {\n      valueData = parseInt(selectedConfigValue, 10);\n    } if (('Bool Button').includes(this.selectedConfigParameterType)) {\n      valueData = this.selectedConfigParameterValues[selectedConfigValue];\n    } if (this.selectedConfigParameterType === 'List') {\n      valueData = this.selectedConfigParameterValues[selectedConfigValue];\n    }\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      parameter: this.config[this.selectedConfigParameter].key,\n      value: valueData\n    };\n  }\n\n  selectedConfigParameterChanged(selectedConfigParameter) {\n    if (selectedConfigParameter === -1) return;\n    this.selectedConfigValue = -1;\n    this.loadedConfigValue = -1;\n    this.selectedConfigParameterValues = [];\n    this.selectedConfigParameterType = this.config[selectedConfigParameter].value.type;\n    this.configParameterMax = this.config[selectedConfigParameter].value.max;\n    this.configParameterMin = this.config[selectedConfigParameter].value.min;\n    this.loadedConfigValue = this.config[selectedConfigParameter].value.data;\n    this.configValueHelpText = this.config[selectedConfigParameter].value.help;\n    if (('Short Byte Int').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterNumValues = this.config[selectedConfigParameter].value.data_items;\n      this.selectedConfigValue = this.loadedConfigValue;\n    }\n    if (('Bool Button').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterValues = ['True', 'False'];\n      if (this.config[selectedConfigParameter].value.data) {\n        this.loadedConfigValue = 'True';\n      } else this.loadedConfigValue = 'False';\n    }\n    if (('List').includes(this.selectedConfigParameterType)) {\n      this.selectedConfigParameterValues = this.config[selectedConfigParameter].value.data_items;\n    }\n  }\n\n  isConfigParameterSelected(selectedConfigParameter, type) {\n    if (selectedConfigParameter === -1) return false;\n    if (this.config[selectedConfigParameter].value.type === type) return true;\n    if (type.includes(this.config[selectedConfigParameter].value.type)) return true;\n    return false;\n  }\n\n  computeSelectCaptionConfigParameter(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  refreshConfig(selectedNode) {\n    var configData = [];\n    this.hass.callApi('GET', 'zwave/config/' + this.nodes[selectedNode].attributes.node_id).then(function (config) {\n      Object.keys(config).forEach(function (key) {\n        configData.push({\n          key: key,\n          value: config[key],\n        });\n      });\n      this.config = configData;\n      this.selectedConfigParameterChanged(this.selectedConfigParameter);\n    }.bind(this));\n  }\n}\n\ncustomElements.define('zwave-node-config', ZwaveNodeConfig);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-card/paper-card.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass ZwaveNodeInformation extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      .node-info {\n        margin-left: 16px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      paper-button[toggles][active] {\n        background: lightgray;\n      }\n\n    </style>\n\n    <div class=\"content\">\n      <paper-card heading=\"Node Information\">\n      <div class=\"card-actions\">\n        <paper-button toggles=\"\" raised=\"\" noink=\"\" active=\"{{nodeInfoActive}}\">Show</paper-button>\n      </div>\n      <template is=\"dom-if\" if=\"{{nodeInfoActive}}\">\n        <template is=\"dom-repeat\" items=\"[[selectedNodeAttrs]]\" as=\"state\">\n          <div class=\"node-info\">\n            <span>[[state]]</span>\n          </div>\n        </template>\n      </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      nodes: {\n        type: Array,\n        observer: 'nodeChanged'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'nodeChanged'\n      },\n\n      selectedNodeAttrs: {\n        type: Array,\n      },\n\n      nodeInfoActive: {\n        type: Boolean,\n      },\n    };\n  }\n\n  nodeChanged(selectedNode) {\n    if (!this.nodes || selectedNode === -1) return;\n    var nodeAttrs = this.nodes[this.selectedNode].attributes;\n    var att = [];\n    Object.keys(nodeAttrs).forEach(function (key) {\n      att.push(key + ': ' + nodeAttrs[key]);\n    });\n    this.selectedNodeAttrs = att.sort();\n  }\n}\n\ncustomElements.define('zwave-node-information', ZwaveNodeInformation);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveUsercodes extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n    </style>\n      <div class=\"content\">\n        <paper-card heading=\"Node user codes\">\n          <div class=\"device-picker\">\n          <paper-dropdown-menu label=\"Code slot\" dynamic-align=\"\" class=\"flex\">\n            <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedUserCode}}\">\n              <template is=\"dom-repeat\" items=\"[[userCodes]]\" as=\"state\">\n                <paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n          </div>\n\n          <template is=\"dom-if\" if=\"[[isUserCodeSelected(selectedUserCode)]]\">\n            <div class=\"card-actions\">\n              <paper-input label=\"User code\" type=\"text\" allowed-pattern=\"[0-9,a-f,x,\\\\\\\\]\" maxlength=\"{{userCodeMaxLen}}\" minlength=\"16\" value=\"{{selectedUserCodeValue}}\">\n              </paper-input>\n              <pre>Ascii: [[computedCodeOutput]]</pre>\n            </div>\n            <div class=\"card-actions\">\n              <ha-call-service-button hass=\"[[hass]]\" domain=\"lock\" service=\"set_usercode\" service-data=\"[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]\">Set Usercode</ha-call-service-button>\n              <ha-call-service-button hass=\"[[hass]]\" domain=\"lock\" service=\"clear_usercode\" service-data=\"[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]\">Delete Usercode</ha-call-service-button>\n            </div>\n          </template>\n        </paper-card>\n      </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      userCodes: {\n        type: Object,\n      },\n\n      userCodeMaxLen: {\n        type: Number,\n        value: 4\n      },\n\n      selectedUserCode: {\n        type: Number,\n        value: -1,\n        observer: 'selectedUserCodeChanged'\n      },\n\n      selectedUserCodeValue: {\n        type: String,\n      },\n\n      computedCodeOutput: {\n        type: String,\n        value: ''\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    if (ev.detail.success) {\n      var foo = this;\n      setTimeout(function () {\n        foo.refreshUserCodes(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  isUserCodeSelected(selectedUserCode) {\n    if (selectedUserCode === -1) return false;\n    return true;\n  }\n\n  computeSelectCaptionUserCodes(stateObj) {\n    return (stateObj.key + ': ' + stateObj.value.label);\n  }\n\n  selectedUserCodeChanged(selectedUserCode) {\n    if (this.selectedUserCode === -1 || selectedUserCode === -1) return;\n    var value = this.userCodes[selectedUserCode].value.code;\n    this.userCodeMaxLen = (this.userCodes[selectedUserCode].value.length * 4);\n    this.selectedUserCodeValue = this.a2hex(value);\n    this.computedCodeOutput = '[' + this.hex2a(this.selectedUserCodeValue) + ']';\n  }\n\n  computeUserCodeServiceData(selectedUserCodeValue, type) {\n    if (this.selectedNode === -1 || !selectedUserCodeValue) return -1;\n    var serviceData = null;\n    var valueData = null;\n    if (type === 'Add') {\n      valueData = this.hex2a(selectedUserCodeValue);\n      this.computedCodeOutput = '[' + valueData + ']';\n      serviceData = {\n        node_id: this.nodes[this.selectedNode].attributes.node_id,\n        code_slot: this.selectedUserCode,\n        usercode: valueData\n      };\n    }\n    if (type === 'Delete') {\n      serviceData = {\n        node_id: this.nodes[this.selectedNode].attributes.node_id,\n        code_slot: this.selectedUserCode\n      };\n    }\n    return serviceData;\n  }\n\n  refreshUserCodes(selectedNode) {\n    this.selectedUserCodeValue = '';\n    var userCodes = [];\n    this.hass.callApi('GET', 'zwave/usercodes/' + this.nodes[selectedNode].attributes.node_id).then(function (usercodes) {\n      Object.keys(usercodes).forEach(function (key) {\n        userCodes.push({\n          key: key,\n          value: usercodes[key],\n        });\n      });\n      this.userCodes = userCodes;\n      this.selectedUserCodeChanged(this.selectedUserCode);\n    }.bind(this));\n  }\n\n  a2hex(str) {\n    var arr = [];\n    var output = '';\n    for (var i = 0, l = str.length; i < l; i++) {\n      var hex = Number(str.charCodeAt(i)).toString(16);\n      if (hex === '0') {\n        output = '00';\n      } else {\n        output = hex;\n      }\n      arr.push('\\\\x' + output);\n    }\n    return arr.join('');\n  }\n\n  hex2a(hexx) {\n    var hex = hexx.toString();\n    var hexMod = hex.replace(/\\\\x/g, '');\n    var str = '';\n    for (var i = 0; i < hexMod.length; i += 2) {\n      str += String.fromCharCode(parseInt(hexMod.substr(i, 2), 16));\n    }\n    return str;\n  }\n}\n\ncustomElements.define('zwave-usercodes', ZwaveUsercodes);\n","import '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass ZwaveValues extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n        }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n    </style>\n    <div class=\"content\">\n      <paper-card heading=\"Node Values\">\n        <div class=\"device-picker\">\n        <paper-dropdown-menu label=\"Value\" dynamic-align=\"\" class=\"flex\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedValue}}\">\n             <template is=\"dom-repeat\" items=\"[[values]]\" as=\"item\">\n              <paper-item>[[computeSelectCaption(item)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n        </div>\n        <template is=\"dom-if\" if=\"[[!computeIsValueSelected(selectedValue)]]\">\n          <div class=\"card-actions\">\n            <paper-input float-label=\"Value Name\" type=\"text\" value=\"{{newValueNameInput}}\" placeholder=\"[[computeGetValueName(selectedValue)]]\">\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_value\" service-data=\"[[computeValueNameServiceData(newValueNameInput)]]\">Rename Value</ha-call-service-button>\n\n          </div>\n        </template>\n      </paper-card>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      nodes: {\n        type: Array,\n      },\n\n      values: {\n        type: Array,\n      },\n\n      selectedNode: {\n        type: Number,\n      },\n\n      selectedValue: {\n        type: Number,\n        value: -1,\n        observer: 'selectedValueChanged'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    var foo = this;\n    if (ev.detail.success) {\n      setTimeout(function () {\n        foo.refreshValues(foo.selectedNode);\n      }, 5000);\n    }\n  }\n\n  computeSelectCaption(item) {\n    return item.value.label + ' (Instance: ' + item.value.instance + ', Index: ' + item.value.index + ')';\n  }\n\n  computeGetValueName(selectedValue) {\n    return this.values[selectedValue].value.label;\n  }\n\n  computeIsValueSelected(selectedValue) {\n    return (!this.nodes || this.selectedNode === -1 || selectedValue === -1);\n  }\n\n  refreshValues(selectedNode) {\n    var valueData = [];\n    this.hass.callApi('GET', 'zwave/values/' + this.nodes[selectedNode].attributes.node_id).then(function (values) {\n      Object.keys(values).forEach(function (key) {\n        valueData.push({\n          key: key,\n          value: values[key],\n        });\n      });\n      this.values = valueData;\n      this.selectedValueChanged(this.selectedValue);\n    }.bind(this));\n  }\n\n  computeValueNameServiceData(newValueNameInput) {\n    if (!this.selectedNode === -1 || this.selectedValue === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value_id: this.values[this.selectedValue].key,\n      name: newValueNameInput,\n    };\n  }\n\n  selectedValueChanged(selectedValue) {\n    if (!this.selectedNode === -1 || this.selectedValue === -1) return;\n    var el = this;\n    this.hass.callApi('GET', 'config/zwave/device_config/' + this.values[selectedValue].value.entity_id)\n      .then(function (data) {\n        el.entityIgnored = data.ignored || false;\n        el.entityPollingIntensity = el.values[selectedValue].value.poll_intensity;\n      });\n  }\n}\n\ncustomElements.define('zwave-values', ZwaveValues);\n","import '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/paper-card/paper-card.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../components/ha-menu-button.js';\nimport '../../../components/ha-service-description.js';\nimport '../../../layouts/ha-app-layout.js';\nimport '../../../resources/ha-style.js';\n\nimport '../ha-config-section.js';\nimport '../ha-form-style.js';\nimport './zwave-groups.js';\nimport './zwave-log.js';\nimport './zwave-network.js';\nimport './zwave-node-config.js';\nimport './zwave-node-information.js';\nimport './zwave-usercodes.js';\nimport './zwave-values.js';\n\nimport sortByName from '../../../common/entity/states_sort_by_name.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HaConfigZwave extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-flex ha-style ha-form-style\">\n      .content {\n        margin-top: 24px;\n      }\n\n      .node-info {\n        margin-left: 16px;\n      }\n\n      .help-text {\n        padding-left: 24px;\n        padding-right: 24px;\n      }\n\n      paper-card {\n        display: block;\n        margin: 0 auto;\n        max-width: 600px;\n      }\n\n      .device-picker {\n        @apply --layout-horizontal;\n        @apply --layout-center-center;\n        padding-left: 24px;\n        padding-right: 24px;\n        padding-bottom: 24px;\n      }\n\n      ha-service-description {\n        display: block;\n        color: grey;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      .toggle-help-icon {\n        position: absolute;\n        top: 6px;\n        right: 0;\n        color: var(--primary-color);\n      }\n    </style>\n    <ha-app-layout has-scrolling-region=\"\">\n      <app-header slot=\"header\" fixed=\"\">\n        <app-toolbar>\n          <paper-icon-button icon=\"hass:arrow-left\" on-click=\"_backTapped\"></paper-icon-button>\n          <div main-title=\"\">[[localize('ui.panel.config.zwave.caption')]]</div>\n        </app-toolbar>\n      </app-header>\n\n      <zwave-network id=\"zwave-network\" is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></zwave-network>\n\n      <!--Node card-->\n      <ha-config-section is-wide=\"[[isWide]]\">\n        <div style=\"position: relative\" slot=\"header\">\n          <span>Z-Wave Node Management</span>\n          <paper-icon-button class=\"toggle-help-icon\" on-click=\"toggleHelp\" icon=\"hass:help-circle\"></paper-icon-button>\n\n        </div>\n        <span slot=\"introduction\">\n          Run Z-Wave commands that affect a single node. Pick a node to see a list of available commands.\n        </span>\n\n        <paper-card class=\"content\">\n          <div class=\"device-picker\">\n            <paper-dropdown-menu dynamic-align=\"\" label=\"Nodes\" class=\"flex\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedNode}}\">\n                <template is=\"dom-repeat\" items=\"[[nodes]]\" as=\"state\">\n                  <paper-item>[[computeSelectCaption(state)]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n          </div>\n            <template is=\"dom-if\" if=\"[[!computeIsNodeSelected(selectedNode)]]\">\n              <template is=\"dom-if\" if=\"[[showHelp]]\">\n                <div style=\"color: grey; padding: 12px\">Select node to view per-node options</div>\n              </template>\n            </template>\n\n          <template is=\"dom-if\" if=\"[[computeIsNodeSelected(selectedNode)]]\">\n          <div class=\"card-actions\">\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Refresh Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_failed_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Remove Failed Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"remove_failed_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"replace_failed_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Replace Failed Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"replace_failed_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"print_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Print Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"print_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_node\" service-data=\"[[computeHealNodeServiceData(selectedNode)]]\">Heal Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"heal_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"test_node\" service-data=\"[[computeNodeServiceData(selectedNode)]]\">Test Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"test_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n          </div>\n          <div class=\"card-actions\">\n            <paper-input float-label=\"New node name\" type=\"text\" value=\"{{newNodeNameInput}}\" placeholder=\"[[computeGetNodeName(selectedNode)]]\">\n            </paper-input>\n            <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_node\" service-data=\"[[computeNodeNameServiceData(newNodeNameInput)]]\">Rename Node</ha-call-service-button>\n            <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"rename_node\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n           </div>\n\n           <div class=\"device-picker\">\n            <paper-dropdown-menu label=\"Entities of this node\" dynamic-align=\"\" class=\"flex\">\n              <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedEntity}}\">\n                <template is=\"dom-repeat\" items=\"[[entities]]\" as=\"state\">\n                  <paper-item>[[computeSelectCaptionEnt(state)]]</paper-item>\n                </template>\n              </paper-listbox>\n            </paper-dropdown-menu>\n           </div>\n           <template is=\"dom-if\" if=\"[[!computeIsEntitySelected(selectedEntity)]]\">\n           <div class=\"card-actions\">\n             <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_entity\" service-data=\"[[computeRefreshEntityServiceData(selectedEntity)]]\">Refresh Entity</ha-call-service-button>\n             <ha-service-description hass=\"[[hass]]\" domain=\"zwave\" service=\"refresh_entity\" hidden$=\"[[!showHelp]]\"></ha-service-description>\n           </div>\n           <div class=\"form-group\">\n             <paper-checkbox checked=\"{{entityIgnored}}\" class=\"form-control\">\n             Exclude this entity from Home Assistant\n             </paper-checkbox>\n             <paper-input disabled=\"{{entityIgnored}}\" label=\"Polling intensity\" type=\"number\" min=\"0\" value=\"{{entityPollingIntensity}}\">\n             </paper-input>\n           </div>\n           <div class=\"card-actions\">\n             <ha-call-service-button hass=\"[[hass]]\" domain=\"zwave\" service=\"set_poll_intensity\" service-data=\"[[computePollIntensityServiceData(entityPollingIntensity)]]\">Save</ha-call-service-button>\n           </div>\n           <div class=\"content\">\n             <div class=\"card-actions\">\n               <paper-button toggles=\"\" raised=\"\" noink=\"\" active=\"{{entityInfoActive}}\">Entity Attributes</paper-button>\n             </div>\n             <template is=\"dom-if\" if=\"{{entityInfoActive}}\">\n               <template is=\"dom-repeat\" items=\"[[selectedEntityAttrs]]\" as=\"state\">\n                 <div class=\"node-info\">\n                   <span>[[state]]</span>\n                 </div>\n               </template>\n             </template>\n           </div>\n\n           </template>\n          </template>\n        </paper-card>\n\n        <template is=\"dom-if\" if=\"[[computeIsNodeSelected(selectedNode)]]\">\n          <!--Node info card-->\n          <zwave-node-information id=\"zwave-node-information\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\"></zwave-node-information>\n\n          <!--Value card-->\n          <zwave-values hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" values=\"[[values]]\"></zwave-values>\n\n          <!--Group card-->\n          <zwave-groups hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" groups=\"[[groups]]\"></zwave-groups>\n\n          <!--Config card-->\n          <zwave-node-config hass=\"[[hass]]\" nodes=\"[[nodes]]\" selected-node=\"[[selectedNode]]\" config=\"[[config]]\"></zwave-node-config>\n        </template>\n\n        <!--User Codes-->\n        <template is=\"dom-if\" if=\"{{hasNodeUserCodes}}\">\n          <zwave-usercodes id=\"zwave-usercodes\" hass=\"[[hass]]\" nodes=\"[[nodes]]\" user-codes=\"[[userCodes]]\" selected-node=\"[[selectedNode]]\"></zwave-usercodes>\n      </template>\n      </ha-config-section>\n\n\n\n      <!--Ozw log-->\n      <ozw-log is-wide=\"[[isWide]]\" hass=\"[[hass]]\"></ozw-log>\n\n    </ha-app-layout>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n\n      nodes: {\n        type: Array,\n        computed: 'computeNodes(hass)'\n      },\n\n      selectedNode: {\n        type: Number,\n        value: -1,\n        observer: 'selectedNodeChanged'\n      },\n\n      config: {\n        type: Array,\n        value: function () {\n          return [];\n        }\n      },\n\n      entities: {\n        type: Array,\n        computed: 'computeEntities(selectedNode)',\n      },\n\n      entityInfoActive: {\n        type: Boolean,\n      },\n\n      selectedEntity: {\n        type: Number,\n        value: -1,\n        observer: 'selectedEntityChanged',\n      },\n\n      selectedEntityAttrs: {\n        type: Array,\n        computed: 'computeSelectedEntityAttrs(selectedEntity)'\n      },\n\n      values: {\n        type: Array,\n      },\n\n      groups: {\n        type: Array,\n      },\n\n      newNodeNameInput: {\n        type: String,\n      },\n\n      userCodes: {\n        type: Array,\n        value: function () {\n          return [];\n        },\n      },\n\n      hasNodeUserCodes: {\n        type: Boolean,\n        value: false,\n      },\n\n      showHelp: {\n        type: Boolean,\n        value: false,\n      },\n\n      entityIgnored: {\n        type: Boolean,\n      },\n\n      entityPollingIntensity: {\n        type: Number,\n        value: 0,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('hass-service-called', ev => this.serviceCalled(ev));\n  }\n\n  serviceCalled(ev) {\n    var el = this;\n    if ((ev.detail.success) && (ev.detail.service === 'set_poll_intensity')) {\n      el.saveEntity();\n    }\n  }\n\n  computeNodes(hass) {\n    return Object.keys(hass.states)\n      .map(function (key) { return hass.states[key]; })\n      .filter(function (ent) {\n        return ((ent.entity_id).match('zwave[.]'));\n      })\n      .sort(sortByName);\n  }\n\n  computeEntities(selectedNode) {\n    if (!this.nodes || selectedNode === -1) return -1;\n    var hass = this.hass;\n    var nodeid = this.nodes[this.selectedNode].attributes.node_id;\n    return Object.keys(hass.states)\n      .map(function (key) { return hass.states[key]; })\n      .filter(function (ent) {\n        if (ent.attributes.node_id === undefined) {\n          return false;\n        }\n        return (!ent.attributes.hidden &&\n                'node_id' in ent.attributes &&\n                ent.attributes.node_id === nodeid &&\n                (!(ent.entity_id).match('zwave[.]')));\n      })\n      .sort(sortByName);\n  }\n\n  selectedNodeChanged(selectedNode) {\n    this.newNodeNameInput = '';\n\n    if (selectedNode === -1) return;\n    this.selectedConfigParameter = -1;\n    this.selectedConfigParameterValue = -1;\n    this.selectedGroup = -1;\n\n    this.hass.callApi('GET', 'zwave/config/' + this.nodes[selectedNode].attributes.node_id).then((configs) => {\n      this.config = this._objToArray(configs);\n    });\n\n    this.hass.callApi('GET', 'zwave/values/' + this.nodes[selectedNode].attributes.node_id).then((values) => {\n      this.values = this._objToArray(values);\n    });\n\n    this.hass.callApi('GET', 'zwave/groups/' + this.nodes[selectedNode].attributes.node_id).then((groups) => {\n      this.groups = this._objToArray(groups);\n    });\n\n    this.hasNodeUserCodes = false;\n    this.notifyPath('hasNodeUserCodes');\n    this.hass.callApi('GET', 'zwave/usercodes/' + this.nodes[selectedNode].attributes.node_id).then((usercodes) => {\n      this.userCodes = this._objToArray(usercodes);\n      this.hasNodeUserCodes = this.userCodes.length > 0;\n      this.notifyPath('hasNodeUserCodes');\n    });\n  }\n\n  selectedEntityChanged(selectedEntity) {\n    if (selectedEntity === -1) return;\n    var el = this;\n    el.hass.callApi('GET', 'zwave/values/' + el.nodes[el.selectedNode].attributes.node_id).then((values) => {\n      el.values = el._objToArray(values);\n    });\n\n    var valueId = el.entities[selectedEntity].attributes.value_id;\n    var valueData = el.values.find(function (obj) { return obj.key === valueId; });\n    var valueIndex = el.values.indexOf(valueData);\n    el.hass.callApi('GET', 'config/zwave/device_config/' + valueId)\n      .then(function (data) {\n        el.entityIgnored = data.ignored || false;\n        el.entityPollingIntensity = el.values[valueIndex].value.poll_intensity;\n      });\n  }\n\n  computeSelectedEntityAttrs(selectedEntity) {\n    if (selectedEntity === -1) return 'No entity selected';\n    var entityAttrs = this.entities[selectedEntity].attributes;\n    var att = [];\n    Object.keys(entityAttrs).forEach(function (key) {\n      att.push(key + ': ' + entityAttrs[key]);\n    });\n    return att.sort();\n  }\n\n  computeSelectCaption(stateObj) {\n    return computeStateName(stateObj) + ' (Node:' +\n      stateObj.attributes.node_id + ' ' +\n      stateObj.attributes.query_stage + ')';\n  }\n\n  computeSelectCaptionEnt(stateObj) {\n    return (computeStateDomain(stateObj) + '.'\n            + computeStateName(stateObj));\n  }\n\n  computeIsNodeSelected() {\n    return (this.nodes && this.selectedNode !== -1);\n  }\n\n  computeIsEntitySelected(selectedEntity) {\n    return (selectedEntity === -1);\n  }\n\n  computeNodeServiceData(selectedNode) {\n    return { node_id: this.nodes[selectedNode].attributes.node_id };\n  }\n\n  computeHealNodeServiceData(selectedNode) {\n    return {\n      node_id: this.nodes[selectedNode].attributes.node_id,\n      return_routes: true\n    };\n  }\n\n  computeGetNodeName(selectedNode) {\n    if (this.selectedNode === -1 ||\n      !this.nodes[selectedNode].entity_id) return -1;\n    return this.nodes[selectedNode].attributes.node_name;\n  }\n\n  computeNodeNameServiceData(newNodeNameInput) {\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      name: newNodeNameInput\n    };\n  }\n\n  computeRefreshEntityServiceData(selectedEntity) {\n    if (selectedEntity === -1) return -1;\n    return { entity_id: this.entities[selectedEntity].entity_id };\n  }\n\n  computePollIntensityServiceData(entityPollingIntensity) {\n    if (!this.selectedNode === -1 || this.selectedEntity === -1) return -1;\n    return {\n      node_id: this.nodes[this.selectedNode].attributes.node_id,\n      value_id: this.entities[this.selectedEntity].attributes.value_id,\n      poll_intensity: parseInt(entityPollingIntensity),\n    };\n  }\n\n  saveEntity() {\n    var data = {\n      ignored: this.entityIgnored,\n      polling_intensity: parseInt(this.entityPollingIntensity),\n    };\n    return this.hass.callApi('POST', 'config/zwave/device_config/' + this.entities[this.selectedEntity].entity_id, data);\n  }\n\n  toggleHelp() {\n    this.showHelp = !this.showHelp;\n  }\n\n  _objToArray(obj) {\n    var array = [];\n    Object.keys(obj).forEach(function (key) {\n      array.push({\n        key: key,\n        value: obj[key],\n      });\n    });\n    return array;\n  }\n\n  _backTapped() {\n    history.back();\n  }\n}\n\ncustomElements.define('ha-config-zwave', HaConfigZwave);\n","import '@polymer/app-route/app-route.js';\nimport '@polymer/iron-media-query/iron-media-query.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../layouts/hass-error-screen.js';\n\nimport './automation/ha-config-automation.js';\nimport './cloud/ha-config-cloud.js';\nimport './config-entries/ha-config-entries.js';\nimport './core/ha-config-core.js';\nimport './customize/ha-config-customize.js';\nimport './dashboard/ha-config-dashboard.js';\nimport './script/ha-config-script.js';\nimport './users/ha-config-users.js';\nimport './zwave/ha-config-zwave.js';\n\nimport isComponentLoaded from '../../common/config/is_component_loaded.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaPanelConfig extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <app-route\n      route='[[route]]'\n      pattern='/:page'\n      data=\"{{_routeData}}\"\n    ></app-route>\n\n    <iron-media-query query=\"(min-width: 1040px)\" query-matches=\"{{wide}}\">\n    </iron-media-query>\n    <iron-media-query query=\"(min-width: 1296px)\" query-matches=\"{{wideSidebar}}\">\n    </iron-media-query>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"core\")]]' restamp>\n      <ha-config-core\n        page-name='core'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-core>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"cloud\")]]' restamp>\n      <ha-config-cloud\n        page-name='cloud'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n        account='[[account]]'\n      ></ha-config-cloud>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"dashboard\")]]'>\n      <ha-config-dashboard\n        page-name='dashboard'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n        account='[[account]]'\n        narrow='[[narrow]]'\n        show-menu='[[showMenu]]'\n      ></ha-config-dashboard>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"automation\")]]' restamp>\n      <ha-config-automation\n        page-name='automation'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-automation>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"script\")]]' restamp>\n      <ha-config-script\n        page-name='script'\n        route='[[route]]'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-script>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"zwave\")]]' restamp>\n      <ha-config-zwave\n        page-name='zwave'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-zwave>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"customize\")]]' restamp>\n      <ha-config-customize\n        page-name='customize'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-customize>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"integrations\")]]' restamp>\n      <ha-config-entries\n        page-name='integrations'\n        hass='[[hass]]'\n        is-wide='[[isWide]]'\n      ></ha-config-entries>\n    </template>\n\n    <template is=\"dom-if\" if='[[_equals(_routeData.page, \"users\")]]' restamp>\n      <ha-config-users\n        page-name='users'\n        route='[[route]]'\n        hass='[[hass]]'\n      ></ha-config-users>\n    </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      narrow: Boolean,\n      showMenu: Boolean,\n      account: Object,\n\n      route: {\n        type: Object,\n        observer: '_routeChanged',\n      },\n\n      _routeData: Object,\n\n      wide: Boolean,\n      wideSidebar: Boolean,\n\n      isWide: {\n        type: Boolean,\n        computed: 'computeIsWide(showMenu, wideSidebar, wide)'\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (isComponentLoaded(this.hass, 'cloud')) {\n      this.hass.callApi('get', 'cloud/account').then((account) => { this.account = account; });\n    }\n    this.addEventListener('ha-account-refreshed', (ev) => {\n      this.account = ev.detail.account;\n    });\n  }\n\n  computeIsWide(showMenu, wideSidebar, wide) {\n    return showMenu ? wideSidebar : wide;\n  }\n\n  _routeChanged(route) {\n    if (route.path === '' && route.prefix === '/config') {\n      this.navigate('/config/dashboard', true);\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-config', HaPanelConfig);\n"],"sourceRoot":""}